/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $e(e,t,n,s){var r=arguments.length,o=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,s);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}const kt=e=>e!=null&&typeof e.deref=="function",Z=e=>kt(e)?e.deref():e;var Ee;(function(e){e[e.FINE=0]="FINE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.SEVERE=4]="SEVERE",e[e.NONE=5]="NONE"})(Ee||(Ee={}));const G=Symbol(),Ae=()=>{},Pt="*",Le=(()=>{try{return{}.UMBRELLA_ASSERTS==="1"}catch{}return!1})()?(e,t="assertion failed")=>{if(typeof e=="function"&&!e()||!e)throw new Error(typeof t=="function"?t():t)}:Ae,Mt=Object.freeze({level:Ee.NONE,fine(){},debug(){},info(){},warn(){},severe(){}}),Be=(e,t={})=>{const n=Reflect.ownKeys(e),s=Reflect.ownKeys(t),r=Symbol("isa");function o(i){for(let c of n){const l=Object.getOwnPropertyDescriptor(i.prototype,c);!l||l.configurable?Object.defineProperty(i.prototype,c,{value:e[c],writable:!0}):console.log(`not patching: ${i.name}.${c.toString()}`)}return Object.defineProperty(i.prototype,r,{value:!0}),i}for(let i of s)Object.defineProperty(o,i,{value:t[i],enumerable:t.propertyIsEnumerable(i)});return Object.defineProperty(o,Symbol.hasInstance,{value:i=>!!i[r]}),o},Ge=(e,t)=>{if(!!e){for(let n=0,s=e.length,r;n<s;n++)if(r=e[n],r[0].call(r[1],t),t.canceled)return}},zt=Be({addListener(e,t,n){let s=(this._listeners=this._listeners||{})[e];return!s&&(s=this._listeners[e]=[]),this.__listener(s,t,n)===-1?(s.push([t,n]),!0):!1},removeListener(e,t,n){let s;if(!(s=this._listeners))return!1;const r=s[e];if(r){const o=this.__listener(r,t,n);if(o!==-1)return r.splice(o,1),!r.length&&delete s[e],!0}return!1},notify(e){let t;if(!(t=this._listeners))return!1;e.target===void 0&&(e.target=this),Ge(t[e.id],e),Ge(t[Pt],e)},__listener(e,t,n){let s=e.length;for(;--s>=0;){const r=e[s];if(r[0]===t&&r[1]===n)break}return s}}),Ht=Be({addWatch(e,t){return this._watches=this._watches||{},this._watches[e]?!1:(this._watches[e]=t,!0)},removeWatch(e){if(!!this._watches)return this._watches[e]?(delete this._watches[e],!0):!1},notifyWatches(e,t){if(!this._watches)return;const n=this._watches;for(let s in n)n[s](s,e,t)}}),Ie=(e,t=n=>n!==void 0?": "+n:"")=>class extends Error{constructor(n){super(e(n)+t(n))}},jt=Ie(()=>"illegal argument(s)"),x=e=>{throw new jt(e)},St=Ie(()=>"illegal arity"),V=e=>{throw new St(e)},Ut=Ie(()=>"illegal state"),Ve=e=>{throw new Ut(e)},ve=e=>typeof e=="function",ee=(e,t)=>e!=null&&typeof e[t]=="function",qs=e=>/^[0-9]+$/.test(e),k=Array.isArray,$t=e=>e!=null&&typeof e!="function"&&e.length!==void 0,P=e=>typeof e=="string",Oe=e=>e!=null&&typeof e[Symbol.iterator]=="function",qe=e=>e!=null&&typeof e!="string"&&typeof e[Symbol.iterator]=="function",Ke=Object.getPrototypeOf,Bt=e=>{let t;return e!=null&&typeof e=="object"&&((t=Ke(e))===null||Ke(t)===null)},Gt=e=>e instanceof Promise,Vt=e=>e&&(e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Int8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Uint8ClampedArray),we=e=>k(e)?e:P(e)?e.length>0?e.split("."):[]:e!=null?[e]:[],qt=e=>Te(e);function Te(e){const t=we(e),[n,s,r,o]=t;switch(t.length){case 0:return i=>i;case 1:return i=>i!=null?i[n]:void 0;case 2:return i=>i!=null&&(i=i[n])!=null?i[s]:void 0;case 3:return i=>i!=null&&(i=i[n])!=null&&(i=i[s])!=null?i[r]:void 0;case 4:return i=>i!=null&&(i=i[n])!=null&&(i=i[s])!=null&&(i=i[r])!=null?i[o]:void 0;default:return i=>{const c=t.length-1;let l=i;for(let f=0;l!=null&&f<=c;f++)l=l[t[f]];return l}}}const Kt=e=>te(e);function te(e){const t=we(e),[n,s,r,o]=t;switch(t.length){case 0:return(c,l)=>l;case 1:return(c,l)=>(c=w(c),c[n]=l,c);case 2:return(c,l)=>{let f;return c=w(c),c[n]=f=w(c[n]),f[s]=l,c};case 3:return(c,l)=>{let f,u;return c=w(c),c[n]=f=w(c[n]),f[s]=u=w(f[s]),u[r]=l,c};case 4:return(c,l)=>{let f,u,h;return c=w(c),c[n]=f=w(c[n]),f[s]=u=w(f[s]),u[r]=h=w(u[r]),h[o]=l,c};default:let i;for(let c=t.length;--c>=0;)i=Qt(t[c],i);return i}}const w=e=>k(e)||Vt(e)?e.slice():Object.assign({},e),Qt=(e,t)=>(n,s)=>(n=w(n),n[e]=t?t(n[e],s):s,n),ne=(e,t,n,...s)=>Wt(e,t,n,...s);function Wt(e,t,n,...s){return te(t)(e,n.apply(null,(s.unshift(Te(t)(e)),s)))}const be=(e,t,n)=>te(t)(e,n),Xt=(e,t)=>Jt(e,t);function Jt(e,t){const n=Te(e),s=te(e);return(r,...o)=>s(r,t.apply(null,(o.unshift(n(r)),o)))}let De=class{constructor(t,n){n&&!n(t)&&Ve("initial state value did not validate"),this._value=t,this.valid=n}get value(){return this._value}set value(t){this.reset(t)}deref(){return this._value}equiv(t){return this===t}reset(t){const n=this._value;return this.valid&&!this.valid(t)?n:(this._value=t,this.notifyWatches(n,t),t)}resetIn(t,n){return this.reset(be(this._value,t,n))}resetInUnsafe(t,n){return this.reset(be(this._value,t,n))}swap(t,...n){return this.reset(t.apply(null,[this._value,...n]))}swapIn(t,n,...s){return this.reset(ne(this._value,t,n,...s))}swapInUnsafe(t,n,...s){return this.reset(ne(this._value,t,n,...s))}addWatch(t,n){}removeWatch(t){}notifyWatches(t,n){}release(){return delete this._watches,delete this._value,!0}};De=$e([Ht],De);let Yt=0;const Zt=()=>Yt++,Qe=Object.getPrototypeOf({}),se="function",We="string",T=(e,t)=>{let n;if(e===t)return!0;if(e!=null){if(typeof e.equiv===se)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===se)return t.equiv(e)}else return e==t;return typeof e===We||typeof t===We?!1:(n=Object.getPrototypeOf(e),(n==null||n===Qe)&&(n=Object.getPrototypeOf(t),n==null||n===Qe)?Ze(e,t):typeof e!==se&&e.length!==void 0&&typeof t!==se&&t.length!==void 0?Xe(e,t):e instanceof Set&&t instanceof Set?Je(e,t):e instanceof Map&&t instanceof Map?Ye(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},Xe=(e,t,n=T)=>{let s=e.length;if(s===t.length)for(;--s>=0&&n(e[s],t[s]););return s<0},Je=(e,t,n=T)=>e.size===t.size&&n([...e.keys()].sort(),[...t.keys()].sort()),Ye=(e,t,n=T)=>e.size===t.size&&n([...e].sort(),[...t].sort()),Ze=(e,t,n=T)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let s in e)if(!t.hasOwnProperty(s)||!n(e[s],t[s]))return!1;return!0};function Qs(e,t,n,s,r){return new xt(e,t,n,s,r)}class xt{constructor(t,n,s,r=!0,o=T){this.parent=t,this.id=`view-${Zt()}`,this.tx=s||(l=>l),this.path=we(n),this.isDirty=!0,this.isLazy=r;const i=qt(this.path),c=this.parent.deref();this.unprocessed=c?i(c):void 0,r||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),t.addWatch(this.id,(l,f,u)=>{const h=f&&i(f),a=u&&i(u);o(a,h)||(r?this.unprocessed=a:this.state=this.tx(a),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}let re,ie,en=[],tn=[];const nn=e=>re&&re.length>=e?re:re=new Int32Array(e),sn=e=>ie&&ie.length>=e?ie:ie=new Int32Array(e),xe=(e,t,n,s,r)=>{const o=t.length,i=e.linear;if(e.distance=o,r!=="only-distance"){for(let c=0,l=0;c<o;c++,l+=3)i[l]=s,i[l+1]=c,i[l+2]=t[c];if(r==="full"){const c=e[n];for(let l=0;l<o;l++)c[l]=t[l]}}return e},rn=(e,t,n="full",s=T)=>{const r={distance:0,adds:{},dels:{},const:{},linear:[]};if(e===t||e==null&&t==null)return r;if(e==null||e.length===0)return xe(r,t,"adds",1,n);if(t==null||t.length===0)return xe(r,e,"dels",-1,n);const o=e.length>=t.length;let i,c,l,f;o?(i=t,c=e):(i=e,c=t),l=i.length,f=c.length;const u=l+1,h=f-l,a=h+u,d=l+f+3,y=sn(d).fill(-1,0,d),_=nn(d).fill(-1,0,d),L=en,A=tn,D=(B,Se,Ue)=>{let me,N;Se>Ue?(me=y[B-1],N=Se):(me=y[B+1],N=Ue);let Y=N-(B-u);for(;Y<l&&N<f&&s(i[Y],c[N]);)Y++,N++;y[B]=A.length/3,A.push(Y,N,me),_[B]=N};let I=-1,v;do{for(I++,v=-I+u;v<a;v++)D(v,_[v-1]+1,_[v+1]);for(v=a+I;v>a;v--)D(v,_[v-1]+1,_[v+1]);D(a,_[a-1]+1,_[a+1])}while(_[a]!==f);if(r.distance=h+2*I,n!=="only-distance"){for(I=y[a]*3;I>=0;)L.push(I),I=A[I+2]*3;n==="full"?on(L,A,r,i,c,o):cn(L,A,r,i,c,o,n==="only-distance-linear")}return L.length=0,A.length=0,r},on=(e,t,n,s,r,o)=>{const i=n.linear,c=n.const;let l=e.length,f=0,u=0,h,a,d,y;for(o?(h=n.dels,a=n.adds,d=-1,y=1):(h=n.adds,a=n.dels,d=1,y=-1);--l>=0;){const _=e[l],L=t[_],A=t[_+1],D=A-L;for(;f<L||u<A;){const I=u-f;D>I?(i.push(d,u,h[u]=r[u]),u++):D<I?(i.push(y,f,a[f]=s[f]),f++):(i.push(0,f,c[f]=s[f]),f++,u++)}}},cn=(e,t,n,s,r,o,i)=>{const c=n.linear,l=o?-1:1,f=o?1:-1;let u=e.length,h=0,a=0;for(;--u>=0;){const d=e[u],y=t[d],_=t[d+1],L=_-y;for(;h<y||a<_;){const A=a-h;L>A?(c.push(l,a,r[a]),a++):L<A?(c.push(f,h,s[h]),h++):(i&&c.push(0,h,s[h]),h++,a++)}}},ln=(e,t,n="full",s=T)=>e===t?{distance:0}:n==="only-distance"?fn(e,t,s):un(e,t,s),fn=(e,t,n)=>{e||(e={}),t||(t={});let s=0;for(let r in e){const o=t[r];(o===void 0||!n(e[r],o))&&s++}for(let r in t)!(r in e)&&s++;return{distance:s}},un=(e,t,n)=>{e||(e={}),t||(t={});let s=0;const r=[],o=[],i=[];for(let c in e){const l=t[c];l===void 0?(o.push(c),s++):n(e[c],l)||(i.push(c,l),s++)}for(let c in t)c in e||(r.push(c),s++);return{distance:s,adds:r,dels:o,edits:i}},oe=Array.isArray,an=Math.max,et=Object.getPrototypeOf({}),ce="function",le="string",tt=(()=>{const e=new Array(2048);for(let t=2,n=e.length;t<n;t++)e[t]=t-2;return e})(),hn=e=>{if(e<=tt.length)return tt.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t},nt=(e,t,n,s,r,o=0)=>{const i=r[1];if(i.__skip)return;if(i.__diff===!1){q(s),t.replaceChild(e,n,o,r);return}const c=s[1];if(c&&c.__skip){t.replaceChild(e,n,o,r,!1);return}let l=i.__impl;if(l&&l!==t)return l.diffTree(e,l,n,s,r,o);const f=rn(s,r,"only-distance-linear",K);if(f.distance===0)return;const u=f.linear,h=t.getChild(n,o);let a,d,y;if(u[0]!==0||s[1].key!==i.key){q(s),t.replaceChild(e,n,o,r);return}if((y=s.__release)&&y!==r.__release&&q(s),u[3]!==0&&(_n(t,h,s[1],r[1]),f.distance===2))return;const _=u.length,L=s.length-1,A=mn(u),D=hn(L+1);for(a=6;a<_;a+=3)d=u[a],!!d&&(d===-1?dn(e,t,h,s,r,u,a,A,D,L):pn(e,t,h,u,a,A,D,L));(y=r.__init)&&y!=s.__init&&y.apply(r,[h,...r.__args])},dn=(e,t,n,s,r,o,i,c,l,f)=>{const u=o[i+2];if(oe(u)){let h=u[1].key;if(h!==void 0&&c[h][2]!==void 0){const a=c[h];h=a[0],nt(e,t,n,s[h],r[a[2]],l[h])}else{const a=o[i+1];q(u),t.removeChild(n,l[a]),gn(l,f,a)}}else typeof u===le&&t.setContent(n,"")},pn=(e,t,n,s,r,o,i,c)=>{const l=s[r+2];if(typeof l===le)t.setContent(n,l);else if(oe(l)){const f=l[1].key;if(f===void 0||o[f][0]===void 0){const u=s[r+1];t.createTree(e,n,l,i[u]),yn(i,c,u)}}},gn=(e,t,n)=>{for(;t>n;t--)e[t]=an(e[t]-1,0)},yn=(e,t,n)=>{for(;t>=n;t--)e[t]++},_n=(e,t,n,s)=>{const r=ln(n,s,"full",T);e.removeAttribs(t,r.dels,n);let o=G,i,c,l;for(l=r.edits,i=l.length;(i-=2)>=0;)c=l[i],c[0]==="o"&&c[1]==="n"&&e.removeAttribs(t,[c],n),c!=="value"?e.setAttrib(t,c,l[i+1],s):o=l[i+1];for(l=r.adds,i=l.length;--i>=0;)c=l[i],c!=="value"?e.setAttrib(t,c,s[c],s):o=s[c];o!==G&&e.setAttrib(t,"value",o,s)},q=e=>{if(oe(e)){let t;if((t=e[1])&&t.__release===!1)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)q(e[t])}},mn=e=>{let t,n,s;const r={};for(let o=e.length;(o-=3)>=0;)n=e[o+2],oe(n)&&(t=n[1].key)!==void 0&&(s=r[t],!s&&(r[t]=s=[,,]),s[e[o]+1]=e[o+1]);return r},K=(e,t)=>{let n;if(e===t)return!0;if(e!=null){if(typeof e.equiv===ce)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===ce)return t.equiv(e)}else return e==t;return typeof e===le||typeof t===le?!1:(n=Object.getPrototypeOf(e),(n==null||n===et)&&(n=Object.getPrototypeOf(t),n==null||n===et)?!(e.__diff===!1||t.__diff===!1)&&Ze(e,t,K):typeof e!==ce&&e.length!==void 0&&typeof t!==ce&&t.length!==void 0?Xe(e,t,K):e instanceof Set&&t instanceof Set?Je(e,t,K):e instanceof Map&&t instanceof Map?Ye(e,t,K):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},En={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},An=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;new RegExp(`[${Object.keys(En).join("")}]`,"g");const Ln={button:1,option:1,script:1,style:1,text:1,textarea:1,title:1},Re=e=>e.split(" ").reduce((t,n)=>(t[n]=!0,t),{}),In=Re("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view");Re("area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml");Re("animate circle ellipse line path polygon polyline rect");const st=(e,t)=>{if(t=Z(t),t==null)return e;if(P(t))return e+" "+t;const n=new Set(e.split(" "));for(let s in t)Z(t[s])?n.add(s):n.delete(s);return[...n].join(" ")},vn=(e,t,n)=>{t&&(e.id=t);let s=Z(e.class);return n?(n=n.replace(/\./g," "),e.class=s?st(n,s):n):s&&(e.class=P(s)?s:st("",s)),e},On=e=>{let t="",n;for(let s in e)n=Z(e[s]),ve(n)&&(n=n(e)),n!=null&&(t+=`${s}:${n};`);return t},wn=(e,t)=>{if(e==null||!t||!t.length)return e;const n=Object.assign({},e);for(let s of t){const r=n[s];ee(r,"deref")&&(n[s]=r.deref())}return n},Tn=e=>Object.keys(e).reduce((t,n)=>(t.push(`${n}: ${e[n]}`),t),[]).join(" "),bn="http://www.w3.org/2000/svg",fe=k,rt=qe,it=P,ot=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),ue=(e,t,n,s,r,o=!0)=>{if(fe(s)){const i=s[0];if(typeof i=="function")return ue(e,t,n,i.apply(null,[e.ctx,...s.slice(1)]),r);const c=s[1];if(c.__impl)return c.__impl.createTree(e,n,s,r,o);const l=t.createElement(n,i,c,r);if(s.length>2){const f=s.length;for(let u=2;u<f;u++)ue(e,t,l,s[u],void 0,o)}return o&&ot(l,s),l}if(rt(s)){const i=[];for(let c of s)i.push(ue(e,t,n,c,r,o));return i}return s==null?n:t.createTextElement(n,s)},ae=(e,t,n,s,r=0)=>{if(fe(s)){const o=t.getChild(n,r);typeof s[0]=="function"&&ae(e,t,n,s[0].apply(null,[e.ctx,...s.slice(1)]),r);const i=s[1];if(i.__impl)return i.__impl.hydrateTree(e,n,s,r);ot(o,s);for(let c in i)c[0]==="o"&&c[1]==="n"&&t.setAttrib(o,c,i[c]);for(let c=s.length,l=2;l<c;l++)ae(e,t,o,s[l],l-2)}else if(rt(s))for(let o of s)ae(e,t,n,o,r),r++},Dn=(e,t,n,s)=>{const r=In[t]?document.createElementNS(bn,t):document.createElement(t);return n&&kn(r,n),ct(e,r,s)},Rn=(e,t,n)=>ct(e,document.createTextNode(t),n),ct=(e,t,n)=>e?n===void 0?e.appendChild(t):e.insertBefore(t,e.children[n]):t,Cn=(e,t)=>e.children[t],Fn=(e,t,n,s,r,o=!0)=>(t.removeChild(n,s),t.createTree(e,n,r,s,o)),Nn=(e,t)=>e.textContent=t,kn=(e,t)=>{for(let n in t)lt(e,n,t[n],t);return e},lt=(e,t,n,s)=>{if(t.startsWith("__"))return;const r=t[0]==="o"&&t[1]==="n";if(!r&&typeof n=="function"&&(n=n(s)),n!==void 0&&n!==!1)switch(t){case"style":zn(e,n);break;case"value":Pn(e,n);break;case"prefix":e.setAttribute(t,it(n)?n:Tn(n));break;case"accesskey":e.accessKey=n;break;case"contenteditable":e.contentEditable=n;break;case"tabindex":e.tabIndex=n;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=n;break;default:r?Hn(e,t.substr(2),n):e.setAttribute(t,n===!0?"":n)}else e[t]!=null?e[t]=null:e.removeAttribute(t);return e},Pn=(e,t)=>{let n;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if((n=e.value)!==void 0&&typeof t=="string"){const s=t.length-(n.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t}},Mn=(e,t,n)=>{for(let s=t.length;--s>=0;){const r=t[s];r[0]==="o"&&r[1]==="n"?jn(e,r.substr(2),n[r]):e.hasAttribute(r)?e.removeAttribute(r):e[r]=null}},zn=(e,t)=>(e.setAttribute("style",On(t)),e),Hn=(e,t,n)=>it(n)?e.setAttribute("on"+t,n):fe(n)?e.addEventListener(t,...n):e.addEventListener(t,n),jn=(e,t,n)=>fe(n)?e.removeEventListener(t,...n):e.removeEventListener(t,n),Sn=(e,t)=>{const n=e.children[t];n!==void 0&&e.removeChild(n)},he=k,Un=qe,$n=Bt,Bn=(e,t)=>{let n=e[0],s=$n(e[1]),r,o,i;return(typeof n!="string"||!(r=An.exec(n)))&&x(`${n} is not a valid tag name`),o=r[1],n===o&&s&&(!t||e[1].key)?e:(i=vn(s?Object.assign({},e[1]):{},r[2],r[3]),i.__skip&&e.length<3?[o,i]:[o,i,...e.slice(s?2:1)])},Gn=(e,t)=>M(t,e,e.ctx,[0],e.keys!==!1,e.span!==!1),M=(e,t,n,s,r,o)=>{if(e!=null){if(he(e)){if(e.length===0)return;let i,c=e[1],l;if(c&&(l=c.__impl)&&(l=l.normalizeTree))return l(t,e);const f=e[0];if(typeof f=="function")return M(f.apply(null,[n,...e.slice(1)]),t,n,s,r,o);if(typeof f.render=="function"){const u=[n,...e.slice(1)];return i=M(f.render.apply(f,u),t,n,s,r,o),he(i)&&(i.__this=f,i.__init=f.init,i.__release=f.release,i.__args=u),i}return i=Bn(e,r),c=i[1],c.__normalize===!1?i:(r&&c.key===void 0&&(c.key=s.join("-")),i.length>2?Vn(i,c,t,n,s,r,o):i)}return typeof e=="function"?M(e(n),t,n,s,r,o):typeof e.toHiccup=="function"?M(e.toHiccup(t.ctx),t,n,s,r,o):typeof e.deref=="function"?M(e.deref(),t,n,s,r,o):o?["span",r?{key:s.join("-")}:{},e.toString()]:e.toString()}},Vn=(e,t,n,s,r,o,i)=>{const c=e[0],l=[c,t];i=i&&!Ln[c];for(let f=2,u=2,h=0,a=e.length;f<a;f++){let d=e[f];if(d!=null){const y=he(d);if(y&&he(d[0])||!y&&Un(d))for(let _ of d)_=M(_,n,s,r.concat(h),o,i),_!==void 0&&(l[u++]=_),h++;else d=M(d,n,s,r.concat(h),o,i),d!==void 0&&(l[u++]=d),h++}}return l},qn={createTree(e,t,n,s,r){return ue(e,this,t,n,s,r)},hydrateTree(e,t,n,s){return ae(e,this,t,n,s)},diffTree(e,t,n,s,r){nt(e,this,t,n,s,r)},normalizeTree:Gn,getElementById(e){return document.getElementById(e)},getChild:Cn,createElement:Dn,createTextElement:Rn,replaceChild(e,t,n,s,r){Fn(e,this,t,n,s,r)},removeChild:Sn,setContent:Nn,removeAttribs:Mn,setAttrib:lt},Kn=(e,t)=>P(e)?t.getElementById(e):e,Ws=(e,t={},n=qn)=>{const s=Object.assign({root:"app"},t);let r=[],o=!0;const i=Kn(s.root,n),c=()=>{if(o){s.ctx=wn(t.ctx,s.autoDerefKeys);const l=n.normalizeTree(s,e);l!=null&&(s.hydrate?(n.hydrateTree(s,i,l),s.hydrate=!1):n.diffTree(s,i,r,l),r=l),o&&requestAnimationFrame(c)}};return requestAnimationFrame(c),()=>o=!1},Qn="--set-value",Wn="--update-value",Xn="--toggle-value",Ce="--cancel",Jn="--dispatch",Yn="--dispatch-async",ft="--dispatch-now",Zn="--delay",xn="--fetch",O="--state",es="--redo",ts="--undo";let S=Mt;class ns{constructor(t,n){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),t&&this.addHandlers(t),n&&this.addEffects(n)}addBuiltIns(){this.addEffects({[Jn]:[t=>this.dispatch(t),-999],[Yn]:[([t,n,s,r],o,i)=>{const c=this.effects[t];if(c){const l=c(n,o,i);Gt(l)?l.then(f=>this.dispatch([s,f])).catch(f=>this.dispatch([r,f])):S.warn("async effect did not return Promise")}else S.warn(`skipping invalid async effect: ${t}`)},-999],[Zn]:[([t,n])=>new Promise(s=>setTimeout(()=>s(n),t)),1e3],[xn]:[t=>fetch(t).then(n=>{if(!n.ok)throw new Error(n.statusText);return n}),1e3]})}addHandler(t,n){const s=this.interceptorsFromSpec(n);s.length>0?(this.handlers[t]&&(this.removeHandler(t),S.warn(`overriding handler for ID: ${t}`)),this.handlers[t]=s):x(`no handlers in spec for ID: ${t}`)}addHandlers(t){for(let n in t)this.addHandler(n,t[n])}addEffect(t,n,s=1){this.effects[t]&&(this.removeEffect(t),S.warn(`overriding effect for ID: ${t}`)),this.effects[t]=n;const r=[t,s],o=this.priorities;for(let i=0;i<o.length;i++)if(r[1]<o[i][1]){o.splice(i,0,r);return}o.push(r)}addEffects(t){for(let n in t){const s=t[n];k(s)?this.addEffect(n,s[0],s[1]):this.addEffect(n,s)}}instrumentWith(t,n){const s=t.map(ut),r=this.handlers;for(let o of n||Object.keys(r)){const i=r[o];i&&(r[o]=s.concat(i))}}removeHandler(t){delete this.handlers[t]}removeHandlers(t){for(let n of t)this.removeHandler(n)}removeEffect(t){delete this.effects[t];const n=this.priorities;for(let s=n.length-1;s>=0;s--)if(t===n[s][0]){n.splice(s,1);return}}removeEffects(t){for(let n of t)this.removeEffect(n)}context(){return this.currCtx}dispatch(...t){this.eventQueue.push(...t)}dispatchNow(...t){(this.currQueue||this.eventQueue).push(...t)}dispatchLater(t,n=17){setTimeout(()=>this.dispatch(t),n)}processQueue(t){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=t||{};for(let n of this.currQueue)this.processEvent(t,n);return this.currQueue=this.currCtx=void 0,this.processEffects(t),!0}return!1}processEvent(t,n){const s=this.handlers[n[0]];if(!s){S.warn(`missing handler for event type: ${n[0].toString()}`);return}!this.processForward(t,s,n)||this.processReverse(t,s,n)}processForward(t,n,s){let r=!1;for(let o=0,i=n.length;o<i&&!t[Ce];o++){const c=n[o];c.pre&&this.mergeEffects(t,c.pre(t[O],s,this,t)),r=r||!!c.post}return r}processReverse(t,n,s){for(let r=n.length;--r>=0&&!t[Ce];){const o=n[r];o.post&&this.mergeEffects(t,o.post(t[O],s,this,t))}}processEffects(t){const n=this.effects;for(let s of this.priorities){const r=s[0],o=t[r];o!==void 0&&this.processEffect(t,n,r,o)}}processEffect(t,n,s,r){const o=n[s];if(s!==O)for(let i of r)o(i,this,t);else o(r,this,t)}mergeEffects(t,n){if(!!n)for(let s in n){const r=n[s];if(r!=null)if(s===O||s===Ce)t[s]=r;else if(s===ft)if(k(r[0]))for(let o of r)o&&this.dispatchNow(o);else this.dispatchNow(r);else if(t[s]||(t[s]=[]),k(r[0]))for(let o of r)o!==void 0&&t[s].push(o);else t[s].push(r)}}interceptorsFromSpec(t){return k(t)?t.map(ut):ve(t)?[{pre:t}]:[t]}}class Xs extends ns{constructor(t,n,s){super(n,s);this.state=t||new De({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[Qn]:(t,[n,[s,r]])=>({[O]:be(t,s,r)}),[Wn]:(t,[n,[s,r,...o]])=>({[O]:ne(t,s,r,...o)}),[Xn]:(t,[n,s])=>({[O]:ne(t,s,r=>!r)}),[ts]:at("undo"),[es]:at("redo")}),this.addEffects({[O]:[t=>this.state.reset(t),-1e3]})}processQueue(t){if(this.eventQueue.length>0){const n=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=Object.assign(Object.assign({},t),{[O]:n});for(let s of this.currQueue)this.processEvent(t,s);return this.currQueue=this.currCtx=void 0,this.processEffects(t),this.state.deref()!==n}return!1}}const ut=e=>ve(e)?{pre:e}:e,at=e=>(t,[n,s],r,o)=>{const i=s?s[0]:"history";if(ee(o[i],e)){const c=o[i][e]();return{[O]:r.state.deref(),[ft]:s?c!==void 0?s[1]:s[2]:void 0}}else S.warn("no history in context")},Js=(e,t)=>{const n=Kt(e);return(s,[r,o])=>({[O]:n(s,t?t(o):o)})},Ys=(e,t)=>{const n=Xt(e,t);return(s,[r,...o])=>({[O]:n(s,...o)})},ht="route-changed";let Fe=class{constructor(t){if(t.authenticator=t.authenticator||((n,s,r)=>({id:n.id,title:n.title,params:r})),t.prefix=t.prefix===void 0?"/":t.prefix,t.separator=t.separator||"/",this.config=t,Le(this.routeForID(this.config.defaultRouteID)!==void 0,`missing config for default route: '${this.config.defaultRouteID}'`),t.initialRouteID){const n=this.routeForID(t.initialRouteID);Le(n!==void 0,`missing config for initial route: ${this.config.initialRouteID}`),Le(!ss(n),"initial route MUST not be parametric")}}addListener(t,n,s){}removeListener(t,n,s){}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:ht,value:this.current})}}route(t){t.charAt(0)==="#"&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);let n=this.matchRoutes(t);if(!n){if(!this.handleRouteFailure())return;const s=this.routeForID(this.config.defaultRouteID);n={id:s.id,title:s.title,params:{}}}return T(n,this.current)||(this.current=n,this.notify({id:ht,value:n})),n}format(...t){let[n,s,r]=t,o;switch(t.length){case 3:o={id:n,params:s};break;case 2:P(n)?o={id:n,params:s}:(r=s,o=n);break;case 1:o=P(n)?{id:n}:n;break;default:V(t.length)}const i=this.routeForID(o.id);if(i){const c=o.params||{};return(r?"#":"")+this.config.prefix+i.match.map(l=>l.charAt(0)==="?"?(l=c[l.substr(1)])!=null?l:"NULL":l).join(this.config.separator)}else x(`invalid route ID: ${o.id}`)}routeForID(t){return this.config.routes.find(n=>n.id===t)}matchRoutes(t){const n=this.config.routes,s=t.split(this.config.separator);for(let r=0,o=n.length;r<o;r++){const i=this.matchRoute(s,n[r]);if(i)return i}}matchRoute(t,n){const s=n.match,r=s.length;if(t.length===r){const o={};for(let i=0;i<r;i++){const c=s[i];if(c.charAt(0)==="?")o[c.substr(1)]=t[i];else if(t[i]!==c)return}return n.validate&&!this.validateRouteParams(o,n.validate)?void 0:n.auth?this.config.authenticator(n,t,o):{id:n.id,title:n.title,params:o}}}validateRouteParams(t,n){for(let s in n)if(t[s]!==void 0){const r=n[s];if(r.coerce&&(t[s]=r.coerce(t[s])),r.check&&!r.check(t[s]))return!1}return!0}handleRouteFailure(){return!0}};Fe=$e([zt],Fe);const ss=e=>e.match.some(t=>t.charAt(0)==="?");class xs extends Fe{constructor(t){super(t);this.useFragment=t.useFragment!==!1,this.ignoreHashChange=!1}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(t,n=!0){const s=this.current,r=super.route(t);return r&&!T(r,s)&&(this.currentPath=this.format(r),n&&history.pushState(this.currentPath,r.title||window.document.title||"",this.currentPath)),r}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let n;switch(t.length){case 2:n={id:t[0],params:t[1]};break;case 1:n=P(t[0])?{id:t[0]}:t[0];break;default:V(t.length)}return super.format(n,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const n=t.newURL.substr(t.newURL.indexOf("#"));n!==this.currentPath&&this.route(n,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}const dt=e=>typeof e=="string"?e:e+"px",er=(e,t,n=t,s)=>[e[0],Object.assign(Object.assign(Object.assign({},e[1]),{width:dt(t),height:dt(n)}),s),...e.slice(2)],E=(...e)=>["svg",{viewBox:"0 0 32 32"},...e],tr=E(["path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z"}]),nr=E(["path",{d:"M10 16L20 6l1.4 1.4-8.6 8.6 8.6 8.6L20 26z"}]),sr=E(["path",{d:"M22 16L12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"}]),rr=E(["path",{d:"M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z"}]),ir=E(["path",{d:"M31 16l-7 7-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7zM1 16l7-7 1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7zM12.419 25.484L17.639 6l1.932.518L14.35 26z"}]),or=E(["path",{d:"M12 12h2v12h-2zM18 12h2v12h-2z"}],["path",{d:"M4 6v2h2v20a2 2 0 002 2h16a2 2 0 002-2V8h2V6zm4 22V8h16v20zM12 2h8v2h-8z"}]),cr=E(["path",{d:"M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}]),lr=E(["path",{d:"M28 6H8c-1.2 0-2 .8-2 2v14c0 1.2.8 2 2 2h8v-2H8V8h20v14h-7.2L16 28.8l1.6 1.2 4.2-6H28c1.2 0 2-.8 2-2V8c0-1.2-.8-2-2-2z"}],["path",{d:"M4 18H2V5c0-1.7 1.3-3 3-3h13v2H5c-.6 0-1 .4-1 1v13z"}]),fr=E(["path",{d:"M29.88 15.52l-6-11A1 1 0 0023 4H9a1 1 0 00-.88.52l-6 11a1 1 0 000 1l6 11A1 1 0 009 28h14a1 1 0 00.88-.52l6-11a1 1 0 000-.96zM22.93 7l4.39 8h-9.5zM16 14.14L10.82 6h10.36zM9.07 7l5.11 8h-9.5zM4.68 17h9.5l-5.11 8zm11.32.86L21.18 26H10.82zM22.93 25l-5.11-8h9.5z"}]),ur=E(["path",{d:"M4 24h24v2H4zM4 12h24v2H4zM4 18h24v2H4zM4 6h24v2H4z"}]),ar=E(["path",{d:"M28.7 20.3L26 17.6V13a10.07 10.07 0 00-9-10V1h-2v2a10.15 10.15 0 00-9 10v4.6l-2.7 2.7a.91.91 0 00-.3.7v3a.94.94 0 001 1h7a5 5 0 0010 0h7a.94.94 0 001-1v-3a.91.91 0 00-.3-.7zM16 28a3 3 0 01-3-3h6a3 3 0 01-3 3zm11-5H5v-1.6l2.7-2.7A.91.91 0 008 18v-5a8 8 0 0116 0v5a.91.91 0 00.3.7l2.7 2.7z"}]),hr=E(["path",{d:"M30 28.59L22.45 21A11 11 0 1021 22.45L28.59 30zM5 14a9 9 0 119 9 9 9 0 01-9-9z"}]),dr=E(["path",{d:"M12.1 2a9.8 9.8 0 00-5.4 1.6l6.4 6.4a2.1 2.1 0 01.2 3 2.1 2.1 0 01-3-.2L3.7 6.4A9.84 9.84 0 002 12.1a10.14 10.14 0 0010.1 10.1 10.9 10.9 0 002.6-.3l6.7 6.7a5 5 0 007.1-7.1l-6.7-6.7a10.9 10.9 0 00.3-2.6A10 10 0 0012.1 2zm8 10.1a7.61 7.61 0 01-.3 2.1l-.3 1.1.8.8 6.7 6.7a2.88 2.88 0 01.9 2.1A2.72 2.72 0 0127 27a2.9 2.9 0 01-4.2 0l-6.7-6.7-.8-.8-1.1.3a7.61 7.61 0 01-2.1.3 8.27 8.27 0 01-5.7-2.3A7.63 7.63 0 014 12.1a8.33 8.33 0 01.3-2.2l4.4 4.4a4.14 4.14 0 005.9.2 4.14 4.14 0 00-.2-5.9L10 4.2a6.45 6.45 0 012-.3 8.27 8.27 0 015.7 2.3 8.49 8.49 0 012.4 5.9z"}]),pr=E(["path",{d:"M16 4a5 5 0 11-5 5 5 5 0 015-5m0-2a7 7 0 107 7 7 7 0 00-7-7zM26 30h-2v-5a5 5 0 00-5-5h-6a5 5 0 00-5 5v5H6v-5a7 7 0 017-7h6a7 7 0 017 7z"}]),gr=E(["path",{d:"M5.24 22.51l1.43-1.42A14.06 14.06 0 013.07 16C5.1 10.93 10.7 7 16 7a12.38 12.38 0 014 .72l1.55-1.56A14.72 14.72 0 0016 5 16.69 16.69 0 001.06 15.66a1 1 0 000 .68 16 16 0 004.18 6.17z"}],["path",{d:"M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66a16.4 16.4 0 00-5.74-7.44L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27a16.69 16.69 0 0014.94-10.66 1 1 0 000-.68zM20 16a4 4 0 01-6 3.44L19.44 14a4 4 0 01.56 2zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"}]),yr=E(["path",{d:"M30.94 15.66A16.69 16.69 0 0016 5 16.69 16.69 0 001.06 15.66a1 1 0 000 .68A16.69 16.69 0 0016 27a16.69 16.69 0 0014.94-10.66 1 1 0 000-.68zM16 25c-5.3 0-10.9-3.93-12.93-9C5.1 10.93 10.7 7 16 7s10.9 3.93 12.93 9C26.9 21.07 21.3 25 16 25z"}],["path",{d:"M16 10a6 6 0 106 6 6 6 0 00-6-6zm0 10a4 4 0 114-4 4 4 0 01-4 4z"}]),_r=E(["path",{d:"M16 2a14 14 0 1014 14A14 14 0 0016 2zm0 26a12 12 0 1112-12 12 12 0 01-12 12z"}],["path",{d:"M15 8h2v11h-2zM16 22a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 22z"}]),de=e=>ee(e,"xform")?e.xform():e;class pe{constructor(t){this.value=t}deref(){return this.value}}const H=e=>e instanceof pe,pt=e=>e instanceof pe?e:new pe(e),Q=e=>e instanceof pe?e.deref():e,rs=e=>e.length===2?[void 0,e[1]]:e.length===3?[e[1],e[2]]:V(e.length);function Ne(...e){const t=e[0],n=t[0],s=t[1],r=t[2];e=rs(e);const o=e[0]==null?n():e[0],i=e[1];return Q(s(ee(i,"$reduce")?i.$reduce(r,o):$t(i)?is(r,o,i):os(r,o,i)))}const is=(e,t,n)=>{for(let s=0,r=n.length;s<r;s++)if(t=e(t,n[s]),H(t)){t=t.deref();break}return t},os=(e,t,n)=>{for(let s of n)if(t=e(t,s),H(t)){t=t.deref();break}return t},gt=(e,t)=>[e,n=>n,t],cs=(e,t)=>{const n=t.length-1;return Oe(t[n])?t.length>1?Ne(e.apply(null,t.slice(0,n)),t[n]):Ne(e(),t[0]):void 0};function ls(e){return e?[...e]:gt(()=>[],(t,n)=>(t.push(n),t))}function*fs(e,t){const n=de(e)(ls()),s=n[1],r=n[2];for(let o of t){const i=r([],o);if(H(i)){yield*Q(s(i.deref()));return}i.length&&(yield*i)}yield*Q(s([]))}function*yt(e,t){const n=de(e)([Ae,Ae,(s,r)=>r])[2];for(let s of t){let r=n(G,s);if(H(r)){r=Q(r.deref()),r!==G&&(yield r);return}r!==G&&(yield r)}}const _t=(e,t)=>[e[0],e[1],t];function mt(e,t){return Oe(t)?yt(mt(e),t):n=>{const s=n[2];return _t(n,(r,o)=>s(r,e(o)))}}function us(...e){return as(us,Ne,e)}const as=(e,t,n)=>{let s,r;switch(n.length){case 4:r=n[3],s=n[2];break;case 3:r=n[2];break;case 2:return mt(o=>e(n[0],n[1],o));default:V(n.length)}return t(de(n[0])(n[1]),s,r)},hs=(e,t,n,s)=>{const r=cs(e,s);if(r!==void 0)return r;const o=s[0]||n;return gt(()=>o,t)};function ds(...e){return hs(ds,(t,n)=>t+n,0,e)}function Et(...e){let[t,n,s,r,o,i,c,l,f,u]=e;switch(e.length){case 0:V(0);case 1:return t;case 2:return(...a)=>t(n(...a));case 3:return(...a)=>t(n(s(...a)));case 4:return(...a)=>t(n(s(r(...a))));case 5:return(...a)=>t(n(s(r(o(...a)))));case 6:return(...a)=>t(n(s(r(o(i(...a))))));case 7:return(...a)=>t(n(s(r(o(i(c(...a)))))));case 8:return(...a)=>t(n(s(r(o(i(c(l(...a))))))));case 9:return(...a)=>t(n(s(r(o(i(c(l(f(...a)))))))));case 10:default:const h=(...a)=>t(n(s(r(o(i(c(l(f(u(...a))))))))));return e.length===10?h:Et(h,...e.slice(10))}}function At(e,t){return Oe(t)?yt(At(e),t):n=>{const s=n[2];return _t(n,(r,o)=>e(o)?s(r,o):r)}}const Lt=e=>e[e.length-1];function ps(...e){return e=e.map(de),Et.apply(null,e)}var g;(function(e){e[e.PARTIAL=0]="PARTIAL",e[e.FULL=1]="FULL",e[e.FULL_NC=2]="FULL_NC",e[e.FAIL=-1]="FAIL"})(g||(g={}));const j=Object.freeze({type:g.PARTIAL});Object.freeze({type:g.FAIL});const m=(e,t=g.FULL)=>({type:t,body:e}),R=(e,t,n,s)=>()=>{const r=e.map(c=>c()),o=[];let i=r.length;return(c,l)=>{for(let f=r.length,u,h;--f>=0;)if(!!(u=r[f])){if(h=u(c,l),h.type>=g.FULL)return n?m(n(c,h.body,o),h.type):h;h.type===g.FAIL&&(r[f]=null,i--)}return(t||s)&&o.push(l),i?j:t?m(t(c,o)):m(s&&s(c,o),g.FAIL)}},gs=(e,t,n)=>()=>(s,r)=>e[r]?m(t&&t(s,r)):m(n&&n(s,r),g.FAIL);function It(e,t,n="start",s,r){return r?fs(It(e,t,n,s),r):([o,i,c])=>{let l=n,f=e[n]?e[n]():x(`invalid initial state: ${n}`);return[o,i,(u,h)=>{for(s&&s(t,h);;){const{type:a,body:d}=f(t,h),y=d&&d[1];if(a>=g.FULL){const _=d&&e[d[0]];if(_?(l=d[0],f=_()):Ve(`unknown tx: ${l} -> ${d&&d[0]}`),y&&(u=vt(c,u,y),H(y)&&(u=pt(u))),a===g.FULL_NC&&!H(u))continue}else if(a===g.FAIL)return y&&(u=vt(c,u,y)),pt(u);break}return u}]}}const vt=(e,t,n)=>{for(let s of Q(n))if(t=e(t,s),H(t))break;return t},ys=(e,t,n)=>()=>{let s=e();const r=[];return(o,i)=>{r.push(i);const{type:c}=s(o,i);return c===g.FAIL?m(t&&t(o,r)):c!==g.PARTIAL?m(n&&n(o,r),g.FAIL):j}};function*b(e,t){let n=typeof e=="string"?e.charCodeAt(0):e;const s=typeof t=="string"?t.charCodeAt(0):t;if(n<=s)for(;n<=s;n++)yield String.fromCharCode(n);else for(;n>=s;n--)yield String.fromCharCode(n)}const W=(...e)=>{const t={};for(let n of e)for(let s of n)t[s]=!0;return Object.freeze(t)},_s=Object.freeze({"	":!0,"\n":!0,"\v":!0,"\f":!0,"\r":!0," ":!0}),ms=W(b("0","9"));W(b("0","9"),b("A","F"),b("a","f"));const Es=W(b("a","z")),As=W(b("A","Z")),Ls=Object.freeze(Object.assign(Object.assign({},As),Es));Object.freeze(Object.assign(Object.assign(Object.assign({},Ls),ms),{_:!0}));W(b("!","/"),b(":","@"),b("[","`"),b("{","~"));const Is=(e,t)=>gs(_s,e,t),Ot=(e,t,n,s,r)=>()=>{let o=e(),i=0;const c=[];return(l,f)=>{c.push(f);const u=o(l,f);return u.type===g.FULL?(i++,i===n?m(s&&s(l,c)):(o=e(),j)):u.type===g.FAIL?i>=t?(c.pop(),m(s&&s(l,c),g.FULL_NC)):m(r&&r(l,c),g.FAIL):u}},ke=(e,t,n)=>()=>{let s=0,r=e[s]();const o=e.length-1,i=[];return(c,l)=>{if(s>o)return m(n&&n(c,i),g.FAIL);for(t&&i.push(l);s<=o;){const{type:f}=r(c,l);if(f>=g.FULL){if(s===o)return m(t&&t(c,i));if(r=e[++s](),f===g.FULL_NC)continue}return f===g.FAIL?m(n&&n(c,i),g.FAIL):j}return m(n&&n(c,i),g.FAIL)}},p=(e,t,n,s=!1)=>s?()=>{let r="";return(o,i)=>(r+=i)===e?m(t&&t(o,r)):e.indexOf(r)===0?j:m(n&&n(o,r),g.FAIL)}:()=>{let r=0,o=0;return(i,c)=>(e.charAt(o++)===c&&r++,r===e.length?m(t&&t(i,e)):r===o?j:m(n&&n(i,""),g.FAIL))},z=(e,t)=>()=>{let n="";return(s,r)=>(n+=r,n.endsWith(e)?m(t&&t(s,n.substr(0,n.length-e.length))):j)};var wt;(function(e){e[e.BLOCKQUOTE=0]="BLOCKQUOTE",e[e.CODE=1]="CODE",e[e.CODEBLOCK=2]="CODEBLOCK",e[e.EMPHASIS=3]="EMPHASIS",e[e.END_BLOCKQUOTE=4]="END_BLOCKQUOTE",e[e.END_LI=5]="END_LI",e[e.END_PARA=6]="END_PARA",e[e.END_HEADING=7]="END_HEADING",e[e.END_TABLE=8]="END_TABLE",e[e.HEADING=9]="HEADING",e[e.IMG=10]="IMG",e[e.LINK=11]="LINK",e[e.LI=12]="LI",e[e.PARA=13]="PARA",e[e.START=14]="START",e[e.START_CODEBLOCK=15]="START_CODEBLOCK",e[e.STRIKE=16]="STRIKE",e[e.STRONG=17]="STRONG",e[e.TABLE=18]="TABLE"})(wt||(wt={}));const vs={blockquote:e=>["blockquote",{},...e],code:e=>["code",{},e],codeblock:(e,t)=>["pre",{lang:e},t],em:e=>["em",{},e],heading:(e,t)=>[e<7?`h${e}`:"p",{},...t],hr:()=>["hr",{}],img:(e,t)=>["img",{src:e,alt:t}],li:e=>["li",{},...e],link:(e,t)=>["a",{href:e},t],list:(e,t)=>[e,{},...t],paragraph:e=>["p",{},...e],strong:e=>["strong",{},e],strike:e=>["del",{},e],table:e=>["table",{},["tbody",{},...e]],td:(e,t)=>["td",{},...t],tr:(e,t)=>["tr",{},...t]},Tt=">",ge="`",Os="```",ws="\n```\n",Pe="_",Ts="#",bs="-",Ds="![",bt="- ",Dt="[",Rs="]",Cs="(",Fs=")",C=`
`,Me="~~",ze="**",He="|",F=(e,t)=>(e.children=[],e.body="",[t]),U=(e,t)=>n=>(n.stack.push({id:e,children:n.children.concat(n.body)}),F(n,t)),Rt=e=>(t,n)=>{const{id:s,children:r}=t.stack.pop();return r.push(e(t,n)),t.children=r,t.body="",[s]},je=e=>(e.children.push(e.body),e.children),$=e=>(t,n)=>(t.body+=n.join(""),[e]),Ns=e=>t=>[14,[e(t.hd,je(t))]],Ct=e=>t=>[14,[e(je(t))]],ks=e=>(e.children.push(e.body,["br",{}]),e.body="",[0]),Ps=e=>(t,n)=>[14,[e(t.lang,n)]],Ft=(e,t)=>e.container.push(t(je(e))),Ms=(e,t,n)=>s=>(Ft(s,n),[14,[t(e,s.container)]]),zs=e=>t=>(t.children.push(t.body),t.container.push(e(Lt(t.stack).container.length,t.children)),F(t,18)),Hs=e=>t=>{const n=Lt(t.stack).container;return n.push(e(n.length,t.container)),t.container=[],F(t,8)},js=e=>t=>{const n=t.stack.pop().container;return n.splice(1,1),[14,[e(n)]]},ye=e=>Rt((t,n)=>e(t.body+n.trim())),Ss=(e,t)=>(e.hd=t.length,F(e,9)),X=e=>[p("![",U(e,10)),p(Dt,U(e,11)),p(Me,U(e,16)),p(ze,U(e,17)),p(Pe,U(e,3)),p(ge,U(e,1))],Nt=e=>ke([z(Rs,(t,n)=>(t.title=n,void 0)),p(Cs),z(Fs,(t,n)=>(t.href=n,void 0))],Rt(t=>e(t.href,t.title))),_e=(e,t)=>R([...X(e),p(C,n=>(n.body+=" ",[t]))],$(e)),Us=(e,t)=>(e.body=t.join(""),e.children=[],[13]),J=e=>t=>(t.stack.push({id:13,children:[]}),F(t,e)),$s=(e,t)=>(e.body=t[1],e.stack.push({id:13,children:[]}),[1]),Bs=e=>(e.container=[],F(e,12)),Gs=e=>(e.stack.push({id:18,container:[]}),e.container=[],F(e,18)),mr=e=>{const t=Object.assign(Object.assign({},vs),e);return ps(At(n=>n!=="\r"),It({[14]:R([Is(()=>[14]),Ot(p(Ts),1,1/0,Ss),p(Tt,n=>F(n,0)),p(bt,Bs),R([ke([p(ge),ys(p(ge))],$s),p(Os,()=>[15])],void 0,(n,s)=>s),ke([Ot(p(bs),3,1/0),p(C)],()=>[14,[t.hr()]]),p(Ds,J(10)),p(Dt,J(11)),p(ze,J(17)),p(Me,J(16)),p(Pe,J(3)),p(He,Gs)],Us),[13]:_e(13,6),[6]:R([...X(13),p(C,Ct(t.paragraph))],$(13)),[0]:_e(0,4),[4]:R([...X(0),p(Tt,ks),p(C,Ct(t.blockquote))],$(0)),[9]:_e(9,7),[7]:R([...X(9),p(C,Ns(t.heading))],$(9)),[15]:z(C,(n,s)=>(n.lang=s,[2])),[2]:z(ws,Ps(t.codeblock)),[12]:_e(12,5),[5]:R([p(C,Ms("ul",t.list,t.li)),p(bt,n=>(Ft(n,t.li),F(n,12)))],$(12)),[11]:Nt(t.link),[10]:Nt(t.img),[17]:z(ze,ye(t.strong)),[16]:z(Me,ye(t.strike)),[3]:z(Pe,ye(t.em)),[1]:z(ge,ye(t.code)),[18]:R([...X(18),p(He,zs(t.td)),p(C,Hs(t.tr))],$(18)),[8]:R([p(C,js(t.table)),p(He,()=>[18])])},{stack:[]},14))},Vs=([e,t,n],s)=>["option",{value:e,disabled:!!n,selected:e===s},t],Er=(e,t,n,s)=>["select",t,...n.map(r=>Vs(r,s))];export{tr as A,Ws as B,ir as C,or as D,cr as E,lr as F,xs as H,fr as I,ur as M,ar as N,hr as S,dr as T,pr as U,gr as V,_r as W,nr as a,sr as b,fs as c,Er as d,yr as e,ds as f,ps as g,At as h,qs as i,ft as j,Qn as k,Yn as l,mt as m,Zn as n,Wn as o,mr as p,rr as q,De as r,Xs as s,us as t,ht as u,Ys as v,er as w,Js as x,k as y,Qs as z};

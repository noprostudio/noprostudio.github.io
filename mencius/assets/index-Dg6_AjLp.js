var So=Object.defineProperty;var ko=(e,t,n)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ie=(e,t,n)=>ko(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function gs(e,t,n,s){var o=arguments.length,i=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}const Ro=e=>e!=null&&typeof e.deref=="function",Re=e=>Ro(e)?e.deref():e;var lt;(function(e){e[e.FINE=0]="FINE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.SEVERE=4]="SEVERE",e[e.NONE=5]="NONE"})(lt||(lt={}));const ue=Symbol(),at=()=>{},Uo="*";var Do={};const Ye=(()=>{try{return Do.UMBRELLA_ASSERTS==="1"}catch{}return!1})()?(e,t="assertion failed")=>{if(typeof e=="function"&&!e()||!e)throw new Error(typeof t=="function"?t():t)}:at,Po=Object.freeze({level:lt.NONE,fine(){},debug(){},info(){},warn(){},severe(){}}),ms=(e,t={})=>{const n=Reflect.ownKeys(e),s=Reflect.ownKeys(t),o=Symbol("isa");function i(r){for(let l of n){const a=Object.getOwnPropertyDescriptor(r.prototype,l);!a||a.configurable?Object.defineProperty(r.prototype,l,{value:e[l],writable:!0}):console.log(`not patching: ${r.name}.${l.toString()}`)}return Object.defineProperty(r.prototype,o,{value:!0}),r}for(let r of s)Object.defineProperty(i,r,{value:t[r],enumerable:t.propertyIsEnumerable(r)});return Object.defineProperty(i,Symbol.hasInstance,{value:r=>!!r[o]}),i},Ft=(e,t)=>{if(e){for(let n=0,s=e.length,o;n<s;n++)if(o=e[n],o[0].call(o[1],t),t.canceled)return}},Fo=ms({addListener(e,t,n){let s=(this._listeners=this._listeners||{})[e];return!s&&(s=this._listeners[e]=[]),this.__listener(s,t,n)===-1?(s.push([t,n]),!0):!1},removeListener(e,t,n){let s;if(!(s=this._listeners))return!1;const o=s[e];if(o){const i=this.__listener(o,t,n);if(i!==-1)return o.splice(i,1),!o.length&&delete s[e],!0}return!1},notify(e){let t;if(!(t=this._listeners))return!1;e.target===void 0&&(e.target=this),Ft(t[e.id],e),Ft(t[Uo],e)},__listener(e,t,n){let s=e.length;for(;--s>=0;){const o=e[s];if(o[0]===t&&o[1]===n)break}return s}}),Mo=ms({addWatch(e,t){return this._watches=this._watches||{},this._watches[e]?!1:(this._watches[e]=t,!0)},removeWatch(e){if(this._watches)return this._watches[e]?(delete this._watches[e],!0):!1},notifyWatches(e,t){if(!this._watches)return;const n=this._watches;for(let s in n)n[s](s,e,t)}}),Tt=(e,t=n=>n!==void 0?": "+n:"")=>class extends Error{constructor(n){super(e(n)+t(n))}},$o=Tt(()=>"illegal argument(s)"),Ve=e=>{throw new $o(e)},Go=Tt(()=>"illegal arity"),me=e=>{throw new Go(e)},Ho=Tt(()=>"illegal state"),_s=e=>{throw new Ho(e)},xt=e=>typeof e=="function",Be=(e,t)=>e!=null&&typeof e[t]=="function",zo=e=>/^[0-9]+$/.test(e),H=Array.isArray,jo=e=>e!=null&&typeof e!="function"&&e.length!==void 0,q=e=>typeof e=="string",Ot=e=>e!=null&&typeof e[Symbol.iterator]=="function",Es=e=>e!=null&&typeof e!="string"&&typeof e[Symbol.iterator]=="function",Mt=Object.getPrototypeOf,Vo=e=>{let t;return e!=null&&typeof e=="object"&&((t=Mt(e))===null||Mt(t)===null)},Bo=e=>e instanceof Promise,Wo=e=>e&&(e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Int8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Uint8ClampedArray),Lt=e=>H(e)?e:q(e)?e.length>0?e.split("."):[]:e!=null?[e]:[],Ko=e=>It(e);function It(e){const t=Lt(e),[n,s,o,i]=t;switch(t.length){case 0:return r=>r;case 1:return r=>r!=null?r[n]:void 0;case 2:return r=>r!=null&&(r=r[n])!=null?r[s]:void 0;case 3:return r=>r!=null&&(r=r[n])!=null&&(r=r[s])!=null?r[o]:void 0;case 4:return r=>r!=null&&(r=r[n])!=null&&(r=r[s])!=null&&(r=r[o])!=null?r[i]:void 0;default:return r=>{const l=t.length-1;let a=r;for(let c=0;a!=null&&c<=l;c++)a=a[t[c]];return a}}}const qo=e=>We(e);function We(e){const t=Lt(e),[n,s,o,i]=t;switch(t.length){case 0:return(l,a)=>a;case 1:return(l,a)=>(l=U(l),l[n]=a,l);case 2:return(l,a)=>{let c;return l=U(l),l[n]=c=U(l[n]),c[s]=a,l};case 3:return(l,a)=>{let c,d;return l=U(l),l[n]=c=U(l[n]),c[s]=d=U(c[s]),d[o]=a,l};case 4:return(l,a)=>{let c,d,p;return l=U(l),l[n]=c=U(l[n]),c[s]=d=U(c[s]),d[o]=p=U(d[o]),p[i]=a,l};default:let r;for(let l=t.length;--l>=0;)r=Zo(t[l],r);return r}}const U=e=>H(e)||Wo(e)?e.slice():Object.assign({},e),Zo=(e,t)=>(n,s)=>(n=U(n),n[e]=t?t(n[e],s):s,n),Ue=(e,t,n,...s)=>Qo(e,t,n,...s);function Qo(e,t,n,...s){return We(t)(e,n.apply(null,(s.unshift(It(t)(e)),s)))}const ct=(e,t,n)=>We(t)(e,n),Yo=(e,t)=>Jo(e,t);function Jo(e,t){const n=It(e),s=We(e);return(o,...i)=>s(o,t.apply(null,(i.unshift(n(o)),i)))}let De=class{constructor(t,n){n&&!n(t)&&_s("initial state value did not validate"),this._value=t,this.valid=n}get value(){return this._value}set value(t){this.reset(t)}deref(){return this._value}equiv(t){return this===t}reset(t){const n=this._value;return this.valid&&!this.valid(t)?n:(this._value=t,this.notifyWatches(n,t),t)}resetIn(t,n){return this.reset(ct(this._value,t,n))}resetInUnsafe(t,n){return this.reset(ct(this._value,t,n))}swap(t,...n){return this.reset(t.apply(null,[this._value,...n]))}swapIn(t,n,...s){return this.reset(Ue(this._value,t,n,...s))}swapInUnsafe(t,n,...s){return this.reset(Ue(this._value,t,n,...s))}addWatch(t,n){}removeWatch(t){}notifyWatches(t,n){}release(){return delete this._watches,delete this._value,!0}};De=gs([Mo],De);let Xo=0;const ei=()=>Xo++,$t=Object.getPrototypeOf({}),ye="function",Gt="string",P=(e,t)=>{let n;if(e===t)return!0;if(e!=null){if(typeof e.equiv===ye)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===ye)return t.equiv(e)}else return e==t;return typeof e===Gt||typeof t===Gt?!1:(n=Object.getPrototypeOf(e),(n==null||n===$t)&&(n=Object.getPrototypeOf(t),n==null||n===$t)?ws(e,t):typeof e!==ye&&e.length!==void 0&&typeof t!==ye&&t.length!==void 0?ys(e,t):e instanceof Set&&t instanceof Set?vs(e,t):e instanceof Map&&t instanceof Map?bs(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},ys=(e,t,n=P)=>{let s=e.length;if(s===t.length)for(;--s>=0&&n(e[s],t[s]););return s<0},vs=(e,t,n=P)=>e.size===t.size&&n([...e.keys()].sort(),[...t.keys()].sort()),bs=(e,t,n=P)=>e.size===t.size&&n([...e].sort(),[...t].sort()),ws=(e,t,n=P)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let s in e)if(!t.hasOwnProperty(s)||!n(e[s],t[s]))return!1;return!0};function Ht(e,t,n,s,o){return new ti(e,t,n,s,o)}class ti{constructor(t,n,s,o=!0,i=P){this.parent=t,this.id=`view-${ei()}`,this.tx=s||(a=>a),this.path=Lt(n),this.isDirty=!0,this.isLazy=o;const r=Ko(this.path),l=this.parent.deref();this.unprocessed=l?r(l):void 0,o||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),t.addWatch(this.id,(a,c,d)=>{const p=c&&r(c),f=d&&r(d);i(f,p)||(o?this.unprocessed=f:this.state=this.tx(f),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}let ve,be,ni=[],si=[];const oi=e=>ve&&ve.length>=e?ve:ve=new Int32Array(e),ii=e=>be&&be.length>=e?be:be=new Int32Array(e),zt=(e,t,n,s,o)=>{const i=t.length,r=e.linear;if(e.distance=i,o!=="only-distance"){for(let l=0,a=0;l<i;l++,a+=3)r[a]=s,r[a+1]=l,r[a+2]=t[l];if(o==="full"){const l=e[n];for(let a=0;a<i;a++)l[a]=t[a]}}return e},ri=(e,t,n="full",s=P)=>{const o={distance:0,adds:{},dels:{},const:{},linear:[]};if(e===t||e==null&&t==null)return o;if(e==null||e.length===0)return zt(o,t,"adds",1,n);if(t==null||t.length===0)return zt(o,e,"dels",-1,n);const i=e.length>=t.length;let r,l,a,c;i?(r=t,l=e):(r=e,l=t),a=r.length,c=l.length;const d=a+1,p=c-a,f=p+d,m=a+c+3,v=ii(m).fill(-1,0,m),b=oi(m).fill(-1,0,m),N=ni,I=si,F=(oe,Dt,Pt)=>{let Qe,j;Dt>Pt?(Qe=v[oe-1],j=Dt):(Qe=v[oe+1],j=Pt);let Ee=j-(oe-d);for(;Ee<a&&j<c&&s(r[Ee],l[j]);)Ee++,j++;v[oe]=I.length/3,I.push(Ee,j,Qe),b[oe]=j};let A=-1,S;do{for(A++,S=-A+d;S<f;S++)F(S,b[S-1]+1,b[S+1]);for(S=f+A;S>f;S--)F(S,b[S-1]+1,b[S+1]);F(f,b[f-1]+1,b[f+1])}while(b[f]!==c);if(o.distance=p+2*A,n!=="only-distance"){for(A=v[f]*3;A>=0;)N.push(A),A=I[A+2]*3;n==="full"?li(N,I,o,r,l,i):ai(N,I,o,r,l,i,n==="only-distance-linear")}return N.length=0,I.length=0,o},li=(e,t,n,s,o,i)=>{const r=n.linear,l=n.const;let a=e.length,c=0,d=0,p,f,m,v;for(i?(p=n.dels,f=n.adds,m=-1,v=1):(p=n.adds,f=n.dels,m=1,v=-1);--a>=0;){const b=e[a],N=t[b],I=t[b+1],F=I-N;for(;c<N||d<I;){const A=d-c;F>A?(r.push(m,d,p[d]=o[d]),d++):F<A?(r.push(v,c,f[c]=s[c]),c++):(r.push(0,c,l[c]=s[c]),c++,d++)}}},ai=(e,t,n,s,o,i,r)=>{const l=n.linear,a=i?-1:1,c=i?1:-1;let d=e.length,p=0,f=0;for(;--d>=0;){const m=e[d],v=t[m],b=t[m+1],N=b-v;for(;p<v||f<b;){const I=f-p;N>I?(l.push(a,f,o[f]),f++):N<I?(l.push(c,p,s[p]),p++):(r&&l.push(0,p,s[p]),p++,f++)}}},ci=(e,t,n="full",s=P)=>e===t?{distance:0}:n==="only-distance"?di(e,t,s):ui(e,t,s),di=(e,t,n)=>{e||(e={}),t||(t={});let s=0;for(let o in e){const i=t[o];(i===void 0||!n(e[o],i))&&s++}for(let o in t)!(o in e)&&s++;return{distance:s}},ui=(e,t,n)=>{e||(e={}),t||(t={});let s=0;const o=[],i=[],r=[];for(let l in e){const a=t[l];a===void 0?(i.push(l),s++):n(e[l],a)||(r.push(l,a),s++)}for(let l in t)l in e||(o.push(l),s++);return{distance:s,adds:o,dels:i,edits:r}},Ke=Array.isArray,fi=Math.max,jt=Object.getPrototypeOf({}),we="function",Pe="string",Vt=(()=>{const e=new Array(2048);for(let t=2,n=e.length;t<n;t++)e[t]=t-2;return e})(),hi=e=>{if(e<=Vt.length)return Vt.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t},Cs=(e,t,n,s,o,i=0)=>{const r=o[1];if(r.__skip)return;if(r.__diff===!1){fe(s),t.replaceChild(e,n,i,o);return}const l=s[1];if(l&&l.__skip){t.replaceChild(e,n,i,o,!1);return}let a=r.__impl;if(a&&a!==t)return a.diffTree(e,a,n,s,o,i);const c=ri(s,o,"only-distance-linear",ae);if(c.distance===0)return;const d=c.linear,p=t.getChild(n,i);let f,m,v;if(d[0]!==0||s[1].key!==r.key){fe(s),t.replaceChild(e,n,i,o);return}if((v=s.__release)&&v!==o.__release&&fe(s),d[3]!==0&&(Ei(t,p,s[1],o[1]),c.distance===2))return;const b=d.length,N=s.length-1,I=yi(d),F=hi(N+1);for(f=6;f<b;f+=3)m=d[f],m&&(m===-1?pi(e,t,p,s,o,d,f,I,F,N):gi(e,t,p,d,f,I,F,N));(v=o.__init)&&v!=s.__init&&v.apply(o,[p,...o.__args])},pi=(e,t,n,s,o,i,r,l,a,c)=>{const d=i[r+2];if(Ke(d)){let p=d[1].key;if(p!==void 0&&l[p][2]!==void 0){const f=l[p];p=f[0],Cs(e,t,n,s[p],o[f[2]],a[p])}else{const f=i[r+1];fe(d),t.removeChild(n,a[f]),mi(a,c,f)}}else typeof d===Pe&&t.setContent(n,"")},gi=(e,t,n,s,o,i,r,l)=>{const a=s[o+2];if(typeof a===Pe)t.setContent(n,a);else if(Ke(a)){const c=a[1].key;if(c===void 0||i[c][0]===void 0){const d=s[o+1];t.createTree(e,n,a,r[d]),_i(r,l,d)}}},mi=(e,t,n)=>{for(;t>n;t--)e[t]=fi(e[t]-1,0)},_i=(e,t,n)=>{for(;t>=n;t--)e[t]++},Ei=(e,t,n,s)=>{const o=ci(n,s,"full",P);e.removeAttribs(t,o.dels,n);let i=ue,r,l,a;for(a=o.edits,r=a.length;(r-=2)>=0;)l=a[r],l[0]==="o"&&l[1]==="n"&&e.removeAttribs(t,[l],n),l!=="value"?e.setAttrib(t,l,a[r+1],s):i=a[r+1];for(a=o.adds,r=a.length;--r>=0;)l=a[r],l!=="value"?e.setAttrib(t,l,s[l],s):i=s[l];i!==ue&&e.setAttrib(t,"value",i,s)},fe=e=>{if(Ke(e)){let t;if((t=e[1])&&t.__release===!1)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)fe(e[t])}},yi=e=>{let t,n,s;const o={};for(let i=e.length;(i-=3)>=0;)n=e[i+2],Ke(n)&&(t=n[1].key)!==void 0&&(s=o[t],!s&&(o[t]=s=[,,]),s[e[i]+1]=e[i+1]);return o},ae=(e,t)=>{let n;if(e===t)return!0;if(e!=null){if(typeof e.equiv===we)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===we)return t.equiv(e)}else return e==t;return typeof e===Pe||typeof t===Pe?!1:(n=Object.getPrototypeOf(e),(n==null||n===jt)&&(n=Object.getPrototypeOf(t),n==null||n===jt)?!(e.__diff===!1||t.__diff===!1)&&ws(e,t,ae):typeof e!==we&&e.length!==void 0&&typeof t!==we&&t.length!==void 0?ys(e,t,ae):e instanceof Set&&t instanceof Set?vs(e,t,ae):e instanceof Map&&t instanceof Map?bs(e,t,ae):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},vi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},bi=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;new RegExp(`[${Object.keys(vi).join("")}]`,"g");const wi={button:1,option:1,script:1,style:1,text:1,textarea:1,title:1},Nt=e=>e.split(" ").reduce((t,n)=>(t[n]=!0,t),{}),Ci=Nt("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view");Nt("area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml");Nt("animate circle ellipse line path polygon polyline rect");const Bt=(e,t)=>{if(t=Re(t),t==null)return e;if(q(t))return e+" "+t;const n=new Set(e.split(" "));for(let s in t)Re(t[s])?n.add(s):n.delete(s);return[...n].join(" ")},Ti=(e,t,n)=>{t&&(e.id=t);let s=Re(e.class);return n?(n=n.replace(/\./g," "),e.class=s?Bt(n,s):n):s&&(e.class=q(s)?s:Bt("",s)),e},xi=e=>{let t="",n;for(let s in e)n=Re(e[s]),xt(n)&&(n=n(e)),n!=null&&(t+=`${s}:${n};`);return t},Oi=(e,t)=>{if(e==null||!t||!t.length)return e;const n=Object.assign({},e);for(let s of t){const o=n[s];Be(o,"deref")&&(n[s]=o.deref())}return n},Li=e=>Object.keys(e).reduce((t,n)=>(t.push(`${n}: ${e[n]}`),t),[]).join(" "),Ii="http://www.w3.org/2000/svg",qe=H,Ts=Es,xs=q,Os=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),Oe=(e,t,n,s,o,i=!0)=>{if(qe(s)){const r=s[0];if(typeof r=="function")return Oe(e,t,n,r.apply(null,[e.ctx,...s.slice(1)]),o);const l=s[1];if(l.__impl)return l.__impl.createTree(e,n,s,o,i);const a=t.createElement(n,r,l,o);if(s.length>2){const c=s.length;for(let d=2;d<c;d++)Oe(e,t,a,s[d],void 0,i)}return i&&Os(a,s),a}if(Ts(s)){const r=[];for(let l of s)r.push(Oe(e,t,n,l,o,i));return r}return s==null?n:t.createTextElement(n,s)},Le=(e,t,n,s,o=0)=>{if(qe(s)){const i=t.getChild(n,o);typeof s[0]=="function"&&Le(e,t,n,s[0].apply(null,[e.ctx,...s.slice(1)]),o);const r=s[1];if(r.__impl)return r.__impl.hydrateTree(e,n,s,o);Os(i,s);for(let l in r)l[0]==="o"&&l[1]==="n"&&t.setAttrib(i,l,r[l]);for(let l=s.length,a=2;a<l;a++)Le(e,t,i,s[a],a-2)}else if(Ts(s))for(let i of s)Le(e,t,n,i,o),o++},Ni=(e,t,n,s)=>{const o=Ci[t]?document.createElementNS(Ii,t):document.createElement(t);return n&&Ui(o,n),Ls(e,o,s)},Ai=(e,t,n)=>Ls(e,document.createTextNode(t),n),Ls=(e,t,n)=>e?n===void 0?e.appendChild(t):e.insertBefore(t,e.children[n]):t,Si=(e,t)=>e.children[t],ki=(e,t,n,s,o,i=!0)=>(t.removeChild(n,s),t.createTree(e,n,o,s,i)),Ri=(e,t)=>e.textContent=t,Ui=(e,t)=>{for(let n in t)Is(e,n,t[n],t);return e},Is=(e,t,n,s)=>{if(t.startsWith("__"))return;const o=t[0]==="o"&&t[1]==="n";if(!o&&typeof n=="function"&&(n=n(s)),n!==void 0&&n!==!1)switch(t){case"style":Fi(e,n);break;case"value":Di(e,n);break;case"prefix":e.setAttribute(t,xs(n)?n:Li(n));break;case"accesskey":e.accessKey=n;break;case"contenteditable":e.contentEditable=n;break;case"tabindex":e.tabIndex=n;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=n;break;default:o?Mi(e,t.substr(2),n):e.setAttribute(t,n===!0?"":n)}else e[t]!=null?e[t]=null:e.removeAttribute(t);return e},Di=(e,t)=>{let n;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if((n=e.value)!==void 0&&typeof t=="string"){const s=t.length-(n.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t}},Pi=(e,t,n)=>{for(let s=t.length;--s>=0;){const o=t[s];o[0]==="o"&&o[1]==="n"?$i(e,o.substr(2),n[o]):e.hasAttribute(o)?e.removeAttribute(o):e[o]=null}},Fi=(e,t)=>(e.setAttribute("style",xi(t)),e),Mi=(e,t,n)=>xs(n)?e.setAttribute("on"+t,n):qe(n)?e.addEventListener(t,...n):e.addEventListener(t,n),$i=(e,t,n)=>qe(n)?e.removeEventListener(t,...n):e.removeEventListener(t,n),Gi=(e,t)=>{const n=e.children[t];n!==void 0&&e.removeChild(n)},Fe=H,Hi=Es,zi=Vo,ji=(e,t)=>{let n=e[0],s=zi(e[1]),o,i,r;return(typeof n!="string"||!(o=bi.exec(n)))&&Ve(`${n} is not a valid tag name`),i=o[1],n===i&&s&&(!t||e[1].key)?e:(r=Ti(s?Object.assign({},e[1]):{},o[2],o[3]),r.__skip&&e.length<3?[i,r]:[i,r,...e.slice(s?2:1)])},Vi=(e,t)=>K(t,e,e.ctx,[0],e.keys!==!1,e.span!==!1),K=(e,t,n,s,o,i)=>{if(e!=null){if(Fe(e)){if(e.length===0)return;let r,l=e[1],a;if(l&&(a=l.__impl)&&(a=a.normalizeTree))return a(t,e);const c=e[0];if(typeof c=="function")return K(c.apply(null,[n,...e.slice(1)]),t,n,s,o,i);if(typeof c.render=="function"){const d=[n,...e.slice(1)];return r=K(c.render.apply(c,d),t,n,s,o,i),Fe(r)&&(r.__this=c,r.__init=c.init,r.__release=c.release,r.__args=d),r}return r=ji(e,o),l=r[1],l.__normalize===!1?r:(o&&l.key===void 0&&(l.key=s.join("-")),r.length>2?Bi(r,l,t,n,s,o,i):r)}return typeof e=="function"?K(e(n),t,n,s,o,i):typeof e.toHiccup=="function"?K(e.toHiccup(t.ctx),t,n,s,o,i):typeof e.deref=="function"?K(e.deref(),t,n,s,o,i):i?["span",o?{key:s.join("-")}:{},e.toString()]:e.toString()}},Bi=(e,t,n,s,o,i,r)=>{const l=e[0],a=[l,t];r=r&&!wi[l];for(let c=2,d=2,p=0,f=e.length;c<f;c++){let m=e[c];if(m!=null){const v=Fe(m);if(v&&Fe(m[0])||!v&&Hi(m))for(let b of m)b=K(b,n,s,o.concat(p),i,r),b!==void 0&&(a[d++]=b),p++;else m=K(m,n,s,o.concat(p),i,r),m!==void 0&&(a[d++]=m),p++}}return a},Wi={createTree(e,t,n,s,o){return Oe(e,this,t,n,s,o)},hydrateTree(e,t,n,s){return Le(e,this,t,n,s)},diffTree(e,t,n,s,o){Cs(e,this,t,n,s,o)},normalizeTree:Vi,getElementById(e){return document.getElementById(e)},getChild:Si,createElement:Ni,createTextElement:Ai,replaceChild(e,t,n,s,o){ki(e,this,t,n,s,o)},removeChild:Gi,setContent:Ri,removeAttribs:Pi,setAttrib:Is},Ki=(e,t)=>q(e)?t.getElementById(e):e,qi=(e,t={},n=Wi)=>{const s=Object.assign({root:"app"},t);let o=[],i=!0;const r=Ki(s.root,n),l=()=>{if(i){s.ctx=Oi(t.ctx,s.autoDerefKeys);const a=n.normalizeTree(s,e);a!=null&&(s.hydrate?(n.hydrateTree(s,r,a),s.hydrate=!1):n.diffTree(s,r,o,a),o=a),i&&requestAnimationFrame(l)}};return requestAnimationFrame(l),()=>i=!1},x="--set-value",B="--update-value",Zi="--toggle-value",Je="--cancel",Qi="--dispatch",C="--dispatch-async",u="--dispatch-now",Ns="--delay",Yi="--fetch",k="--state",Ji="--redo",Xi="--undo";let X=Po;class er{constructor(t,n){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),t&&this.addHandlers(t),n&&this.addEffects(n)}addBuiltIns(){this.addEffects({[Qi]:[t=>this.dispatch(t),-999],[C]:[([t,n,s,o],i,r)=>{const l=this.effects[t];if(l){const a=l(n,i,r);Bo(a)?a.then(c=>this.dispatch([s,c])).catch(c=>this.dispatch([o,c])):X.warn("async effect did not return Promise")}else X.warn(`skipping invalid async effect: ${t}`)},-999],[Ns]:[([t,n])=>new Promise(s=>setTimeout(()=>s(n),t)),1e3],[Yi]:[t=>fetch(t).then(n=>{if(!n.ok)throw new Error(n.statusText);return n}),1e3]})}addHandler(t,n){const s=this.interceptorsFromSpec(n);s.length>0?(this.handlers[t]&&(this.removeHandler(t),X.warn(`overriding handler for ID: ${t}`)),this.handlers[t]=s):Ve(`no handlers in spec for ID: ${t}`)}addHandlers(t){for(let n in t)this.addHandler(n,t[n])}addEffect(t,n,s=1){this.effects[t]&&(this.removeEffect(t),X.warn(`overriding effect for ID: ${t}`)),this.effects[t]=n;const o=[t,s],i=this.priorities;for(let r=0;r<i.length;r++)if(o[1]<i[r][1]){i.splice(r,0,o);return}i.push(o)}addEffects(t){for(let n in t){const s=t[n];H(s)?this.addEffect(n,s[0],s[1]):this.addEffect(n,s)}}instrumentWith(t,n){const s=t.map(Wt),o=this.handlers;for(let i of n||Object.keys(o)){const r=o[i];r&&(o[i]=s.concat(r))}}removeHandler(t){delete this.handlers[t]}removeHandlers(t){for(let n of t)this.removeHandler(n)}removeEffect(t){delete this.effects[t];const n=this.priorities;for(let s=n.length-1;s>=0;s--)if(t===n[s][0]){n.splice(s,1);return}}removeEffects(t){for(let n of t)this.removeEffect(n)}context(){return this.currCtx}dispatch(...t){this.eventQueue.push(...t)}dispatchNow(...t){(this.currQueue||this.eventQueue).push(...t)}dispatchLater(t,n=17){setTimeout(()=>this.dispatch(t),n)}processQueue(t){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=t||{};for(let n of this.currQueue)this.processEvent(t,n);return this.currQueue=this.currCtx=void 0,this.processEffects(t),!0}return!1}processEvent(t,n){const s=this.handlers[n[0]];if(!s){X.warn(`missing handler for event type: ${n[0].toString()}`);return}this.processForward(t,s,n)&&this.processReverse(t,s,n)}processForward(t,n,s){let o=!1;for(let i=0,r=n.length;i<r&&!t[Je];i++){const l=n[i];l.pre&&this.mergeEffects(t,l.pre(t[k],s,this,t)),o=o||!!l.post}return o}processReverse(t,n,s){for(let o=n.length;--o>=0&&!t[Je];){const i=n[o];i.post&&this.mergeEffects(t,i.post(t[k],s,this,t))}}processEffects(t){const n=this.effects;for(let s of this.priorities){const o=s[0],i=t[o];i!==void 0&&this.processEffect(t,n,o,i)}}processEffect(t,n,s,o){const i=n[s];if(s!==k)for(let r of o)i(r,this,t);else i(o,this,t)}mergeEffects(t,n){if(n)for(let s in n){const o=n[s];if(o!=null)if(s===k||s===Je)t[s]=o;else if(s===u)if(H(o[0]))for(let i of o)i&&this.dispatchNow(i);else this.dispatchNow(o);else if(t[s]||(t[s]=[]),H(o[0]))for(let i of o)i!==void 0&&t[s].push(i);else t[s].push(o)}}interceptorsFromSpec(t){return H(t)?t.map(Wt):xt(t)?[{pre:t}]:[t]}}class tr extends er{constructor(t,n,s){super(n,s),this.state=t||new De({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[x]:(t,[n,[s,o]])=>({[k]:ct(t,s,o)}),[B]:(t,[n,[s,o,...i]])=>({[k]:Ue(t,s,o,...i)}),[Zi]:(t,[n,s])=>({[k]:Ue(t,s,o=>!o)}),[Xi]:Kt("undo"),[Ji]:Kt("redo")}),this.addEffects({[k]:[t=>this.state.reset(t),-1e3]})}processQueue(t){if(this.eventQueue.length>0){const n=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=Object.assign(Object.assign({},t),{[k]:n});for(let s of this.currQueue)this.processEvent(t,s);return this.currQueue=this.currCtx=void 0,this.processEffects(t),this.state.deref()!==n}return!1}}const Wt=e=>xt(e)?{pre:e}:e,Kt=e=>(t,[n,s],o,i)=>{const r=s?s[0]:"history";if(Be(i[r],e)){const l=i[r][e]();return{[k]:o.state.deref(),[u]:s?l!==void 0?s[1]:s[2]:void 0}}else X.warn("no history in context")},nr=(e,t)=>{const n=qo(e);return(s,[o,i])=>({[k]:n(s,i)})},R=(e,t)=>{const n=Yo(e,t);return(s,[o,...i])=>({[k]:n(s,...i)})},he="route-changed";let dt=class{constructor(t){if(t.authenticator=t.authenticator||((n,s,o)=>({id:n.id,title:n.title,params:o})),t.prefix=t.prefix===void 0?"/":t.prefix,t.separator=t.separator||"/",this.config=t,Ye(this.routeForID(this.config.defaultRouteID)!==void 0,`missing config for default route: '${this.config.defaultRouteID}'`),t.initialRouteID){const n=this.routeForID(t.initialRouteID);Ye(n!==void 0,`missing config for initial route: ${this.config.initialRouteID}`),Ye(!sr(n),"initial route MUST not be parametric")}}addListener(t,n,s){}removeListener(t,n,s){}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:he,value:this.current})}}route(t){t.charAt(0)==="#"&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);let n=this.matchRoutes(t);if(!n){if(!this.handleRouteFailure())return;const s=this.routeForID(this.config.defaultRouteID);n={id:s.id,title:s.title,params:{}}}return P(n,this.current)||(this.current=n,this.notify({id:he,value:n})),n}format(...t){let[n,s,o]=t,i;switch(t.length){case 3:i={id:n,params:s};break;case 2:q(n)?i={id:n,params:s}:(o=s,i=n);break;case 1:i=q(n)?{id:n}:n;break;default:me(t.length)}const r=this.routeForID(i.id);if(r){const l=i.params||{};return(o?"#":"")+this.config.prefix+r.match.map(a=>a.charAt(0)==="?"?(a=l[a.substr(1)])!=null?a:"NULL":a).join(this.config.separator)}else Ve(`invalid route ID: ${i.id}`)}routeForID(t){return this.config.routes.find(n=>n.id===t)}matchRoutes(t){const n=this.config.routes,s=t.split(this.config.separator);for(let o=0,i=n.length;o<i;o++){const r=this.matchRoute(s,n[o]);if(r)return r}}matchRoute(t,n){const s=n.match,o=s.length;if(t.length===o){const i={};for(let r=0;r<o;r++){const l=s[r];if(l.charAt(0)==="?")i[l.substr(1)]=t[r];else if(t[r]!==l)return}return n.validate&&!this.validateRouteParams(i,n.validate)?void 0:n.auth?this.config.authenticator(n,t,i):{id:n.id,title:n.title,params:i}}}validateRouteParams(t,n){for(let s in n)if(t[s]!==void 0){const o=n[s];if(o.coerce&&(t[s]=o.coerce(t[s])),o.check&&!o.check(t[s]))return!1}return!0}handleRouteFailure(){return!0}};dt=gs([Fo],dt);const sr=e=>e.match.some(t=>t.charAt(0)==="?");class or extends dt{constructor(t){super(t),this.useFragment=t.useFragment!==!1,this.ignoreHashChange=!1}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(t,n=!0){const s=this.current,o=super.route(t);return o&&!P(o,s)&&(this.currentPath=this.format(o),n&&history.pushState(this.currentPath,o.title||window.document.title||"",this.currentPath)),o}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let n;switch(t.length){case 2:n={id:t[0],params:t[1]};break;case 1:n=q(t[0])?{id:t[0]}:t[0];break;default:me(t.length)}return super.format(n,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const n=t.newURL.substr(t.newURL.indexOf("#"));n!==this.currentPath&&this.route(n,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}const qt="done",w="error",g="set-status",G="route-to",te="route-to-entry",As="route-to-new-entry",Ss="route-to-edit-entry",Zt="route-to-search-entry",ks="toggle-nav",Rs="toggle-account",ut="close-account",Us="toggle-notification",ft="close-notification",Ds="toggle-delete-opinion",Me="close-delete-opinion",Qt="toggle-report",$e="close-report",ce="set-report",Ps="set-opinion-report",Fs="create-report",Yt="create-report-success",ir="toggle-debug",Ms="set-input",Jt="get-entry",Xt="receive-entry",ht="get-user",en="receive-user",$s="get-token",tn="receive-token",Gs="sign-out",nn="sign-out-success",Ie="set-opinion-template",At="set-opinion",Hs="create-opinion",sn="create-opinion-success",Ce="append-opinion",Xe="remove-opinion",zs="delete-opinion",on="delete-opinion-success",et="set-temp-opinion",js="edit-opinion",Vs="cancel-edit-opinion",Bs="update-opinion",rn="update-opinion-success",Ws="set-new-entry",Ks="set-new-entry-template",qs="get-wiki-new",ln="receive-wiki-new",Zs="get-wiki-temp",an="receive-wiki-temp",Qs="create-entry",cn="create-entry-success",Ys="update-entry",dn="update-entry-success",Js="set-temp-entry",Xs="set-temp-entry-template",pt="search-entry",un="search-entry-success",pe="route-to-search-entry-page",fn="get-vote",hn="receive-vote",eo="create-vote",pn="create-vote-success",to="delete-vote",gn="delete-vote-success",mn="append-vote",_n="remove-vote",gt="get-entry-w-activity",En="get-notification",yn="receive-notification",vn="update-notification",bn="update-notification-success",mt="create-notification",wn="create-notification-success",no="delete-notification",Cn="delete-notification-success",Tn="append-notification",xn="remove-notification",On="get-new-notifications",Ln="receive-new-notifications",In="mark-new-notifications",so="view-new-notifications",re="toggle-vote-lock";function E(e,t,n,s){return["button",{...n,onclick:o=>{o.preventDefault(),e.bus.dispatch(t)}},s]}const Ge={id:"about",match:["about"]},_t={id:"contact",match:["contact"]},tt={id:"search",match:["search","?id","?page"],validate:{id:{check:e=>e!==""},page:{check:e=>zo(e)}}},nt={id:"entry-detail",match:["entry","?id"],validate:{id:{coerce:e=>e.toLowerCase(),check:e=>e.toLowerCase()===e}}},Ne={id:"new-entry",match:["new_entry","?id"],validate:{id:{coerce:e=>e.toLowerCase(),check:e=>e.toLowerCase()===e}}},st={id:"edit-entry",match:["edit_entry","?id"],validate:{id:{coerce:e=>e.toLowerCase(),check:e=>e.toLowerCase()===e}}},Ae={id:"sign-in",match:["sign_in"]},Nn={id:"github-oauth-cb",match:["github_oauth_cb"]},Et={id:"faq",match:["faq"]},He=(e,t,n)=>[e[0],{...e[1],width:t,height:n,fill:"currentColor"},...e.slice(2)],oo=["svg",{viewBox:"0 0 60 60"},["path",{d:"M53.4082031,49.7421875 L44.3017578,49.7421875 L42.2021484,34.2880859 C42.0556633,33.1975857 41.9213873,31.9850327 41.7993164,30.6503906 C41.6772455,29.3157485 41.5673833,27.8590574 41.4697266,26.2802734 C41.2418608,27.7939529 40.7942742,29.6819548 40.1269531,31.9443359 C39.980468,32.4163435 39.8746748,32.7662749 39.8095703,32.9941406 L34.9511719,49.7421875 L28.4570312,49.7421875 L23.5986328,32.9941406 C23.5335283,32.7662749 23.435873,32.4163435 23.3056641,31.9443359 C22.6220669,29.6819548 22.1744802,27.8020908 21.9628906,26.3046875 C21.8652339,27.6556057 21.7513027,28.9942968 21.6210938,30.3208008 C21.4908848,31.6473048 21.3362639,32.96972 21.1572266,34.2880859 L19.0576172,49.7421875 L10,49.7421875 L15.5175781,14 L25.1611328,14 L30.5566406,32.4326172 C30.5891929,32.5628262 30.6542964,32.7744126 30.7519531,33.0673828 C31.2565129,34.7112712 31.5738926,36.1191348 31.7041016,37.2910156 C31.7692061,36.6562468 31.8912751,35.9523151 32.0703125,35.1791992 C32.2493499,34.4060834 32.493488,33.4742893 32.8027344,32.3837891 L38.2470703,14 L47.9150391,14 L53.4082031,49.7421875 Z",id:"M"}]],rr=["svg",{viewBox:"0 0 16 16"},["path",{d:"M14.0609 4.65755C13.435 3.58505 12.5859 2.73595 11.5135 2.11005C10.4409 1.48413 9.26999 1.17125 7.99989 1.17125C6.72994 1.17125 5.55864 1.48423 4.4863 2.11005C3.4138 2.73591 2.56476 3.58505 1.9388 4.65755C1.31295 5.73002 1 6.90116 1 8.17095C1 9.69625 1.44501 11.0678 2.33526 12.2861C3.22542 13.5044 4.37536 14.3474 5.78501 14.8153C5.94909 14.8457 6.07056 14.8243 6.14954 14.7516C6.22855 14.6787 6.26801 14.5875 6.26801 14.4782C6.26801 14.46 6.26644 14.296 6.26341 13.9861C6.26028 13.6761 6.25881 13.4057 6.25881 13.175L6.04917 13.2113C5.91551 13.2358 5.74689 13.2461 5.54331 13.2432C5.33983 13.2404 5.1286 13.219 4.90989 13.1794C4.69109 13.1401 4.48757 13.0489 4.29919 12.9062C4.11091 12.7634 3.97725 12.5764 3.89823 12.3457L3.80709 12.136C3.74634 11.9963 3.6507 11.8412 3.52004 11.6712C3.38937 11.501 3.25724 11.3856 3.12358 11.3249L3.05977 11.2792C3.01724 11.2488 2.97779 11.2122 2.9413 11.1697C2.90484 11.1273 2.87755 11.0847 2.85932 11.0421C2.84106 10.9995 2.85619 10.9646 2.90487 10.9371C2.95356 10.9097 3.04154 10.8964 3.1692 10.8964L3.35142 10.9236C3.47295 10.948 3.62328 11.0208 3.80259 11.1424C3.98181 11.2639 4.12914 11.4218 4.2446 11.6162C4.38443 11.8654 4.55289 12.0552 4.75046 12.1859C4.94788 12.3166 5.14692 12.3818 5.3474 12.3818C5.54788 12.3818 5.72103 12.3666 5.86692 12.3364C6.01265 12.306 6.14938 12.2603 6.27704 12.1996C6.33173 11.7923 6.48062 11.4794 6.72359 11.2607C6.37728 11.2243 6.06593 11.1695 5.78938 11.0966C5.51299 11.0236 5.22737 10.9052 4.93271 10.741C4.6379 10.577 4.39334 10.3733 4.19895 10.1304C4.00454 9.88734 3.84499 9.56824 3.72052 9.17337C3.59598 8.77835 3.5337 8.32268 3.5337 7.80622C3.5337 7.07086 3.77377 6.4451 4.2538 5.92858C4.02893 5.37573 4.05016 4.75597 4.31755 4.06936C4.49377 4.01461 4.75509 4.05569 5.1014 4.19236C5.44777 4.32909 5.70137 4.44621 5.86245 4.54332C6.02354 4.6404 6.15261 4.72267 6.24984 4.78939C6.81505 4.63147 7.39832 4.55249 7.99982 4.55249C8.60133 4.55249 9.18473 4.63147 9.74996 4.78939L10.0963 4.57075C10.3331 4.42486 10.6128 4.29116 10.9347 4.16963C11.2567 4.04816 11.503 4.0147 11.6732 4.06945C11.9465 4.75609 11.9709 5.37582 11.7459 5.92867C12.2259 6.4452 12.4661 7.07112 12.4661 7.80632C12.4661 8.32277 12.4036 8.77989 12.2793 9.17794C12.1548 9.57606 11.9938 9.89485 11.7964 10.135C11.5988 10.3751 11.3526 10.5771 11.058 10.7411C10.7633 10.9052 10.4776 11.0236 10.2012 11.0966C9.92465 11.1695 9.6133 11.2244 9.26699 11.2608C9.58284 11.5342 9.7408 11.9656 9.7408 12.555V14.478C9.7408 14.5872 9.77879 14.6784 9.85483 14.7513C9.93078 14.8241 10.0507 14.8455 10.2148 14.815C11.6246 14.3472 12.7746 13.5041 13.6647 12.2858C14.5547 11.0676 14.9999 9.69599 14.9999 8.17069C14.9996 6.90106 14.6865 5.73002 14.0609 4.65755Z"}]],lr=["svg",{viewBox:"0 0 300 60"},["path",{d:"M3.28,49.4 L3.28,20.88 L8.16,20.88 L8.16,49.4 L3.28,49.4 Z M4.52,14.32 L8.16,11.84 C10.16,14.12 12.88,17.24 14.12,19.32 L10.16,22.12 C9.08,20 6.52,16.68 4.52,14.32 Z M36.88,13.44 L36.88,44.04 C36.88,46.68 36.28,47.88 34.6,48.64 C32.96,49.4 30.4,49.48 26.68,49.44 C26.48,48.16 25.8,46.16 25.12,44.96 C27.44,45.08 30.2,45.08 30.96,45.04 C31.76,45.04 32.04,44.8 32.04,44 L32.04,18 L14.6,18 L14.6,13.44 L36.88,13.44 Z M48.44,12.24 L52.8,13.56 C51.96,16.04 50.96,18.64 49.84,21.12 L49.84,49.44 L45.32,49.44 L45.32,29.44 C44.52,30.64 43.68,31.8 42.8,32.8 C42.4,31.68 41.28,28.92 40.52,27.68 C43.72,23.92 46.68,18.08 48.44,12.24 Z M56.2,23.28 L56.2,28.84 C59.04,28.12 61.6,27.16 63.84,25.88 C62.72,24.88 61.72,23.84 60.88,22.8 C60.16,23.68 59.36,24.48 58.56,25.2 C58.04,24.68 57.08,23.92 56.2,23.28 Z M70.24,19.96 L63.2,19.96 C64.2,21.24 65.48,22.52 67.04,23.64 C68.32,22.56 69.36,21.36 70.24,19.96 Z M78.2,19.96 L75.2,19.96 C74.04,22.24 72.52,24.16 70.76,25.84 C73.24,27.04 76.16,28 79.48,28.52 C78.64,29.4 77.48,31.2 76.92,32.32 C73.24,31.52 70.04,30.16 67.4,28.52 C64.72,30.28 61.64,31.64 58.28,32.64 C57.92,31.92 57,30.68 56.2,29.76 L56.2,42.8 L52.08,42.8 L52.08,17.2 L56.2,17.2 L56.2,21.44 C58.8,19 60.96,15.6 62.2,12.12 L66.52,13.12 C66.12,14.12 65.68,15.16 65.2,16.12 L78.2,16.12 L78.2,19.96 Z M71.52,34.12 L74.92,35.52 C71.76,38.96 66.44,41.36 61,42.76 C60.48,41.88 59.52,40.56 58.68,39.8 C63.68,38.76 68.88,36.76 71.52,34.12 Z M67.6,30.48 L71.08,31.92 C68.6,34.44 64.64,36.32 60.92,37.52 C60.36,36.64 59.32,35.52 58.4,34.8 C61.8,33.92 65.64,32.28 67.6,30.48 Z M74.4,38.64 L78.48,40.28 C74.32,45.16 67.24,47.84 59.08,49.32 C58.56,48.16 57.6,46.6 56.68,45.56 C64.04,44.56 70.96,42.4 74.4,38.64 Z M89.12,33.12 L89.12,35.84 L94.48,35.84 L94.48,33.12 L89.12,33.12 Z M94.48,21 L89.12,21 L89.12,23.36 L94.48,23.36 L94.48,21 Z M89.12,27 L89.12,29.48 L94.48,29.48 L94.48,27 L89.12,27 Z M101.36,35.84 L101.36,40 L81.32,40 L81.32,35.84 L84.84,35.84 L84.84,21 L81.8,21 L81.8,16.84 L84.84,16.84 L84.84,12.56 L89.12,12.56 L89.12,16.84 L94.48,16.84 L94.48,12.56 L98.84,12.56 L98.84,16.84 L101.2,16.84 L101.2,21 L98.84,21 L98.84,35.84 L101.36,35.84 Z M86.32,40.28 L90.76,41.56 C89.44,44.44 87.12,47.44 85.08,49.32 C84.24,48.52 82.4,47.16 81.32,46.52 C83.28,45 85.24,42.56 86.32,40.28 Z M118.72,25.24 L118.72,29.64 L115.28,29.64 L115.28,49.44 L110.76,49.44 L110.76,29.64 L107.08,29.64 L107.08,30.96 C107.08,38.32 106.24,44.92 101.24,50.36 C100.48,49.32 99,48.04 97.92,47.28 C98.4,46.72 98.84,46.16 99.24,45.6 L95.4,47.48 C94.76,46.04 93.24,43.72 92.04,42.08 L95.84,40.32 C97.04,41.88 98.6,43.96 99.36,45.4 C102.28,41.04 102.72,36.04 102.72,30.96 L102.72,16.44 C107.12,15.32 111.96,13.64 114.84,11.92 L118.64,15.32 C115.32,16.96 111.12,18.36 107.08,19.36 L107.08,25.24 L118.72,25.24 Z M134.88,30.8 C134.88,28 137.2,25.68 140,25.68 C142.8,25.68 145.12,28 145.12,30.8 C145.12,33.6 142.8,35.92 140,35.92 C137.2,35.92 134.88,33.6 134.88,30.8 Z M161.4,46 L161.4,16.28 L166.72,16.28 L169.08,26.04 L169.92,30.68 L170.08,30.68 L170.96,26.04 L173.28,16.28 L178.6,16.28 L178.6,46 L174.04,46 L174.04,34.32 C174.04,31.32 174.8,25.04 175.08,22.08 L174.92,22.08 L173.16,29.72 L171.2,37.4 L168.68,37.4 L166.72,29.72 L164.92,22.08 L164.76,22.08 C165.04,25.04 165.88,31.32 165.88,34.32 L165.88,46 L161.4,46 Z M191.24,46.48 C185.8,46.48 181.48,42.2 181.48,34.76 C181.48,27.48 185.84,23.04 190.52,23.04 C195.76,23.04 198.44,27.48 198.44,33.72 C198.44,34.8 198.32,35.92 198.24,36.48 L187.24,36.48 C187.6,40.12 189.4,42 192,42 C193.36,42 194.44,41.6 195.64,40.88 L197.64,44.44 C195.84,45.76 193.56,46.48 191.24,46.48 Z M187.12,32.44 L193.48,32.44 C193.48,29.4 192.56,27.52 190.64,27.52 C188.92,27.52 187.4,29.2 187.12,32.44 Z M201.88,46 L201.88,23.52 L206.64,23.52 L207.04,26.24 L207.2,26.24 C208.56,24.48 210.44,23.04 213.04,23.04 C216.8,23.04 218.4,25.84 218.4,30.8 L218.4,46 L212.44,46 L212.44,31.32 C212.44,28.92 211.96,28 210.52,28 C209.48,28 208.6,28.84 207.8,30.36 L207.8,46 L201.88,46 Z M231.84,46.56 C226.24,46.56 221.84,42.2 221.84,34.76 C221.84,27.28 226.76,23 232.28,23 C234.84,23 236.64,23.92 238.12,25.36 L235.32,29.12 C234.44,28.16 233.68,27.72 232.64,27.72 C229.76,27.72 227.88,30.56 227.88,34.76 C227.88,39 229.88,41.76 232.48,41.76 C233.88,41.76 235.16,41.12 236.16,40.08 L238.48,43.92 C236.6,45.8 234.12,46.56 231.84,46.56 Z M248.8,46 L248.8,28.16 L242.32,28.16 L242.32,23.52 L254.76,23.52 L254.76,46 L248.8,46 Z M251.44,19.88 C249.36,19.88 247.88,18.56 247.88,16.64 C247.88,14.76 249.36,13.36 251.44,13.36 C253.48,13.36 254.96,14.76 254.96,16.64 C254.96,18.56 253.48,19.88 251.44,19.88 Z M266.76,46.48 C263,46.48 261.44,43.68 261.44,38.72 L261.44,23.52 L267.36,23.52 L267.36,38 C267.36,40.4 267.72,41.52 269.24,41.52 C270.28,41.52 271.08,40.68 271.84,39.16 L271.84,23.52 L277.8,23.52 L277.8,46 L273.04,46 L272.64,43.28 L272.48,43.28 C271.08,45.04 269.36,46.48 266.76,46.48 Z M289.6,46.56 C286.44,46.56 283.64,45.28 281.32,43.4 L284,39.72 C286.12,41.24 287.48,42.2 289.68,42.2 C291.76,42.2 292.68,41.16 292.68,39.8 C292.68,38.08 290.64,37.44 288.28,36.4 C285.64,35.28 282.44,33.6 282.44,29.8 C282.44,25.8 285.56,23 290.52,23 C293.88,23 295.88,24.28 297.8,25.72 L295.16,29.28 C293.48,28.12 292.44,27.36 290.64,27.36 C288.84,27.36 287.92,28.28 287.92,29.56 C287.92,31.2 289.84,31.68 292.24,32.68 C294.92,33.76 298.2,35.32 298.2,39.48 C298.2,43.4 295.16,46.56 289.6,46.56 Z",id:"门修斯・Mencius"}]];function ar(e){const t=e.ui.logo;return["div",t.container,["div",{...t.m},He(oo,"40px","40px")],["div",{...t.mxs},He(lr,"200px","40px")]]}var Z=(e=>(e.UPVOTE="upvote",e.DOWNVOTE="downvote",e.NOTIFICATION="notification",e))(Z||{}),io=(e=>(e.NEW="new",e.VIEWED="viewed",e))(io||{}),ro=(e=>(e.OPINION="OPINION",e))(ro||{}),h=(e=>(e[e.DONE=0]="DONE",e[e.INFO=1]="INFO",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR",e))(h||{});function cr(e){const t=e.ui.newsletterForm;return["div",t.root,["h1",t.title,"加入 Newsletter 获取项目最新进展"],["form",{...t.form,action:"https://tinyletter.com/nopro-studio",method:"post",target:"popupwindow"},["div",t.container,["input",{...t.input,type:"email",placeholder:"email address",name:"email",id:"tlemail"}],["input",{...t.button,type:"submit",value:"SUBSCRIBE"}]]]]}function dr(e,t,n,s,o){const i=e.ui.characterCard;return["div",{class:i.container.class+" "+t},["div",{class:"flex flex-grow"},["div",i.icon,o],["div",i.body,["h2",i.content.keyword,n],["p",i.content.description,s]]]]}function ur(){if(!window.location.search)return;const e=new URL(window.location.toString()),t=new URLSearchParams(e.search);t.delete("code"),e.search=t.toString(),window.history.pushState({},"",e.toString())}const An=e=>typeof e=="string"?e:e+"px",ne=(e,t,n=t,s)=>[e[0],Object.assign(Object.assign(Object.assign({},e[1]),{width:An(t),height:An(n)}),s),...e.slice(2)],L=(...e)=>["svg",{viewBox:"0 0 32 32"},...e],fr=L(["path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z"}]),hr=L(["path",{d:"M10 16L20 6l1.4 1.4-8.6 8.6 8.6 8.6L20 26z"}]),pr=L(["path",{d:"M22 16L12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"}]),gr=L(["path",{d:"M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z"}]),mr=L(["path",{d:"M31 16l-7 7-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7zM1 16l7-7 1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7zM12.419 25.484L17.639 6l1.932.518L14.35 26z"}]),_r=L(["path",{d:"M12 12h2v12h-2zM18 12h2v12h-2z"}],["path",{d:"M4 6v2h2v20a2 2 0 002 2h16a2 2 0 002-2V8h2V6zm4 22V8h16v20zM12 2h8v2h-8z"}]),lo=L(["path",{d:"M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}]),Er=L(["path",{d:"M28 6H8c-1.2 0-2 .8-2 2v14c0 1.2.8 2 2 2h8v-2H8V8h20v14h-7.2L16 28.8l1.6 1.2 4.2-6H28c1.2 0 2-.8 2-2V8c0-1.2-.8-2-2-2z"}],["path",{d:"M4 18H2V5c0-1.7 1.3-3 3-3h13v2H5c-.6 0-1 .4-1 1v13z"}]),yr=L(["path",{d:"M29.88 15.52l-6-11A1 1 0 0023 4H9a1 1 0 00-.88.52l-6 11a1 1 0 000 1l6 11A1 1 0 009 28h14a1 1 0 00.88-.52l6-11a1 1 0 000-.96zM22.93 7l4.39 8h-9.5zM16 14.14L10.82 6h10.36zM9.07 7l5.11 8h-9.5zM4.68 17h9.5l-5.11 8zm11.32.86L21.18 26H10.82zM22.93 25l-5.11-8h9.5z"}]),vr=L(["path",{d:"M4 24h24v2H4zM4 12h24v2H4zM4 18h24v2H4zM4 6h24v2H4z"}]),br=L(["path",{d:"M28.7 20.3L26 17.6V13a10.07 10.07 0 00-9-10V1h-2v2a10.15 10.15 0 00-9 10v4.6l-2.7 2.7a.91.91 0 00-.3.7v3a.94.94 0 001 1h7a5 5 0 0010 0h7a.94.94 0 001-1v-3a.91.91 0 00-.3-.7zM16 28a3 3 0 01-3-3h6a3 3 0 01-3 3zm11-5H5v-1.6l2.7-2.7A.91.91 0 008 18v-5a8 8 0 0116 0v5a.91.91 0 00.3.7l2.7 2.7z"}]),wr=L(["path",{d:"M30 28.59L22.45 21A11 11 0 1021 22.45L28.59 30zM5 14a9 9 0 119 9 9 9 0 01-9-9z"}]),Cr=L(["path",{d:"M12.1 2a9.8 9.8 0 00-5.4 1.6l6.4 6.4a2.1 2.1 0 01.2 3 2.1 2.1 0 01-3-.2L3.7 6.4A9.84 9.84 0 002 12.1a10.14 10.14 0 0010.1 10.1 10.9 10.9 0 002.6-.3l6.7 6.7a5 5 0 007.1-7.1l-6.7-6.7a10.9 10.9 0 00.3-2.6A10 10 0 0012.1 2zm8 10.1a7.61 7.61 0 01-.3 2.1l-.3 1.1.8.8 6.7 6.7a2.88 2.88 0 01.9 2.1A2.72 2.72 0 0127 27a2.9 2.9 0 01-4.2 0l-6.7-6.7-.8-.8-1.1.3a7.61 7.61 0 01-2.1.3 8.27 8.27 0 01-5.7-2.3A7.63 7.63 0 014 12.1a8.33 8.33 0 01.3-2.2l4.4 4.4a4.14 4.14 0 005.9.2 4.14 4.14 0 00-.2-5.9L10 4.2a6.45 6.45 0 012-.3 8.27 8.27 0 015.7 2.3 8.49 8.49 0 012.4 5.9z"}]),Tr=L(["path",{d:"M16 4a5 5 0 11-5 5 5 5 0 015-5m0-2a7 7 0 107 7 7 7 0 00-7-7zM26 30h-2v-5a5 5 0 00-5-5h-6a5 5 0 00-5 5v5H6v-5a7 7 0 017-7h6a7 7 0 017 7z"}]),xr=L(["path",{d:"M5.24 22.51l1.43-1.42A14.06 14.06 0 013.07 16C5.1 10.93 10.7 7 16 7a12.38 12.38 0 014 .72l1.55-1.56A14.72 14.72 0 0016 5 16.69 16.69 0 001.06 15.66a1 1 0 000 .68 16 16 0 004.18 6.17z"}],["path",{d:"M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66a16.4 16.4 0 00-5.74-7.44L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27a16.69 16.69 0 0014.94-10.66 1 1 0 000-.68zM20 16a4 4 0 01-6 3.44L19.44 14a4 4 0 01.56 2zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"}]),Or=L(["path",{d:"M30.94 15.66A16.69 16.69 0 0016 5 16.69 16.69 0 001.06 15.66a1 1 0 000 .68A16.69 16.69 0 0016 27a16.69 16.69 0 0014.94-10.66 1 1 0 000-.68zM16 25c-5.3 0-10.9-3.93-12.93-9C5.1 10.93 10.7 7 16 7s10.9 3.93 12.93 9C26.9 21.07 21.3 25 16 25z"}],["path",{d:"M16 10a6 6 0 106 6 6 6 0 00-6-6zm0 10a4 4 0 114-4 4 4 0 01-4 4z"}]),Lr=L(["path",{d:"M16 2a14 14 0 1014 14A14 14 0 0016 2zm0 26a12 12 0 1112-12 12 12 0 01-12 12z"}],["path",{d:"M15 8h2v11h-2zM16 22a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 22z"}]);function Ir(e){return ur(),["div",["div",{class:"flex flex-col flex-grow justify-center p-6 md:p-12"},["div",{class:"flex items-center"}],["div",{class:"text-sm text-gray-600 leading-relaxed"},["「门修斯」是安东尼·吉登斯（Anthony Giddens）社会学代表作之⼀《⺠族-国家与暴⼒》（The Nation-State and Violence, 1985）某中译本⾥对“孟⼦”英译“Mencius”的回译，因错得极富戏剧性⽽⼴为⼈知，后来便成为了⼀个典故式词汇，专⽤来指代⼈名地名作品名等专有名词的错译。","笑笑容易，避免错译却并没有想象中的简单。要做到正确⽆误的翻译，译者除了需要拥有良好的外语及⺟语⽔平之外，也必须对所译作品涉及的领域有着相当程度的熟悉，但在资讯的诞⽣不断加速化、资讯的整合愈发跨⽂化跨领域的今天，想达到这⼀点的⻔槛是越来越⾼。仅凭官⽅发布的专有名词翻译规范⼿册，早已⽆法应对每秒都在不断诞⽣着的层出不穷的各语种专有词汇，⽽⽹络上的各种百科，也⼤多仅仅将重点放在词条对象的属性和相关资讯上，并没有为词条本身的译法留下显⽽易⻅的讨论和修正的空间。在这样的⼀个情况下，专有名词的翻译对于译者、作者的⼯作以及读者的理解和交流来说都造成了不⼩的问题，也导致了不少错译和误读⻓期难以得到修正。","为解决这个问题，我们发起了开源项⽬「⻔修斯⽹」。在这个平台上，⼤家不但可以依据各⾃掌握的客观论据，为各专有名词提出⾃⼰的译法，也可以对他⼈提出的译法给出意⻅和建议。⽽⼤家对某词条提出的各种不同译法，会通过⽤户投票的⽅式排列次序并决定出动态的最优解。⽽后随着⾃定义列表甚⾄是细化到某作品某章节词汇汇总等功能的最终完善，相信本平台不但会对专业译者的⼯作有所帮助，对于编辑、作者等⽂字类⼯作者或读者，甚⾄是外语学习者⽽⾔，也会是⼀个⾮常有参考价值的辅助⼯具。","⽬前，因⼈⼒及⽹站定位所限，本平台涵盖的词条仅涉及⼈名和书影⾳游戏绘画装置概念等各类作品名，未来是否会对涵盖范围进⾏扩充，还将视具体情况⽽定。","同时，本⽹站为⾮盈利性开源⽹站，我们相信众⼈的智慧能够孕育出最令⼈意想不到的美好成果，所以在第⼀阶段仅仅完成了⽹站最基本层⾯功能的架构，更进⼀步的优化以及更多功能的增添和完善，还期待着未来⼤家能够共同探讨携⼿完成。","在这样⼀个全球性反智的⼤⽓候下，就让我们⼀起来做⼀些开放性的、具有⻓远意义的实事，也算是抵抗⼀下荒谬时代的滚滚⻋轮，或是个⼈微不⾜道的焦虑和抑郁吧。"].map(t=>["p",{class:"mb-4"},t])],cr],["div",{class:"bg-gray-100 border-t-2"},["div",{class:"flex flex-wrap"},[["sm:border-r sm:border-b","开放的数据","所有的词条以及相关翻译都以开源的形式保存于 GitHub",mr],["border-t-2 sm:border-t-0 sm:border-l sm:border-b","便利的工具","应对每时每刻不断诞⽣着的层出不穷的各语种专有词汇",Cr],["border-t-2 sm:border-r sm:border-t","互助的社群","通过⽤户投票的⽅式排列次序并决定出动态的最优翻译",Er],["border-t-2 sm:border-l sm:border-t","大家的探索","相信众⼈的智慧能够孕育出最令⼈意想不到的美好成果",yr]].map(t=>[dr,...t])]]]}function St(e,t,n,s){return["a",{...t,href:n,target:"_blank"},s]}function Nr(e){return["div",{class:"flex flex-col p-6 md:p-12"},["p",e.ui.newsletterForm.title,"Get in touch!"],["p",[["mailto:townb.production@gmail.com","Email"],["https://github.com/noprostudio","GitHub"]].map(t=>[St,e.ui.contact.link,...t])]]}function se(e){const[t,n]=e.views.status.deref();return["p",e.ui.status[t],n]}function Sn(e,t){const n=e.views,s=decodeURI(n.route.deref().params.id),o=+n.route.deref().params.page,i=n.search.deref();return["div",{...t},["div",[E,[pe,{id:s,page:o-1}],o>1?{class:"block m-1"}:{class:"block m-1 disabled:opacity-50",disabled:!0},["div",{class:"flex flex-row items-center text-justify"},["div",{class:"w-2 object-fill object-center items-baseline m-2 fill-current"},hr],"Prev"]]],["div",{class:"pl-2"},[E,[pe,{id:s,page:o+1}],o<Math.ceil(i.total_count/30)?{class:"block m-1"}:{class:"block m-1 disabled:opacity-50",disabled:!0},["div",{class:"flex flex-row items-center text-justify"},"Next",["div",{class:"w-2 object-fill object-center items-baseline m-2 fill-current"},pr]]]]]}function Ar(e){const t=e.views,n=e.bus,s=decodeURI(e.views.route.deref().params.id),o=decodeURI(e.views.route.deref().params.page);return n.dispatch([pt,{id:s,page:o}]),()=>{const i=decodeURI(e.views.route.deref().params.id),r=+e.views.route.deref().params.page,l=t.search.deref(),a=t.user.deref();return["div",se,a.login?["div",{class:"p-6"},["h2",e.ui.newsletterForm.title,"Search results for ",["span",{class:"font-bold"},i]],["hr"],l.entries?["div",{class:"flex flex-col text-gray-600 font-light"},["div",{class:"flex flex-row justify-between my-2 align-middle items-center"},["span","Showing ",l.total_count>30?["span",["span",{class:"text-black font-normal"},`${(r-1)*30+1}-${Math.min(r*30,l.total_count)} `],"of "]:["span","all "],["span",{class:"text-black font-normal"},l.total_count+" "],"entries"],l.total_count>30?Sn(e,{class:"flex flex-row"}):[]],["div",{class:"flex flex-wrap"},l.entries.map(c=>["div",[E,[te,c],{class:"block m-1"},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},c]]])],l.total_count>30?Sn(e,{class:"flex flex-row px-4 justify-center my-4"}):[]]:["div",{class:"md:text-4xl text-xl m-auto p-6"},"no available results"]]:["div",{class:"flex flex-col p-6 md:p-12"},["p",e.ui.newsletterForm.title,"Please sign in before searching any entries..."]]]}}const Ze=e=>Be(e,"xform")?e.xform():e;class ze{constructor(t){this.value=t}deref(){return this.value}}const Q=e=>e instanceof ze,kn=e=>e instanceof ze?e:new ze(e),ge=e=>e instanceof ze?e.deref():e,Sr=e=>e.length===2?[void 0,e[1]]:e.length===3?[e[1],e[2]]:me(e.length);function yt(...e){const t=e[0],n=t[0],s=t[1],o=t[2];e=Sr(e);const i=e[0]==null?n():e[0],r=e[1];return ge(s(Be(r,"$reduce")?r.$reduce(o,i):jo(r)?kr(o,i,r):Rr(o,i,r)))}const kr=(e,t,n)=>{for(let s=0,o=n.length;s<o;s++)if(t=e(t,n[s]),Q(t)){t=t.deref();break}return t},Rr=(e,t,n)=>{for(let s of n)if(t=e(t,s),Q(t)){t=t.deref();break}return t},ao=(e,t)=>[e,n=>n,t],Ur=(e,t)=>{const n=t.length-1;return Ot(t[n])?t.length>1?yt(e.apply(null,t.slice(0,n)),t[n]):yt(e(),t[0]):void 0};function Dr(e){return e?[...e]:ao(()=>[],(t,n)=>(t.push(n),t))}function*co(e,t){const n=Ze(e)(Dr()),s=n[1],o=n[2];for(let i of t){const r=o([],i);if(Q(r)){yield*ge(s(r.deref()));return}r.length&&(yield*r)}yield*ge(s([]))}function*uo(e,t){const n=Ze(e)([at,at,(s,o)=>o])[2];for(let s of t){let o=n(ue,s);if(Q(o)){o=ge(o.deref()),o!==ue&&(yield o);return}o!==ue&&(yield o)}}const fo=(e,t)=>[e[0],e[1],t];function kt(e,t){return Ot(t)?uo(kt(e),t):n=>{const s=n[2];return fo(n,(o,i)=>s(o,e(i)))}}function ho(...e){return Pr(ho,yt,e)}const Pr=(e,t,n)=>{let s,o;switch(n.length){case 4:o=n[3],s=n[2];break;case 3:o=n[2];break;case 2:return kt(i=>e(n[0],n[1],i));default:me(n.length)}return t(Ze(n[0])(n[1]),s,o)},Fr=(e,t,n,s)=>{const o=Ur(e,s);if(o!==void 0)return o;const i=s[0]||n;return ao(()=>i,t)};function po(...e){return Fr(po,(t,n)=>t+n,0,e)}function go(...e){let[t,n,s,o,i,r,l,a,c,d]=e;switch(e.length){case 0:me(0);case 1:return t;case 2:return(...f)=>t(n(...f));case 3:return(...f)=>t(n(s(...f)));case 4:return(...f)=>t(n(s(o(...f))));case 5:return(...f)=>t(n(s(o(i(...f)))));case 6:return(...f)=>t(n(s(o(i(r(...f))))));case 7:return(...f)=>t(n(s(o(i(r(l(...f)))))));case 8:return(...f)=>t(n(s(o(i(r(l(a(...f))))))));case 9:return(...f)=>t(n(s(o(i(r(l(a(c(...f)))))))));case 10:default:const p=(...f)=>t(n(s(o(i(r(l(a(c(d(...f))))))))));return e.length===10?p:go(p,...e.slice(10))}}function Rt(e,t){return Ot(t)?uo(Rt(e),t):n=>{const s=n[2];return fo(n,(o,i)=>e(i)?s(o,i):o)}}const mo=e=>e[e.length-1];function _o(...e){return e=e.map(Ze),go.apply(null,e)}var y;(function(e){e[e.PARTIAL=0]="PARTIAL",e[e.FULL=1]="FULL",e[e.FULL_NC=2]="FULL_NC",e[e.FAIL=-1]="FAIL"})(y||(y={}));const Y=Object.freeze({type:y.PARTIAL});Object.freeze({type:y.FAIL});const O=(e,t=y.FULL)=>({type:t,body:e}),M=(e,t,n,s)=>()=>{const o=e.map(l=>l()),i=[];let r=o.length;return(l,a)=>{for(let c=o.length,d,p;--c>=0;)if(d=o[c]){if(p=d(l,a),p.type>=y.FULL)return n?O(n(l,p.body,i),p.type):p;p.type===y.FAIL&&(o[c]=null,r--)}return(t||s)&&i.push(a),r?Y:t?O(t(l,i)):O(s,y.FAIL)}},Mr=(e,t,n)=>()=>(s,o)=>e[o]?O(t&&t(s,o)):O(n,y.FAIL);function Eo(e,t,n="start",s,o){return o?co(Eo(e,t,n),o):([i,r,l])=>{let a=n,c=e[n]?e[n]():Ve(`invalid initial state: ${n}`);return[i,r,(d,p)=>{for(;;){const{type:f,body:m}=c(t,p),v=m&&m[1];if(f>=y.FULL){const b=m&&e[m[0]];if(b?(a=m[0],c=b()):_s(`unknown tx: ${a} -> ${m&&m[0]}`),v&&(d=Rn(l,d,v),Q(v)&&(d=kn(d))),f===y.FULL_NC&&!Q(d))continue}else if(f===y.FAIL)return v&&(d=Rn(l,d,v)),kn(d);break}return d}]}}const Rn=(e,t,n)=>{for(let s of ge(n))if(t=e(t,s),Q(t))break;return t},$r=(e,t,n)=>()=>{let s=e();return(o,i)=>{const{type:r}=s(o,i);return r===y.FAIL?O(t):r!==y.PARTIAL?O(n,y.FAIL):Y}};function*D(e,t){let n=typeof e=="string"?e.charCodeAt(0):e;const s=typeof t=="string"?t.charCodeAt(0):t;if(n<=s)for(;n<=s;n++)yield String.fromCharCode(n);else for(;n>=s;n--)yield String.fromCharCode(n)}const _e=(...e)=>{const t={};for(let n of e)for(let s of n)t[s]=!0;return Object.freeze(t)},Gr=Object.freeze({"	":!0,"\n":!0,"\v":!0,"\f":!0,"\r":!0," ":!0}),Hr=_e(D("0","9"));_e(D("0","9"),D("A","F"),D("a","f"));const zr=_e(D("a","z")),jr=_e(D("A","Z")),Vr=Object.freeze(Object.assign(Object.assign({},jr),zr));Object.freeze(Object.assign(Object.assign(Object.assign({},Vr),Hr),{_:!0}));_e(D("!","/"),D(":","@"),D("[","`"),D("{","~"));const Br=(e,t)=>Mr(Gr,e,t),Un=(e,t,n,s,o)=>()=>{let i=e(),r=0;const l=[];return(a,c)=>{l.push(c);const d=i(a,c);return d.type===y.FULL?(r++,r===n?O(s&&s(a,l)):(i=e(),Y)):d.type===y.FAIL?r>=t?(l.pop(),O(s&&s(a,l),y.FULL_NC)):O(o,y.FAIL):d}},vt=(e,t,n)=>()=>{let s=0,o=e[s]();const i=e.length-1,r=[];return(l,a)=>{if(s>i)return O(n,y.FAIL);for(t&&r.push(a);s<=i;){const{type:c}=o(l,a);if(c>=y.FULL){if(s===i)return O(t&&t(l,r));if(o=e[++s](),c===y.FULL_NC)continue}return c===y.FAIL?O(n,y.FAIL):Y}return O(n,y.FAIL)}},_=(e,t,n,s=!1)=>s?()=>{let o="";return(i,r)=>(o+=r)===e?O(t&&t(i,o)):e.indexOf(o)===0?Y:O(n,y.FAIL)}:()=>{let o=0,i=0;return(r,l)=>(e.charAt(i++)===l&&o++,o===e.length?O(t&&t(r,e)):o===i?Y:O(n,y.FAIL))},W=(e,t)=>()=>{let n="";return(s,o)=>(n+=o,n.endsWith(e)?O(t&&t(s,n.substr(0,n.length-e.length))):Y)};var Dn;(function(e){e[e.BLOCKQUOTE=0]="BLOCKQUOTE",e[e.CODE=1]="CODE",e[e.CODEBLOCK=2]="CODEBLOCK",e[e.EMPHASIS=3]="EMPHASIS",e[e.END_BLOCKQUOTE=4]="END_BLOCKQUOTE",e[e.END_LI=5]="END_LI",e[e.END_PARA=6]="END_PARA",e[e.END_HEADING=7]="END_HEADING",e[e.END_TABLE=8]="END_TABLE",e[e.HEADING=9]="HEADING",e[e.IMG=10]="IMG",e[e.LINK=11]="LINK",e[e.LI=12]="LI",e[e.PARA=13]="PARA",e[e.START=14]="START",e[e.START_CODEBLOCK=15]="START_CODEBLOCK",e[e.STRIKE=16]="STRIKE",e[e.STRONG=17]="STRONG",e[e.TABLE=18]="TABLE"})(Dn||(Dn={}));const Wr={blockquote:e=>["blockquote",{},...e],code:e=>["code",{},e],codeblock:(e,t)=>["pre",{lang:e},t],em:e=>["em",{},e],heading:(e,t)=>[e<7?`h${e}`:"p",{},...t],hr:()=>["hr",{}],img:(e,t)=>["img",{src:e,alt:t}],li:e=>["li",{},...e],link:(e,t)=>["a",{href:e},t],list:(e,t)=>[e,{},...t],paragraph:e=>["p",{},...e],strong:e=>["strong",{},e],strike:e=>["del",{},e],table:e=>["table",{},["tbody",{},...e]],td:(e,t)=>["td",{},...t],tr:(e,t)=>["tr",{},...t]},Pn=">",Se="`",Kr="```",qr="\n```\n",bt="_",Zr="#",Qr="-",Yr="![",Fn="- ",yo="[",Jr="]",Xr="(",el=")",$=`
`,wt="~~",Ct="**",ot="|",z=(e,t)=>(e.children=[],e.body="",[t]),J=(e,t)=>n=>(n.stack.push({id:e,children:n.children.concat(n.body)}),z(n,t)),vo=e=>(t,n)=>{const{id:s,children:o}=t.stack.pop();return o.push(e(t,n)),t.children=o,t.body="",[s]},Ut=e=>(e.children.push(e.body),e.children),ee=e=>(t,n)=>(t.body+=n.join(""),[e]),tl=e=>t=>[14,[e(t.hd,Ut(t))]],Mn=e=>t=>[14,[e(Ut(t))]],nl=e=>(e.children.push(e.body,["br",{}]),e.body="",[0]),sl=e=>(t,n)=>[14,[e(t.lang,n)]],bo=(e,t)=>e.container.push(t(Ut(e))),ol=(e,t,n)=>s=>(bo(s,n),[14,[t(e,s.container)]]),il=e=>t=>(t.children.push(t.body),t.container.push(e(mo(t.stack).container.length,t.children)),z(t,18)),rl=e=>t=>{const n=mo(t.stack).container;return n.push(e(n.length,t.container)),t.container=[],z(t,8)},ll=e=>t=>{const n=t.stack.pop().container;return n.splice(1,1),[14,[e(n)]]},Te=e=>vo((t,n)=>e(t.body+n.trim())),al=(e,t)=>(e.hd=t.length,z(e,9)),de=e=>[_("![",J(e,10)),_(yo,J(e,11)),_(wt,J(e,16)),_(Ct,J(e,17)),_(bt,J(e,3)),_(Se,J(e,1))],$n=e=>vt([W(Jr,(t,n)=>(t.title=n,void 0)),_(Xr),W(el,(t,n)=>(t.href=n,void 0))],vo(t=>e(t.href,t.title))),xe=(e,t)=>M([...de(e),_($,n=>(n.body+=" ",[t]))],ee(e)),cl=(e,t)=>(e.body=t.join(""),e.children=[],[13]),le=e=>t=>(t.stack.push({id:13,children:[]}),z(t,e)),dl=(e,t)=>(e.body=t[1],e.stack.push({id:13,children:[]}),[1]),ul=e=>(e.container=[],z(e,12)),fl=e=>(e.stack.push({id:18,container:[]}),e.container=[],z(e,18)),hl=e=>{const t=Object.assign(Object.assign({},Wr),e);return _o(Rt(n=>n!=="\r"),Eo({14:M([Br(()=>[14]),Un(_(Zr),1,1/0,al),_(Pn,n=>z(n,0)),_(Fn,ul),M([vt([_(Se),$r(_(Se))],dl),_(Kr,()=>[15])],void 0,(n,s)=>s),vt([Un(_(Qr),3,1/0),_($)],()=>[14,[t.hr()]]),_(Yr,le(10)),_(yo,le(11)),_(Ct,le(17)),_(wt,le(16)),_(bt,le(3)),_(ot,fl)],cl),13:xe(13,6),6:M([...de(13),_($,Mn(t.paragraph))],ee(13)),0:xe(0,4),4:M([...de(0),_(Pn,nl),_($,Mn(t.blockquote))],ee(0)),9:xe(9,7),7:M([...de(9),_($,tl(t.heading))],ee(9)),15:W($,(n,s)=>(n.lang=s,[2])),2:W(qr,sl(t.codeblock)),12:xe(12,5),5:M([_($,ol("ul",t.list,t.li)),_(Fn,n=>(bo(n,t.li),z(n,12)))],ee(12)),11:$n(t.link),10:$n(t.img),17:W(Ct,Te(t.strong)),16:W(wt,Te(t.strike)),3:W(bt,Te(t.em)),1:W(Se,Te(t.code)),18:M([...de(18),_(ot,il(t.td)),_($,rl(t.tr))],ee(18)),8:M([_($,ll(t.table)),_(ot,()=>[18])])},{stack:[]},14))},pl={li:e=>["li.list-disc.ml-4",...e],blockquote:e=>["blockquote.text-purple-600.ml-6.pl-4.border-l-4.border-purple-900",...e],code:e=>["code.bg-gray-200",e],codeblock:(e,t)=>["pre.whitespace-pre-line.text-xs.bg-purple-100.p-2",{lang:e||"code"},["code",t]],link:(e,t)=>["a.font-bold.text-purple-900.hover:bg-purple-900.hover:text-white.transition.duration-300.ease-in-out",{href:e,target:"_blank"},t],strike:e=>["del.line-through.bg-red-200",e],table:e=>["table.table-auto",["tbody",...e]],tr:(e,t)=>[e%2===0?"tr":"tr.bg-gray-100",...t],td:(e,t)=>[e<1?"th.px-4.py-2":"td.border.px-4.py-2",...t]};function wo(e){return[...co(hl(pl),e+`

`)]}const Co=(e,t,n)=>e.filter(s=>s.opinion_github_handle===t.github_handle&&s.type===n).length,Gn=(e,t)=>Co(e,t,Z.UPVOTE),Hn=(e,t)=>Co(e,t,Z.DOWNVOTE),To=(e,t,n,s)=>t.filter(o=>o.opinion_github_handle===n.github_handle&&o.type===s&&o.github_handle===e.login),zn=(e,t,n)=>To(e,t,n,Z.UPVOTE),jn=(e,t,n)=>To(e,t,n,Z.DOWNVOTE);function Vn(e,t,n,s,o,i,r){const l=e.views.voteLock.deref();return[E,[eo,{id:t,data:{entry_id:t,opinion_github_handle:s.github_handle,github_handle:n.login,type:o}}],{class:"block transition ease-in-out duration-700 focus:outline-none disabled:opacity-50",disabled:l},["div",{...i},r]]}function Bn(e,t,n,s,o){const i=e.views.voteLock.deref();return[E,[to,{id:t.entry_id,data:t,voteID:t.id}],{class:"block transition ease-in-out duration-700 focus:outline-none disabled:opacity-50",disabled:i},["div",{...s},o]]}function gl(e,t){const n=e.views,s=decodeURI(e.views.route.deref().params.id),o=n.user.deref(),i=e.views.votes.deref()[s];return["div",i!=null?["div",{class:"flex flex-row items-center mt-4 space-x-2"},zn(o,i,t).length>0?[Bn,zn(o,i,t)[0],t,{class:"hover:bg-transparent bg-purple-300 hover:text-purple-700 text-white font-semibold py-2 px-4 border hover:border-purple-500 border-transparent rounded"},"👍 "+Gn(i,t)]:[Vn,s,o,t,Z.UPVOTE,{class:"bg-transparent hover:bg-purple-300 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded"},"👍 "+Gn(i,t)],jn(o,i,t).length>0?[Bn,jn(o,i,t)[0],t,{class:"hover:bg-transparent bg-purple-300 hover:text-purple-700 text-white font-semibold py-2 px-4 border hover:border-purple-500 border-transparent rounded"},"👎 "+Hn(i,t)]:[Vn,s,o,t,Z.DOWNVOTE,{class:"bg-transparent hover:bg-purple-300 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded focus:outline-none"},"👎 "+Hn(i,t)]]:[]]}const ml=([e,t,n],s)=>["option",{value:e,disabled:!!n,selected:e===s},t],xo=(e,t,n,s)=>["select",t,...n.map(o=>ml(o,s))];function _l(e,t,n){return["div",{class:"fixed inset-0 flex items-center justify-center z-30"},["div",{class:"fixed flex flex-col items-center justify-between mt-2 pt-2 lg:w-1/3 md:w-1/2 w-3/4 bg-white rounded-lg shadow-xl z-40"},t],n]}function Oo(e,t,n){return[_l,t,n]}function El(e,t){const n=e.views,s=decodeURI(e.views.route.deref().params.id),o=n.user.deref();return[Oo,[["div",{class:"block font-medium text-gray-800 text-lg p-4 border-b border-b-2 w-full"},["div",{class:"mb-2"},"Delete opinion"],["div",{class:"text-sm text-gray-500"},"Are you sure you want to delete your opinion? This action cannot be undone."]],["div",{class:"flex flex-row self-end m-2"},[E,[Me],{class:"block px-4 py-2 text-black text-left font-medium"},"CANCEL"],[E,[zs,{id:s,data:t,userName:o.login}],{class:"block px-4 py-2 text-white text-left bg-red-600 rounded-lg font-medium hover:bg-red-500 transition ease-in-out duration-150"},"DELETE"]]],[E,[Me],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default bg-black bg-opacity-50 z-20"}]]}function yl(e){const t=e.bus,n=e.views.report.deref();return[Oo,[["div",{class:"block font-medium text-gray-800 text-lg p-4 border-b border-b-2 w-full"},["div",{class:"mb-2"},"Report opinion"],[xo,{class:"shadow-inner appearance-none border rounded w-full py-2 px-3 bg-gray-200 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:bg-white",onchange:s=>t.dispatch([ce,{key:"reason",value:s.target.value}])},vl,n.reason]],["div",{class:"flex flex-row self-end m-2"},[E,[$e],{class:"block px-4 py-2 text-black text-left font-medium"},"CANCEL"],[E,[Fs,{data:n}],{class:"block px-4 py-2 text-black text-left font-medium disabled:opacity-50 transition ease-in-out duration-300",disabled:!n.reason},"REPORT"]]],[E,[$e],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default bg-black bg-opacity-50"}]]}const vl=[["","Select reason..."],["Unwanted commercial content or spam","Unwanted commercial content or spam"],["Pornography or sexually explicit material","Pornography or sexually explicit material"],["Child abuse","Child abuse"],["Hate speech or graphic violence","Hate speech or graphic violence"],["Harassment or bullying","Harassment or bullying"]];function bl(e,t){const n=e.views,s=decodeURI(e.views.route.deref().params.id),o=n.user.deref(),i=e.views.deleteOpinionOpen.deref(),r=e.views.reportOpen.deref();return["div",{class:"flex flex-col px-4 md:px-12 py-10 w-full border-t-2 border-gray-200"},["div",{class:"flex flex-col ml-4 md:ml-6"},["div",{class:"my-3 flex flex-row justify-between items-center"},["div",{class:"flex flex-row justify-start items-center"},["img",{class:"h-8 w-8 md:h-10 md:w-10 rounded-full",src:t.user_avatar_url?t.user_avatar_url:"https://subjpop.com/images/logos/2022-spring.png"}],["div",{class:"ml-3 flex flex-col"},["div",{class:"font-semibold"},t.user_name?t.user_name:t.github_handle],["div",{class:"text-gray-700 text-sm"},`@${t.github_handle.toLowerCase()}`]]],o.login==t.github_handle?["div",{class:"flex flex-row items-top text-gray-500"},[E,[js,{id:s,data:{...t,user_avatar_url:o.avatar_url,user_name:o.name}}],{class:"ml-2 focus:outline-none hover:text-gray-700 p-2"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2"},ne(lo,"20")],["div","edit"]]],[E,[Ds],{class:"focus:outline-none hover:text-gray-700 fill-current p-2"},["div",{class:"flex flex-row"},["div",{class:"pr-2"},ne(_r,"20")],["div","delete"]]],i?[El,t]:[]]:["div",{class:"flex flex-row items-top text-gray-500"},[E,[Ps,t,window.location.origin+window.location.pathname+`#/entry/${decodeURI(e.views.route.deref().params.id)}`],{class:"ml-2 focus:outline-none hover:text-gray-700 p-2"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2"},ne(Lr,"20")],["div","report"]]],r?[yl]:[]]],["div",{class:"leading-relaxed flex flex-col"},["h2",{class:"font-bold text-gray-800 text-xl md:text-2xl"},t.translation],["div",{class:"text-gray-700 mt-1 text-sm md:text-base break-all sm:break-words"},wo(t.details)]],[gl,t]]]}function Lo(e,t,n,s,o){return["div",{class:"block font-medium text-gray-800 text-lg mb-2"},["div",{class:"flex flex-col"},t,n?["div",{class:"text-xs text-gray-500"},n]:[]],[o,{...s,class:"shadow-inner appearance-none border rounded w-full py-2 px-3 bg-gray-200 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:bg-white"}]]}function Io(e,t,n,s){return Lo(e,t,n,s,"input")}function wl(e,t,n,s){return Lo(e,t,n,s,"textarea")}function Cl(e,t,n,s,o,i){const r=e.bus;return Io(e,t,n,{...i,oninput:a=>r.dispatch([At,{id:o,key:s,value:a.target.value}])})}function Tl(e,t,n,s,o,i){const r=e.bus;return wl(e,t,n,{...i,oninput:a=>r.dispatch([At,{id:o,key:s,value:a.target.value}])})}function V(e,t,n,s,o,i){const r=e.bus;return Io(e,t,n,{...i,oninput:a=>{r.dispatch([o,{key:s,value:a.target.value}]),s==="name"&&r.dispatch([o,{key:"id",value:a.target.value.toLowerCase()}])}})}const it=e=>Object.keys(e).length===0;function xl(e){const t=e.bus,n=e.views,s=n.user.deref(),o=decodeURI(n.route.deref().params.id),i=n.opinions.deref(),r=n.tempOpinion.deref();if(!i[o]){const l={github_handle:s.login,user_avatar_url:s.avatar_url,user_bio:s.bio,user_name:s.name,translation:"",details:""};t.dispatch([Ie,{id:o,data:l}])}return()=>{const l=n.opinions.deref()[o];return l?["div",{class:"flex flex-col px-4 md:px-12 py-10 w-full border-t-2 border-gray-200"},["div",{class:"flex flex-col ml-4 md:ml-6"},["div",{class:"my-3 flex flex-row justify-start items-center"},["img",{class:"h-8 w-8 md:h-10 md:w-10 rounded-full",src:s.avatar_url}],["div",{class:"ml-3 flex flex-col"},["div",{class:"font-semibold"},s.name?s.name:s.login],["div",{class:"text-gray-700 text-sm"},`@${s.login.toLowerCase()}`]]],["div",{class:"leading-relaxed flex flex-col"},Cl(e,"翻译:","","translation",o,{value:l.translation,placeholder:o}),Tl(e,"论据:","","details",o,{value:l.details,placeholder:"* Markdown supported",rows:"5"}),["div",{class:"leading-relaxed"},["div","preview:"],["div",{class:"leading-relaxed text-gray-700 mt-1 text-sm md:text-base break-all sm:break-words"},wo(n.opinions.deref()[o].details)]],[E,it(r)?[Hs,{id:o,data:l}]:[Bs,{id:o,data:l}],l.translation?{class:"block mt-4 transition ease-in-out duration-700"}:{class:"block mt-4 transition ease-in-out duration-700 disabled:opacity-50",disabled:!0},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},it(r)?"CREATE":"UPDATE"]],it(r)?[]:[E,[Vs,{id:o,data:r}],{class:"block mt-4"},["div",{class:"shadow bg-gray-500 hover:bg-gray-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"CANCEL"]]]]]:[]}}function Ol(e,t,n,s){return["a",{...n,onclick:o=>{o.preventDefault(),e.bus.dispatch(t)}},s]}function Ll(e,t){return["div",{class:"cursor-pointer"},[Ol,[pe,{id:t,page:1}],{},["span",{class:" py-2, bg-purple-200 text-sm sm:text-base text-gray-700 subpixel-antialiased px-1 rounded mr-2"},`# ${t}`]]]}function Il(e,t){var n;return["div",{class:"flex flex-col justify-center px-4 md:px-12 pb-10"},["div",{class:"ml-4 md:ml-6"},["h3",{class:"sm:font-light text-xl sm:text-2xl md:text-3xl text-gray-900 mt-2"},["span",t.name]],["div",{class:"flex flex-wrap"},[t.alias,t.author,t.category,t.date,t.group,t.language,t.romanization,t.album].map(s=>s?[Ll,s]:[])],(n=t.wikipedia)!=null&&n.pageid?Nl(t):[]]]}function Nl(e){var t,n;return["div",{class:" sm:text-xl text-gray-600 mt-3 leading-relaxed"},["p",{class:"font-light text-base"},(t=e.wikipedia)==null?void 0:t.extract],["div",{class:"pt-2 mt-auto text-lg font-medium inline-flex items-center text-purple-600 hover:text-purple-800"},["a",{href:`https://${e.language}.wikipedia.org/?curid=${(n=e.wikipedia)==null?void 0:n.pageid}`,target:"_blank"},"Surf the Wikipedia 🌊"]]]}function Al(e,t){const n=decodeURI(e.views.route.deref().params.id),s=e.views.user.deref(),o=e.views.notifications.deref()[n],i=o?o.filter(r=>r.github_handle===s.login):null;return["div",{class:"ml-4 md:ml-6 px-4 md:px-12"},["div",{class:"flex flex-col md:flex-row md:justify-between space-y-2"},["div",{class:"item-center content-center md:self-center align-center space-x-1 font-semibold text-lg"},["span","entry"],["span","/"],["span",t.id]],["div",{class:"flex flex-row space-x-2"},["div",{class:"flex flex-row"},i&&i[0]&&i[0].entry_id?["div",{class:"flex flex-row"},[E,[no,{id:n,data:i[0]}],{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded-l focus:outline-none"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2 self-center"},ne(xr,"20")],["div","unwatch"]]]]:["div",{class:"flex flex-row"},[E,[mt,{id:n,data:{github_handle:s.login}}],{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded-l focus:outline-none"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2 self-center"},ne(Or,"20")],["div","watch"]]]],["div",{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded-r focus:outline-none cursor-default"},o?o.length:null]],[E,[Ss,n],{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded focus:outline-none"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2"},ne(lo,"20")],["div","edit"]]]]]]}const Wn=(e,t)=>ho(_o(Rt(n=>n.opinion_github_handle===e),kt(n=>n.type===Z.UPVOTE?1:-1)),po(0),t);function Sl(e){const t=e.views,n=e.bus,s=decodeURI(e.views.route.deref().params.id);return n.dispatch(t.entries.deref()[s]?[g,[h.SUCCESS,"loaded from cache",!0]]:[gt,s]),()=>{const o=decodeURI(t.route.deref().params.id),i=t.entries.deref()[o],r=t.votes.deref()[o],l=(c,d)=>Wn(d.github_handle,r)-Wn(c.github_handle,r),a=t.user.deref();return["div",se,i&&i.id&&r?["div",{class:"flex flex-col"},[Al,i],[Il,i],i.opinions.sort(l).map(c=>[bl,c]),a.login&&i.opinions.map(c=>c.github_handle.toLowerCase()).indexOf(a.login.toLowerCase())<0?xl:[]]:["div",["div",{class:"text-4xl m-auto p-6"},"no available data..."],["div",{class:"flex flex-row items-top text-gray-500"},[E,[As,o],{class:"block m-4 w-full"},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"CREATE"]]]]]}}const kl=[["en","英语"],["jp","日语"],["ko","韩语"],["fr","法语"],["de","德语"]];function No(e,t,n,s,o){const i=e.views,r=e.bus;return()=>{const l=i[t].deref();return["div",{class:"flex flex-col p-6 md:p-12"},["h2",e.ui.newsletterForm.title,t==="newEntry"?"Add new entry":"Edit entry"],V(e,"原文","","name",n,{value:l.name,placeholder:"Mencius",disabled:t!=="newEntry"}),["div",{class:"block font-medium text-gray-800 text-lg mb-2"},"语言",[xo,{class:"shadow-inner appearance-none border rounded w-full py-2 px-3 bg-gray-200 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:bg-white",onchange:a=>r.dispatch([n,{key:"language",value:a.target.value}])},kl,l.language]],V(e,"亦名","","alias",n,{value:l.alias,placeholder:"Mengzi"}),V(e,"罗马化转写","","romanization",n,{value:l.romanization,placeholder:"Mengzi"}),V(e,"作品年份","","date",n,{value:l.date,placeholder:"372-289 BC"}),V(e,"属性","如：乐人、影人、专辑、歌曲、著作、影片、哲学家……","category",n,{value:l.category,placeholder:"哲学家"}),V(e,"团体","当“原文“为个人且该人从属于某团体时","group",n,{value:l.group}),V(e,"作者","当“原文“为某件创作作品时","author",n,{value:l.author}),V(e,"专辑","当“原文“为收录在某张专辑中的歌曲时","album",n,{value:l.album}),l.wikipedia?["div",["div",{class:"block font-medium text-gray-800 text-lg mb-2"},"维基"],["div",{class:"block font-light text-base text-gray-600"},l.wikipedia.extract]]:[],[E,[s,{titles:l.name,language:l.language}],l.name&&l.language?{class:"block mt-4 transition ease-in-out duration-700"}:{class:"block mt-4 transition ease-in-out duration-700 disabled:opacity-50",disabled:!0},["div",{class:"shadow bg-gray-500 hover:bg-gray-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"RETRIEVE FROM WIKIPEDIA"]],[E,[o,{id:l.id,data:l}],l.name?{class:"block mt-4 transition ease-in-out duration-700"}:{class:"block mt-4 transition ease-in-out duration-700 disabled:opacity-50",disabled:!0},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"SUBMIT"]]]}}function Rl(e){const t=e.views,n=e.bus,s=decodeURI(t.route.deref().params.id),o=t.newEntry.deref(),i=s==="null"||s===""?o:{...o,id:s,name:s};return n.dispatch([Ks,{data:i}]),()=>{const r=t.user.deref();return["div",se,r.login?[No,"newEntry",Ws,qs,Qs]:["div",{class:"flex flex-col p-6 md:p-12"},["p",e.ui.newsletterForm.title,"Please sign in before adding new entry..."]]]}}function Ul(e){const t=e.views,n=e.bus,s=decodeURI(e.views.route.deref().params.id),o=t.entries.deref()[s];return o?(n.dispatch([Xs,{data:o}]),()=>{const i=t.user.deref();return["div",se,i.login?[No,"tempEntry",Js,Zs,Ys]:["div",{class:"flex flex-col p-6 md:p-12"},["p",e.ui.newsletterForm.title,"Please sign in before editing entry..."]]]}):n.dispatch([te,s])}const Dl={VITE_PUBLIC_CLIENT_ID:"2ed1b3b100d6c005d42b",VITE_PUBLIC_REDIRECT_URI:"https://nopro.studio/mencius/"},{VITE_PUBLIC_CLIENT_ID:Pl,VITE_PUBLIC_REDIRECT_URI:Fl}=Dl,Ml=Pl,$l=Fl;function Gl(e){return["div",se,["div",{class:"flex flex-col p-6 md:p-12"},["p",e.ui.newsletterForm.title,"Mencius"],["p",[[`https://github.com/login/oauth/authorize?client_id=${Ml}&scope=user%20public_repo&redirect_uri=${$l}`,"Sign in with GitHub"]].map(t=>[St,e.ui.contact.link,...t])]]]}function Hl(e){const n=new URLSearchParams(window.location.search).get("code");return e.bus.dispatch([$s,n]),["div",se,["div",{class:"text-4xl m-auto p-6"},"Signing-in with GitHub..."]]}const zl={zh:[{question:"为何无法登陆？",answer:"Mencius 使用第三方 cookie 来保存并验证用户登陆状态，请在当前页面允许使用第三方 cookie。"},{question:"为何无法检索缩略语？",answer:"由于检索词条的复杂性，有些时候带有 .（点）的缩略语无法被搜索，但是可以通过搜索全名或者相关信息来找到目标词条：比如用 Dr. Dre 找到 N.W.A。"}]};function jl(e){return["div",["div",{class:"flex flex-col pt-6 text-gray-800"},["header",["div",{class:"px-4 md:px-12 pb-6"},["h1",{class:"text-5xl font-bold text-center"},"FAQ"],["h2",{class:"text-2xl font-semibold text-center"},"Answers to common questions about Mencius."]]],["hr",{class:"pb-2"}],["section",["div",{class:"flex flex-col items-start px-4 md:px-12"},zl.zh.map(t=>["article",["h2",{class:"text-2xl md:text-3xl font-bold py-2"},t.question],["p",{class:"font-light pb-8"},t.answer]])]]]]}const Kn="route-to",qn="get-user",Zn="get-token",Qn="sign-out",Yn="create-opinion",Jn="delete-opinion",Xn="update-opinion",rt="get-wiki",es="get-entry",ts="create-entry",ns="update-entry",ss="search-entry",os="create-report",is="get-vote",rs="create-vote",ls="delete-vote",Vl="get-notification",as="create-notification",cs="update-notification",ds="delete-notification",us="get-new-notifications",fs="get-all-notifications",Bl={VITE_PUBLIC_API_HOST:"https://api.nopro.studio"},{VITE_PUBLIC_API_HOST:Wl}=Bl,T=Wl,ke=Ge,Kl={router:{useFragment:!0,defaultRouteID:ke.id,routes:[Ge,_t,tt,nt,Ne,st,Ae,Nn,Et]},events:{[qt]:()=>({[u]:[g,[h.DONE,"done"]]}),[w]:(e,[t,n])=>({[u]:n.message==="Unauthorized"||n.message==="Bad Request"?[[g,[h.ERROR,n.message]],[G,[Ae.id,{}]]]:[g,[h.ERROR,n.message]]}),[g]:(e,[t,n])=>({[u]:[x,["status",n]],[C]:n[0]!==h.DONE&&n[2]?[Ns,[1e3],qt,w]:void 0}),[ks]:R("isNavOpen",e=>!e),[Rs]:R("accountOpen",e=>!e),[ut]:R("accountOpen",e=>!1),[Us]:R("notificationOpen",e=>!e),[ft]:R("notificationOpen",e=>!1),[Ds]:R("deleteOpinionOpen",e=>!e),[Me]:R("deleteOpinionOpen",e=>!1),[Qt]:R("reportOpen",e=>!e),[$e]:R("reportOpen",e=>!1),[re]:R("voteLock",e=>!e),[ce]:(e,[t,n])=>({[u]:[x,[["report",n.key],n.value]]}),[Ps]:(e,[t,n,s])=>({[u]:[[Qt],[ce,{key:"type",value:ro.OPINION}],[ce,{key:"context",value:n}],[ce,{key:"url",value:s}]]}),[Fs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"reporting..."]]],[C]:[os,n,Yt,w]}),[Yt]:()=>({[u]:[[g,[h.SUCCESS,"reported successfully",!0]],[$e]]}),[ir]:R("debug",e=>!e),[Ms]:(e,[t,n])=>({[u]:[x,["input",n.toLowerCase()]]}),[Jt]:(e,[t,n])=>({[u]:[[g,[h.INFO,"getting entry data..."]]],[C]:[es,n,Xt,w]}),[Xt]:(e,[t,n])=>({[u]:[[x,[["entries",decodeURI(n.id)],n.data]],[g,[h.SUCCESS,"entry data successfully loaded",!0]]]}),[te]:(e,[t,n])=>({[u]:[[G,[nt.id,{id:n}]]]}),[As]:(e,[t,n])=>({[u]:[[G,[Ne.id,{id:n}]]]}),[Ss]:(e,[t,n])=>({[u]:[[G,[st.id,{id:n}]]]}),[Zt]:(e,[t,n,s])=>({[u]:[[G,[tt.id,{id:n,page:s}]]]}),[ht]:()=>({[u]:[[g,[h.INFO,"getting user data..."]]],[C]:[qn,null,en,w]}),[en]:(e,[t,n])=>({[u]:[[x,["user",n.data]],[g,[h.SUCCESS,"user data successfully loaded",!0]],[On]]}),[$s]:(e,[t,n])=>({[u]:[[g,[h.INFO,"getting token..."]]],[C]:[Zn,n,tn,w]}),[tn]:(e,[t,n])=>({[u]:[[g,[h.SUCCESS,"token successfully loaded",!0]],[G,[ke.id,{}]],[ht]]}),[Gs]:()=>({[u]:[[g,[h.INFO,"signing out..."]]],[C]:[Qn,null,nn,w]}),[nn]:()=>({[u]:[[g,[h.SUCCESS,"signed out successfully",!0]],[G,[ke.id,{}]],[x,["user",{}]]]}),[Ie]:(e,[t,n])=>({[u]:[x,[["opinions",n.id],n.data]]}),[At]:(e,[t,n])=>({[u]:[x,[["opinions",n.id,n.key],n.value]]}),[Hs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"submitting opinion..."]],[Ce,n]],[C]:[Yn,n,sn,w]}),[sn]:(e,[t,n])=>({[u]:[[g,[h.SUCCESS,"opinion submitted successfully",!0]],[mt,n]]}),[Ce]:(e,[t,n])=>({[u]:[[B,[["entries",n.id,"opinions"],s=>[...s,n.data]]]]}),[Xe]:(e,[t,n])=>({[u]:[[B,[["entries",n.id,"opinions"],s=>s.filter(o=>o.github_handle!==n.data.github_handle)]]]}),[zs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"deleting opinion..."]],[Xe,n]],[C]:[Jn,n,on,w]}),[on]:()=>({[u]:[[g,[h.SUCCESS,"opinion deleted successfully",!0]],[Me]]}),[et]:(e,[t,n])=>({[u]:[[x,["tempOpinion",n.data]]]}),[js]:(e,[t,n])=>({[u]:[[et,n],[Ie,n],[Xe,n]]}),[Vs]:(e,[t,n])=>({[u]:[[Ce,n],[Ie,{...n,data:{}}],[et,{data:{}}]]}),[Bs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"updating opinion..."]],[Ce,n]],[C]:[Xn,n,rn,w]}),[rn]:()=>({[u]:[[g,[h.SUCCESS,"opinion updated successfully",!0]]]}),[Ws]:(e,[t,n])=>({[u]:[x,[["newEntry",n.key],n.value]]}),[Ks]:(e,[t,n])=>({[u]:[x,["newEntry",n.data]]}),[qs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"getting wikipedia data..."]]],[C]:[rt,n,ln,w]}),[ln]:(e,[t,n])=>({[u]:[[x,["newEntry.wikipedia",n.data]],[g,[h.SUCCESS,"wikipedia data successfully loaded",!0]]]}),[Zs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"getting wikipedia data..."]]],[C]:[rt,n,an,w]}),[an]:(e,[t,n])=>({[u]:[[x,["tempEntry.wikipedia",n.data]],[g,[h.SUCCESS,"wikipedia data successfully loaded",!0]]]}),[Qs]:(e,[t,n])=>({[u]:[[g,[h.INFO,"submitting entry..."]]],[C]:[ts,n,cn,w]}),[cn]:(e,[t,n])=>({[u]:[[te,n.id],[g,[h.SUCCESS,"entry submitted successfully",!0]]]}),[Ys]:(e,[t,n])=>({[u]:[[g,[h.INFO,"updating entry..."]]],[C]:[ns,n,dn,w]}),[dn]:(e,[t,n])=>({[u]:[[x,[["entries",n.id],""]],[te,n.id],[g,[h.SUCCESS,"entry updated successfully",!0]]]}),[Js]:(e,[t,n])=>({[u]:[x,[["tempEntry",n.key],n.value]]}),[Xs]:(e,[t,n])=>({[u]:[x,["tempEntry",n.data]]}),[pt]:(e,[t,n])=>({[u]:[[g,[h.INFO,"searching entries..."]]],[C]:[ss,n,un,w]}),[un]:(e,[t,n])=>({[u]:[[x,["search",n.data]],[g,[h.SUCCESS,"searched successfully",!0]]]}),[pe]:(e,[t,n])=>({[u]:[[pt,n],[Zt,n.id,n.page]]}),[fn]:(e,[t,n])=>({[C]:[is,n,hn,w]}),[hn]:(e,[t,n])=>({[u]:[[x,[["votes",decodeURI(n.id)],n.data?n.data:[]]],[g,[h.SUCCESS,"vote data successfully loaded",!0]]]}),[eo]:(e,[t,n])=>({[u]:[[g,[h.INFO,"voting..."]],[re]],[C]:[rs,n,pn,w]}),[pn]:(e,[t,n])=>({[u]:[[g,[h.SUCCESS,"voted successfully",!0]],[mn,n],[re]]}),[to]:(e,[t,n])=>({[u]:[[g,[h.INFO,"deleting vote..."]],[_n,n],[re]],[C]:[ls,n,gn,w]}),[gn]:()=>({[u]:[[g,[h.SUCCESS,"vote deleted successfully",!0]],[re]]}),[mn]:(e,[t,n])=>({[u]:[[B,[["votes",n.id],s=>[...s,...n.data]]]]}),[_n]:(e,[t,n])=>({[u]:[[B,[["votes",n.id],s=>s.filter(o=>o!==n.data)]]]}),[gt]:(e,[t,n])=>({[u]:[[En,n],[fn,n],[Jt,n]]}),[En]:(e,[t,n])=>({[C]:[fs,n,yn,w]}),[yn]:(e,[t,n])=>({[u]:[[x,[["notifications",decodeURI(n.id)],n.data[0].entry_id?n.data:[]]],[g,[h.SUCCESS,"notification successfully loaded",!0]]]}),[mt]:(e,[t,n])=>({[u]:[[g,[h.INFO,"watching the entry..."]]],[C]:[as,n,wn,w]}),[wn]:(e,[t,n])=>({[u]:[[g,[h.SUCCESS,"watched successfully",!0]],[Tn,n]]}),[vn]:(e,[t,n])=>({[u]:[[g,[h.INFO,"updating the notification..."]]],[C]:[cs,n,bn,w]}),[bn]:(e,[t,n])=>({[u]:[[g,[h.SUCCESS,"notification updated successfully",!0]]]}),[no]:(e,[t,n])=>({[u]:[[g,[h.INFO,"deleting notification..."]],[xn,n]],[C]:[ds,n,Cn,w]}),[Cn]:()=>({[u]:[[g,[h.SUCCESS,"notification deleted successfully",!0]]]}),[Tn]:(e,[t,n])=>({[u]:[[B,[["notifications",n.id],s=>[...s,...n.data]]]]}),[xn]:(e,[t,n])=>({[u]:[[B,[["notifications",n.id],s=>s.filter(o=>o!==n.data)]]]}),[On]:()=>({[C]:[us,null,Ln,w]}),[Ln]:(e,[t,n])=>({[u]:[[x,["newNotifications",n.data]],[g,[h.SUCCESS,"new notifications successfully loaded",!0]]]}),[In]:(e,[t,n])=>({[u]:[B,[["newNotifications"],s=>[...s.filter(o=>o.entry_id!=n.id),n.data]]]}),[so]:(e,[t,n])=>({[u]:[[vn,n],[te,n.id],[gt,n.id],[In,n]]})},effects:{[qn]:()=>fetch(T+"/api/v1/user",{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}),[Zn]:e=>fetch(T+"/token?code="+e,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[Qn]:()=>fetch(T+"/token",{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}),[Yn]:e=>fetch(T+"/api/v1/entries/"+e.id,{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[Jn]:e=>fetch(T+`/api/v1/entries/${e.id}/${e.userName}`,{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[Xn]:e=>fetch(T+`/api/v1/entries/${e.id}/${e.userName}`,{method:"PUT",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[rt]:e=>fetch(T+`/api/v1/wiki?language=${e.language}&titles=${e.titles}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[es]:e=>fetch(T+"/api/v1/entries/"+e,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[ts]:e=>fetch(T+"/api/v1/entries",{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[ns]:e=>fetch(T+`/api/v1/entries/${e.id}`,{method:"PUT",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[ss]:e=>fetch(T+`/api/v1/search/entry?id=${e.id}&page=${e.page}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[os]:e=>fetch(T+"/api/v1/report",{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[is]:e=>fetch(T+`/api/v1/entries/${e}/placeholder/vote/placeholder`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[rs]:e=>fetch(T+`/api/v1/entries/${e.id}/${e.data.opinion_github_handle}/vote`,{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[ls]:e=>fetch(T+`/api/v1/entries/${e.id}/${e.data.opinion_github_handle}/vote/${e.voteID}`,{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[Vl]:e=>fetch(T+`/api/v1/notification/${e}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[as]:e=>fetch(T+`/api/v1/notification/${e.id}`,{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[cs]:e=>fetch(T+`/api/v1/notification/${e.id}`,{method:"PUT",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[ds]:e=>fetch(T+`/api/v1/notification/${e.id}`,{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify(e.data)}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}),[us]:()=>fetch(T+"/api/v1/notifications/new",{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}),[fs]:e=>fetch(T+`/api/v1/notifications/all/${e}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()})},components:{[Ge.id]:Ir,[_t.id]:Nr,[tt.id]:Ar,[nt.id]:Sl,[Ne.id]:Rl,[st.id]:Ul,[Ae.id]:Gl,[Nn.id]:Hl,[Et.id]:jl},domRoot:"app",initialState:{status:[h.INFO,"running"],user:{},newNotifications:[],route:{},debug:!1,isNavOpen:!1,accountOpen:!1,notificationOpen:!1,deleteOpinionOpen:!1,reportOpen:!1,report:{},input:"",entries:{},votes:{},voteLock:!1,notifications:{},opinions:{},tempOpinion:{},newEntry:{album:"",alias:"",author:"",category:"",consensus_translation:"",date:"",group:"",id:"",name:"",language:"en",romanization:"",wikipedia:null,opinions:[]},tempEntry:{},search:{}},views:{json:["",e=>JSON.stringify(e,null,2)],user:["user",e=>e||{}],newNotifications:"newNotifications",status:"status",debug:"debug",isNavOpen:"isNavOpen",accountOpen:"accountOpen",notificationOpen:"notificationOpen",deleteOpinionOpen:"deleteOpinionOpen",reportOpen:"reportOpen",report:"report",input:"input",entries:"entries",votes:"votes",voteLock:"voteLock",notifications:"notifications",opinions:"opinions",tempOpinion:"tempOpinion",newEntry:"newEntry",tempEntry:"tempEntry",search:"search"},ui:{status:{[h.DONE]:{class:"text-center p-2 bg-yellow-200 text-yellow-700 fadeout"},[h.INFO]:{class:"text-center p-2 bg-yellow-200 text-yellow-700"},[h.SUCCESS]:{class:"text-center p-2 bg-green-200 text-green-700"},[h.ERROR]:{class:"text-center p-2 bg-red-200 text-red-700"}},newsletterForm:{title:{class:"sm:font-light text-2xl sm:text-3xl md:text-4xl text-gray-900 mt-6"},form:{class:"w-full"},container:{class:"flex items-center border-b border-b-2 border-purple-500 py-2"},input:{class:"appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none md:text-xl"},button:{class:"flex-shrink-0 bg-purple-500 hover:bg-purple-700 border-purple-500 hover:border-purple-700 text-sm border-4 text-white py-1 px-2 rounded"}},characterCard:{container:{class:"flex flex-col px-4 md:px-12 py-10 w-full sm:w-1/2 border-gray-200"},icon:{class:"h-8 w-8 md:h-10 md:w-10 md:-my-1"},body:{class:"flex flex-col leading-relaxed ml-4 md:ml-6"},content:{keyword:{class:"font-medium text-gray-800 text-lg"},description:{class:"text-gray-600 mt-1 text-sm md:text-base"}}},root:{class:"about_bg"},debug:{container:{class:"max-w-xs mt-1 flex max-h-screen overflow-y-auto overflow-x-auto"},debugToggle:{class:"font-bold rotate-270 flex mt-5 focus:outline-none h-10"},open:{class:"text-xs p-2 text-gray-800 rounded-lg"},close:{class:"hidden"}},logo:{container:{class:"sm:px-4 sm:pt-2 sm:pb-6 flex items-center"},m:{class:"h-10 text-purple-900"},mxs:{class:"h-10 ml-4 text-gray-900 hidden md:block"}},nav:{outer:{},search:{},inner:{open:{class:"items-center justify-between pl-4 pb-2 block sm:block sm:flex"},close:{class:"items-center justify-between pl-4 pb-2 hidden sm:block sm:flex"}},title:{class:"black f1 lh-title tc db mb2 mb2-ns"},link:{class:"mt-1 block px-2 py-1 font-bold rounded hover:bg-gray-100 text-lg sm:mt-0 sm:ml-2"}},contact:{link:{class:"flex flex-col sm:text-xl text-gray-600 mt-2 leading-relaxed font-bold hover:bg-gray-200 hover:text-gray-900"}},footer:{icon:{class:"mt-1 ml-2 font-normal text-gray-600 hover:text-gray-800 text-xs md:text-sm sm:mt-0"},copyright:{class:"mt-1 px-2 py-1 font-normal text-gray-600 text-xs md:text-sm sm:mt-0 sm:ml-2"},link:{class:"mt-1 block px-2 py-1 font-normal text-gray-600 hover:text-gray-800 text-xs md:text-sm sm:mt-0 sm:ml-2"}}}};function je(e,t,n,s,o){return["a",{...s,onclick:i=>{i.preventDefault(),e.bus.dispatch([G,[t,n]])}},o]}function Ao(e,t,n){return je(e,ke.id,null,t,n)}function ql(e){const t=e.bus,n=e.views.input.deref();return["div",{class:"w-full xl:px-24 px-4 pt-2 pb-6"},["div",{class:"relative"},["input",{id:"entry_search",class:"transition bg-white shadow-md focus:outline-0 border border-transparent placeholder-gray-700 rounded-lg py-2 pr-4 pl-10 block w-full appearance-none leading-normal",placeholder:"搜寻条目 / Search Entries",type:"text",oninput:s=>{t.dispatch([Ms,s.target.value])},onkeyup:s=>{s.key==="Enter"&&t.dispatch([pe,{id:n,page:1}])}}],["div",{class:"pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center"},["div",{class:"fill-current pointer-events-none text-gray-600 w-4 h-4"},wr]]]]}function hs(e){const t=e.bus,n=e.views.user.deref(),s=e.views.accountOpen.deref();return["div",{class:"relative",onkeydown:o=>{(o.key==="Escape"||o.key==="Esc")&&t.dispatch([ut,null])}},["div",{class:"flex flex-row items-center relative w-8 mx-2"},[E,[Rs],{class:"relative z-10 block rounded-full overflow-hidden focus:outline-none"},["img",{src:n.avatar_url,alt:n.login}]],s?[E,[ut],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default"}]:[]],s?["div",{class:"absolute right-0 mt-2 py-2 w-48 bg-white rounded-lg shadow-xl"},["div",{class:"block px-4 text-gray-600"},`Signed in as ${n.login.toLowerCase()}`],["div",{class:"block my-2 border-b bg-grey-400"}],[E,[Gs],{class:"block px-4 py-2 text-black hover:bg-gray-200 w-full text-left"},"Sign out"]]:[]]}function ps(e){const t=e.bus,n=e.views.notificationOpen.deref();return()=>{let s=e.views.newNotifications.deref();return s!==null&&(s=s.filter(o=>o.status===io.NEW)),["div",{class:"relative",onkeydown:o=>{(o.key==="Escape"||o.key==="Esc")&&t.dispatch([ft,null])}},["div",{class:"flex flex-row items-center relative w-8 mx-2"},[E,[Us],{class:"relative z-10 block rounded-full w-6 h-6 focus:outline-none"},["div",{class:"relative"},["div",{class:s&&s.length?"absolute top-0 right-0 text-xs text-center rounded-full p-1 transition eas-in-out duration-300 bg-red-500 border-2 border-gray-200":"absolute top-0 right-0 text-xs text-center rounded-full p-1 transition eas-in-out duration-300 bg-transparent"}],["div",br]]],n?[E,[ft],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default"}]:[]],n?["div",{class:"absolute z-10 right-0 mt-2 py-2 w-64 bg-white rounded-lg shadow-xl"},["div",{class:"block px-4 text-gray-600"},"Notifications"],["div",{class:"block my-2 border-b bg-grey-400"}],s&&s.length?s.map(o=>[E,[so,{id:o.entry_id,data:{...o,status:"viewed"}}],{class:"block px-4 py-2 text-black hover:bg-gray-200 w-full text-left focus:outline-none"},o.entry_id]):["div",{class:"block px-4 py-2 text-gray-500 w-full text-center focus:outline-none my-6 items-center"},"no notification"]]:[]]}}function Zl(e){const t=e.views.isNavOpen.deref(),n=e.views.user.deref(),s=e.ui.nav;return["nav",{class:"sm:flex sm:justify-between sm:items-center px-4 md:px-6 py-3"},["div",{class:"flex items-center justify-between px-4 py-3 sm:p-0"},[Ao,{class:"cursor-pointer"},ar],["div",{class:"flex items-center justify-end space-x-2"},[E,[ks],{class:"block sm:hidden"},["div",{class:"h-8 w-8 md:h-10 md:w-10"},t?gr:vr]],n.login?["div",{class:"flex flex-row"},["div",{class:"block sm:hidden z-10 self-center"},ps],["div",{class:"block sm:hidden z-10"},hs]]:[]]],ql,["div",t?s.inner.open:s.inner.close,[je,Ne.id,null,s.link,["div",{class:"flex flex-row items-center space-x-2 cursor-pointer"},["div",{class:"h-6 w-6"},fr],["div","New"]]],n.login?["div",{class:"flex flex-row space-x"},["div",{class:"hidden sm:block self-center"},ps],["div",{class:"hidden sm:block self-center"},hs]]:[je,Ae.id,null,s.link,["div",{class:"flex flex-row items-center self-center cursor-pointer"},["div",{class:"h-6 w-6 mr-2"},Tr],["div","Sign_in"]]]]]}function Ql(e){const t=e.ui.footer,n=[[Ge,"About"],[_t,"Contact"],[Et,"FAQ"]];return["footer",{class:"flex flex-col sm:flex-row justify-between sm:items-center px-4 md:px-6 py-3"},["div",{class:"flex items-center justify-start sm:px-4 sm:py-3 sm:p-0"},[Ao,{class:"cursor-pointer"},["div",{...t.icon},He(oo,"16px","16px")]],[St,{title:"See our work on GitHub"},"https://github.com/noprostudio",["div",{...t.icon},He(rr,"16px","16px")]],["div",t.copyright,`© ${new Date().getFullYear()} Mencius`]],["div",{class:"flex flex-row"},n.map(s=>[je,s[0].id,null,t.link,["div",{class:"flex flex-row items-center space-x-2 cursor-pointer"},["div",s[1]]]])]]}function Yl(e,t){return["div",{class:"flex-grow h-full"},["div",{class:"max-w-5xl mx-auto flex h-full lg:items-center lg:px-8"},["div",{class:"flex-grow bg-white lg:shadow-2xl lg:rounded-lg lg:overflow-hidden h-full lg:h-auto"},t]]]}class Jl{constructor(t){ie(this,"config");ie(this,"ctx");ie(this,"state");ie(this,"router");this.config=t,this.state=new De(t.initialState||{}),this.ctx={bus:new tr(this.state,t.events,t.effects),views:{},ui:t.ui},this.addViews(this.config.views),this.router=new or(t.router),this.router.addListener(he,n=>this.ctx.bus.dispatch([he,n.value])),this.ctx.bus.addHandlers({[he]:nr("route"),[G]:(n,[s,o])=>({[Kn]:o})}),this.ctx.bus.addEffect(Kn,([n,s])=>this.router.routeTo(this.router.format(n,s))),this.addViews({route:"route",routeComponent:["route.id",n=>(this.config.components[n]||(()=>["div",`missing component for route: ${n}`]))(this.ctx)]})}addViews(t){const n=this.ctx.views;for(const s in t){const o=t[s];n[s]=H(o)?Ht(this.state,o[0],o[1]):Ht(this.state,o)}}start(){this.router.start(),this.ctx.bus.dispatch([ht]),qi(()=>{if(this.ctx.bus.processQueue())return this.rootComponent()},{root:this.config.domRoot,ctx:this.ctx})}rootComponent(){return this.ctx.views.debug.deref(),["div",this.ctx.ui.root,["div",{class:"flex flex-row"},["div",{class:"w-full min-h-screen flex flex-col"},Zl,[Yl,this.ctx.views.routeComponent],Ql],[]]]}}new Jl(Kl).start();

parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {var re=function(){return re=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},re.apply(this,arguments)};function Bb(t,e,r,o){var n,a=arguments.length,$=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$=Reflect.decorate(t,e,r,o);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&($=(a<3?n($):a>3?n(e,r,$):n(e,r))||$);return a>3&&$&&Object.defineProperty(e,r,$),$}function Cb(t){return this instanceof Cb?(this.v=t,this):new Cb(t)}var se,Db;(function($){$[$.FINE=0]="FINE",$[$.DEBUG=1]="DEBUG",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.SEVERE=4]="SEVERE",$[$.NONE=5]="NONE"})(Db||(se=Db={},se));var te={};const ba=Symbol();const qa=()=>{};const ue="*";const Za=void 0===te?(r,$="assertion failed")=>{if("function"==typeof r&&!r()||!r)throw new Error("function"==typeof $?$():$)}:qa;const ve=Object.freeze({level:Db.NONE,fine(){},debug(){},info(){},warn(){},severe(){}});const Eb=(e,t={})=>{const o=Reflect.ownKeys(e),r=Reflect.ownKeys(t),n=Symbol("isa");function i(t){for(let r of o){const o=Object.getOwnPropertyDescriptor(t.prototype,r);!o||o.configurable?Object.defineProperty(t.prototype,r,{value:e[r],writable:!0}):console.log(`not patching: ${t.name}.${r.toString()}`)}return Object.defineProperty(t.prototype,n,{value:!0}),t}for(let p of r)Object.defineProperty(i,p,{value:t[p],enumerable:t.propertyIsEnumerable(p)});return Object.defineProperty(i,Symbol.hasInstance,{value:e=>!!e[n]}),i};const Fb=(e,t)=>{if(e)for(let i,r=0,s=e.length;r<s;r++)if((i=e[r])[0].call(i[1],t),t.canceled)return};const we=Eb({addListener(e,t,i){let r=(this._listeners=this._listeners||{})[e];return!r&&(r=this._listeners[e]=[]),-1===this.__listener(r,t,i)&&(r.push([t,i]),!0)},removeListener(e,t,i){let r;if(!(r=this._listeners))return!1;const s=r[e];if(s){const n=this.__listener(s,t,i);if(-1!==n)return s.splice(n,1),!s.length&&delete r[e],!0}return!1},notify(e){let t;if(!(t=this._listeners))return!1;void 0===e.target&&(e.target=this),Fb(t[e.id],e),Fb(t[ue],e)},__listener(e,t,i){let r=e.length;for(;--r>=0;){const s=e[r];if(s[0]===t&&s[1]===i)break}return r}});const xe=Eb({addWatch(t,e){return this._watches=this._watches||{},!this._watches[t]&&(this._watches[t]=e,!0)},removeWatch(t){if(this._watches)return!!this._watches[t]&&(delete this._watches[t],!0)},notifyWatches(t,e){if(!this._watches)return;const i=this._watches;for(let h in i)i[h](h,t,e)}});const $a=(r,o=r=>void 0!==r?": "+r:"")=>class extends Error{constructor(s){super(r(s)+o(s))}};const ye=$a(()=>"illegal argument(s)");const Ca=r=>{throw new ye(r)};const ze=$a(()=>"illegal arity");const ra=r=>{throw new ze(r)};const Ae=$a(()=>"illegal state");const Gb=r=>{throw new Ae(r)};const _a=o=>"function"==typeof o;const ia=(n,t)=>null!=n&&"function"==typeof n[t];const Be=$=>/^[0-9]+$/.test($);const X=Array.isArray;const Ce=t=>null!=t&&"function"!=typeof t&&void 0!==t.length;const sa=t=>"string"==typeof t;const Hb=e=>null!=e&&"function"==typeof e[Symbol.iterator];const Ib=t=>null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator];const Jb=Object.getPrototypeOf,De=$=>{let r;return null!=$&&"object"==typeof $&&(null===(r=Jb($))||null===Jb(r))};const Ee=s=>s instanceof Promise;const Fe=r=>r&&(r instanceof Float32Array||r instanceof Float64Array||r instanceof Uint32Array||r instanceof Int32Array||r instanceof Uint8Array||r instanceof Int8Array||r instanceof Uint16Array||r instanceof Int16Array||r instanceof Uint8ClampedArray);const ab=t=>X(t)?t:sa(t)?t.length>0?t.split("."):[]:null!=t?[t]:[];const Ge=e=>bb(e);function bb(e){const t=ab(e),[r,l,n,$]=t;switch(t.length){case 0:return e=>e;case 1:return e=>null!=e?e[r]:void 0;case 2:return e=>null!=e&&null!=(e=e[r])?e[l]:void 0;case 3:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[l])?e[n]:void 0;case 4:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[l])&&null!=(e=e[n])?e[$]:void 0;default:return e=>{const r=t.length-1;let l=e;for(let n=0;null!=l&&n<=r;n++)l=l[t[n]];return l};}}const He=$=>Da($);function Da($){const e=ab($),[t,r,o,p]=e;switch(e.length){case 0:return($,e)=>e;case 1:return($,e)=>($=R($),$[t]=e,$);case 2:return($,e)=>{let o;return($=R($))[t]=o=R($[t]),o[r]=e,$};case 3:return($,e)=>{let p,c;return($=R($))[t]=p=R($[t]),p[r]=c=R(p[r]),c[o]=e,$};case 4:return($,e)=>{let c,C,G;return($=R($))[t]=c=R($[t]),c[r]=C=R(c[r]),C[o]=G=R(C[o]),G[p]=e,$};default:let $;for(let t=e.length;--t>=0;)$=Ie(e[t],$);return $;}}const R=$=>X($)||Fe($)?$.slice():Object.assign({},$);const Ie=($,e)=>(t,r)=>(t=R(t),t[$]=e?e(t[$],r):r,t);const Ea=(e,$,t,...r)=>Je(e,$,t,...r);function Je(e,$,t,...r){return Da($)(e,t.apply(null,(r.unshift(bb($)(e)),r)))}const cb=(e,$,t)=>Da($)(e,t);const Ke=(e,$)=>Le(e,$);function Le(e,$){const r=bb(e),t=Da(e);return(e,...a)=>t(e,$.apply(null,(a.unshift(r(e)),a)))}let Kb=(()=>{let e=class{constructor(e,t){t&&!t(e)&&Gb("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(cb(this._value,e,t))}resetInUnsafe(e,t){return this.reset(cb(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(Ea(this._value,e,t,...r))}swapInUnsafe(e,t,...r){return this.reset(Ea(this._value,e,t,...r))}addWatch(e,t){}removeWatch(e){}notifyWatches(e,t){}release(){return delete this._watches,delete this._value,!0}};return e=Bb([xe],e)})();let Me=0;const Ne=()=>Me++;const Lb=Object.getPrototypeOf({}),V=(e,t)=>{let $;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=($=Object.getPrototypeOf(e))&&$!==Lb||null!=($=Object.getPrototypeOf(t))&&$!==Lb?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?Mb(e,t):e instanceof Set&&t instanceof Set?Nb(e,t):e instanceof Map&&t instanceof Map?Ob(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:Pb(e,t)))};const Mb=(e,t,$=V)=>{let o=e.length;if(o===t.length)for(;--o>=0&&$(e[o],t[o]););return o<0};const Nb=(e,t,$=V)=>e.size===t.size&&$([...e.keys()].sort(),[...t.keys()].sort());const Ob=(e,t,$=V)=>e.size===t.size&&$([...e].sort(),[...t].sort());const Pb=(e,t,$=V)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let o in e)if(!t.hasOwnProperty(o)||!$(e[o],t[o]))return!1;return!0};function Qb(t,e,i,s,r){return new Oe(t,e,i,s,r)}class Oe{constructor(t,e,i,s=!0,r=V){this.parent=t,this.id=`view-${Ne()}`,this.tx=i||(t=>t),this.path=ab(e),this.isDirty=!0,this.isLazy=s;const $=Ge(this.path),h=this.parent.deref();this.unprocessed=h?$(h):void 0,s||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),t.addWatch(this.id,(t,e,i)=>{const h=e?$(e):e,o=i?$(i):i;r(o,h)||(s?this.unprocessed=o:this.state=this.tx(o),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}let db,eb;var Pe,S;(function($){$[$.ONLY_DISTANCE=0]="ONLY_DISTANCE",$[$.ONLY_DISTANCE_LINEAR=1]="ONLY_DISTANCE_LINEAR",$[$.ONLY_DISTANCE_LINEAR_ONLY_CHANGES=2]="ONLY_DISTANCE_LINEAR_ONLY_CHANGES",$[$.FULL=3]="FULL"})(S||(Pe=S={},Pe));let Qe=[],Re=[];const Se=r=>db&&db.length>=r?db:db=new Int32Array(r),Te=r=>eb&&eb.length>=r?eb:eb=new Int32Array(r);const Rb=(r,$,e,a,t)=>{const c=$.length,l=r.linear;if(r.distance=c,t!==S.ONLY_DISTANCE){for(let r=0,e=0;r<c;r++,e+=3)l[e]=a,l[e+1]=r,l[e+2]=$[r];if(t===S.FULL){const a=r[e];for(let r=0;r<c;r++)a[r]=$[r]}}return r},Ue=(r,$,e=S.FULL,a=V)=>{const t={distance:0,adds:{},dels:{},const:{},linear:[]};if(r===$||null==r&&null==$)return t;if(null==r||0===r.length)return Rb(t,$,"adds",1,e);if(null==$||0===$.length)return Rb(t,r,"dels",-1,e);const c=r.length>=$.length;let l,h,n,o;c?(l=$,h=r):(l=r,h=$),n=l.length,o=h.length;const d=n+1,i=o-n,s=i+d,z=n+o+3,J=Te(z).fill(-1,0,z),f=Se(z).fill(-1,0,z),v=Qe,p=Re,u=(r,$,e)=>{let t,c;$>e?(t=J[r-1],c=$):(t=J[r+1],c=e);let i=c-(r-d);for(;i<n&&c<o&&a(l[i],h[c]);)i++,c++;J[r]=p.length/3,p.push(i,c,t),f[r]=c};let P,_=-1;do{for(P=-++_+d;P<s;P++)u(P,f[P-1]+1,f[P+1]);for(P=s+_;P>s;P--)u(P,f[P-1]+1,f[P+1]);u(s,f[s-1]+1,f[s+1])}while(f[s]!==o);if(t.distance=i+2*_,e!==S.ONLY_DISTANCE){for(_=3*J[s];_>=0;)v.push(_),_=3*p[_+2];e===S.FULL?Ve(v,p,t,l,h,c):We(v,p,t,l,h,c,e===S.ONLY_DISTANCE_LINEAR)}return v.length=0,p.length=0,t};const Ve=(r,$,e,a,t,c)=>{const l=e.linear,h=e.const;let n,o,d,i,s=r.length,z=0,J=0;for(c?(n=e.dels,o=e.adds,d=-1,i=1):(n=e.adds,o=e.dels,d=1,i=-1);--s>=0;){const e=r[s],c=$[e],f=$[e+1],v=f-c;for(;z<c||J<f;){const r=J-z;v>r?(l.push(d,J,n[J]=t[J]),J++):v<r?(l.push(i,z,o[z]=a[z]),z++):(l.push(0,z,h[z]=a[z]),z++,J++)}}},We=(r,$,e,a,t,c,l)=>{const h=e.linear,n=c?-1:1,o=c?1:-1;let d=r.length,i=0,s=0;for(;--d>=0;){const e=r[d],c=$[e],z=$[e+1],J=z-c;for(;i<c||s<z;){const r=s-i;J>r?(h.push(n,s,t[s]),s++):J<r?(h.push(o,i,a[i]),i++):(l&&h.push(0,i,a[i]),i++,s++)}}};const Xe=(t,$,e=S.FULL,i=V)=>t===$?{distance:0}:e===S.ONLY_DISTANCE?Ye(t,$,i):Ze(t,$,i);const Ye=(t,$,e)=>{t||(t={}),$||($={});let i=0;for(let r in t){const f=$[r];(void 0===f||!e(t[r],f))&&i++}for(let r in $)!(r in t)&&i++;return{distance:i}},Ze=(t,$,e)=>{t||(t={}),$||($={});let i=0;const r=[],f=[],o=[];for(let O in t){const r=$[O];void 0===r?(f.push(O),i++):e(t[O],r)||(o.push(O,r),i++)}for(let O in $)O in t||(r.push(O),i++);return{distance:i,adds:r,dels:f,edits:o}};const Fa=Array.isArray,$e=Math.max,Sb=Object.getPrototypeOf({}),Tb=(()=>{const e=new Array(2048);for(let t=2,$=e.length;t<$;t++)e[t]=t-2;return e})(),_e=e=>{if(e<=Tb.length)return Tb.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t},Ub=(e,t,$,r,i,o=0)=>{const n=i[1];if(n.__skip)return;if(!1===n.__diff)return ta(r),void t.replaceChild(e,$,o,i);const f=r[1];if(f&&f.__skip)return void t.replaceChild(e,$,o,i,!1);let s=n.__impl;if(s&&s!==t)return s.diffTree(e,s,$,r,i,o);const a=Ue(r,i,S.ONLY_DISTANCE_LINEAR,ua);if(0===a.distance)return;const h=a.linear,T=t.getChild($,o);let l,p,K,Q;if(0!==h[0]||r[1].key!==n.key)return ta(r),void t.replaceChild(e,$,o,i);if((Q=r.__release)&&Q!==i.__release&&ta(r),0!==h[3]&&(ef(t,T,r[1],i[1]),2===a.distance))return;const v=h.length,d=r.length-1,u=ff(h),c=_e(d+1);for(l=2,p=6;p<v;l++,p+=3)(K=h[p])&&(-1===K?af(e,t,T,r,i,h,p,u,c,d):bf(e,t,T,h,p,u,c,d));(Q=i.__init)&&Q!=r.__init&&Q.apply(i,[T,...i.__args])};const af=(e,t,$,r,i,o,n,f,s,a)=>{const h=o[n+2];if(Fa(h)){let T=h[1].key;if(void 0!==T&&void 0!==f[T][2]){const o=f[T];T=o[0],Ub(e,t,$,r[T],i[o[2]],s[T])}else{const e=o[n+1];ta(h),t.removeChild($,s[e]),cf(s,a,e)}}else"string"==typeof h&&t.setContent($,"")},bf=(e,t,$,r,i,o,n,f)=>{const s=r[i+2];if("string"==typeof s)t.setContent($,s);else if(Fa(s)){const a=s[1].key;if(void 0===a||void 0===o[a][0]){const o=r[i+1];t.createTree(e,$,s,n[o]),df(n,f,o)}}},cf=(e,t,$)=>{for(;t>$;t--)e[t]=$e(e[t]-1,0)},df=(e,t,$)=>{for(;t>=$;t--)e[t]++},ef=(e,t,$,r)=>{const i=Xe($,r,S.FULL,V);e.removeAttribs(t,i.dels,$);let o,n,f,s=ba;for(o=(f=i.edits).length;(o-=2)>=0;)"o"===(n=f[o])[0]&&"n"===n[1]&&e.removeAttribs(t,[n],$),"value"!==n?e.setAttrib(t,n,f[o+1],r):s=f[o+1];for(o=(f=i.adds).length;--o>=0;)"value"!==(n=f[o])?e.setAttrib(t,n,r[n],r):s=r[n];s!==ba&&e.setAttrib(t,"value",s,r)};const ta=e=>{if(Fa(e)){let t;if((t=e[1])&&!1===t.__release)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)ta(e[t])}};const ff=e=>{let t,$,r;const i={};for(let o=e.length;(o-=3)>=0;)$=e[o+2],Fa($)&&void 0!==(t=$[1].key)&&(!(r=i[t])&&(i[t]=r=[,,]),r[e[o]+1]=e[o+1]);return i},ua=(e,t)=>{let $;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=($=Object.getPrototypeOf(e))&&$!==Sb||null!=($=Object.getPrototypeOf(t))&&$!==Sb?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?Mb(e,t,ua):e instanceof Set&&t instanceof Set?Nb(e,t,ua):e instanceof Map&&t instanceof Map?Ob(e,t,ua):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:!(!1===e.__diff||!1===t.__diff)&&Pb(e,t,ua)))};const gf="http://www.w3.org/2000/svg";const hf={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&apos;"};const jf=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;const a=new RegExp(`[${Object.keys(hf).join("")}]`,"g");const kf={button:1,option:1,text:1,textarea:1};const Vb=e=>e.split(" ").reduce((e,t)=>(e[t]=!0,e),{}),lf=Vb("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view");const b=Vb("area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr ?xml");const mf=t=>{let $,r="";for(let e in t)$=t[e],_a($)&&($=$(t)),null!=$&&(r+=`${e}:${$};`);return r};const nf=(e,t)=>{if(null==e||!t||!t.length)return e;const r=Object.assign({},e);for(let n of t){const e=r[n];ia(e,"deref")&&(r[n]=e.deref())}return r};const Ga=X,Wb=Ib,Xb=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),Ha=(e,t,r,s,$,n=!0)=>{if(Ga(s)){const o=s[0];if("function"==typeof o)return Ha(e,t,r,o.apply(null,[e.ctx,...s.slice(1)]),$);const a=s[1];if(a.__impl)return a.__impl.createTree(e,r,s,$,n);const i=t.createElement(r,o,a,$);if(s.length>2){const r=s.length;for(let $=2;$<r;$++)Ha(e,t,i,s[$],void 0,n)}return n&&Xb(i,s),i}if(Wb(s)){const o=[];for(let a of s)o.push(Ha(e,t,r,a,$,n));return o}return null==s?r:t.createTextElement(r,s)};const Ia=(e,t,r,s,$=0)=>{if(Ga(s)){const n=t.getChild(r,$);"function"==typeof s[0]&&Ia(e,t,r,s[0].apply(null,[e.ctx,...s.slice(1)]),$);const o=s[1];if(o.__impl)return o.__impl.hydrateTree(e,r,s,$);Xb(n,s);for(let e in o)"o"===e[0]&&"n"===e[1]&&t.setAttrib(n,e,o[e]);for(let r=s.length,$=2;$<r;$++)Ia(e,t,n,s[$],$-2)}else if(Wb(s))for(let n of s)Ia(e,t,r,n,$),$++};const of=(e,t,r,s)=>{const $=lf[t]?document.createElementNS(gf,t):document.createElement(t);return r&&tf($,r),Yb(e,$,s)};const pf=(e,t,r)=>Yb(e,document.createTextNode(t),r);const Yb=(e,t,r)=>e?void 0===r?e.appendChild(t):e.insertBefore(t,e.children[r]):t;const qf=(e,t)=>e.children[t];const rf=(e,t,r,s,$,n=!0)=>(t.removeChild(r,s),t.createTree(e,r,$,s,n));const sf=(e,t)=>e.textContent=t;const tf=(e,t)=>{for(let r in t)Zb(e,r,t[r],t);return e};const Zb=(e,t,r,s)=>{if(t.startsWith("__"))return;const $="o"===t[0]&&"n"===t[1];if($||"function"!=typeof r||(r=r(s)),void 0!==r&&!1!==r)switch(t){case"style":wf(e,r);break;case"value":uf(e,r);break;case"accesskey":e.accessKey=r;break;case"contenteditable":e.contentEditable=r;break;case"tabindex":e.tabIndex=r;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=r;break;default:$?xf(e,t.substr(2),r):e.setAttribute(t,!0===r?"":r);}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e};const uf=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if(void 0!==(r=e.value)&&"string"==typeof t){const s=t.length-(r.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t;}};const vf=(e,t,r)=>{for(let s=t.length;--s>=0;){const $=t[s];"o"===$[0]&&"n"===$[1]?yf(e,$.substr(2),r[$]):e.hasAttribute($)?e.removeAttribute($):e[$]=null}};const wf=(e,t)=>(e.setAttribute("style",mf(t)),e);const xf=(e,t,r)=>Ga(r)?e.addEventListener(t,...r):e.addEventListener(t,r);const yf=(e,t,r)=>Ga(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r);const zf=(e,t)=>{const r=e.children[t];void 0!==r&&e.removeChild(r)};const Ja=X,Af=Ib,Bf=De,Cf=(e,r)=>{let $,i,t,n,a,o=e[0],l=Bf(e[1]);return"string"==typeof o&&($=jf.exec(o))||Ca(`${o} is not a valid tag name`),o!==(i=$[1])||!l||r&&!e[1].key?(a=l?Object.assign({},e[1]):{},t=$[2],n=$[3],t&&(a.id=t),n&&(n=n.replace(/\./g," "),a.class?a.class+=" "+n:a.class=n),a.__skip&&e.length<3?[i,a]:[i,a,...e.slice(l?2:1)]):e};const Df=(e,r)=>ca(r,e,e.ctx,[0],!1!==e.keys,!1!==e.span);const ca=(e,r,$,i,t,n)=>{if(null!=e){if(Ja(e)){if(0===e.length)return;let a,o,l=e[1];if(l&&(o=l.__impl)&&(o=o.normalizeTree))return o(r,e);const s=e[0];if("function"==typeof s)return ca(s.apply(null,[$,...e.slice(1)]),r,$,i,t,n);if("function"==typeof s.render){const o=[$,...e.slice(1)];return a=ca(s.render.apply(s,o),r,$,i,t,n),Ja(a)&&(a.__this=s,a.__init=s.init,a.__release=s.release,a.__args=o),a}if(!1===(l=(a=Cf(e,t))[1]).__normalize)return a;if(t&&void 0===l.key&&(l.key=i.join("-")),a.length>2){const e=a[0],o=[e,l];n=n&&!kf[e];for(let l=2,s=2,x=0,c=a.length;l<c;l++){let e=a[l];if(null!=e){const a=Ja(e);if(a&&Ja(e[0])||!a&&Af(e))for(let l of e)void 0!==(l=ca(l,r,$,i.concat(x),t,n))&&(o[s++]=l),x++;else void 0!==(e=ca(e,r,$,i.concat(x),t,n))&&(o[s++]=e),x++}}return o}return a}return"function"==typeof e?ca(e($),r,$,i,t,n):"function"==typeof e.toHiccup?ca(e.toHiccup(r.ctx),r,$,i,t,n):"function"==typeof e.deref?ca(e.deref(),r,$,i,t,n):n?["span",t?{key:i.join("-")}:{},e.toString()]:e.toString()}};const Ef={createTree(e,t,r,$,i){return Ha(e,this,t,r,$,i)},hydrateTree(e,t,r,$){return Ia(e,this,t,r,$)},diffTree(e,t,r,$,i){Ub(e,this,t,r,$,i)},normalizeTree:Df,getElementById:e=>document.getElementById(e),getChild:qf,createElement:of,createTextElement:pf,replaceChild(e,t,r,$,i){rf(e,this,t,r,$,i)},removeChild:zf,setContent:sf,removeAttribs:vf,setAttrib:Zb};const Ff=(e,o)=>sa(e)?o.getElementById(e):e;const Gf=(e,r={},t=Ef)=>{const a=Object.assign({root:"app"},r);let $=[],n=!0;const o=Ff(a.root,t),i=()=>{if(n){a.ctx=nf(r.ctx,a.autoDerefKeys);const f=t.normalizeTree(a,e);null!=f&&(a.hydrate?(t.hydrateTree(a,o,f),a.hydrate=!1):t.diffTree(a,o,$,f),$=f),n&&requestAnimationFrame(i)}};return requestAnimationFrame(i),()=>n=!1};const E="--set-value";const da="--update-value";const Hf="--toggle-value";const fb="--cancel";const If="--dispatch";const B="--dispatch-async";const g="--dispatch-now";const $b="--delay";const Jf="--fetch";const N="--state";const Kf="--redo";const Lf="--undo";let ja=ve;class Mf{constructor(t,e){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),t&&this.addHandlers(t),e&&this.addEffects(e)}addBuiltIns(){this.addEffects({[If]:[t=>this.dispatch(t),-999],[B]:[([t,e,r,s],i,$)=>{const o=this.effects[t];if(o){const t=o(e,i,$);Ee(t)?t.then(t=>this.dispatch([r,t])).catch(t=>this.dispatch([s,t])):ja.warn("async effect did not return Promise")}else ja.warn(`skipping invalid async effect: ${t}`)},-999],[$b]:[([t,e])=>new Promise(r=>setTimeout(()=>r(e),t)),1e3],[Jf]:[t=>fetch(t).then(t=>{if(!t.ok)throw new Error(t.statusText);return t}),1e3]})}addHandler(t,e){const r=this.interceptorsFromSpec(e);r.length>0?(this.handlers[t]&&(this.removeHandler(t),ja.warn(`overriding handler for ID: ${t}`)),this.handlers[t]=r):Ca(`no handlers in spec for ID: ${t}`)}addHandlers(t){for(let e in t)this.addHandler(e,t[e])}addEffect(t,e,r=1){this.effects[t]&&(this.removeEffect(t),ja.warn(`overriding effect for ID: ${t}`)),this.effects[t]=e;const s=[t,r],i=this.priorities;for(let $=0;$<i.length;$++)if(s[1]<i[$][1])return void i.splice($,0,s);i.push(s)}addEffects(t){for(let e in t){const r=t[e];X(r)?this.addEffect(e,r[0],r[1]):this.addEffect(e,r)}}instrumentWith(t,e){const r=t.map(_b),s=this.handlers;for(let i of e||Object.keys(s)){const t=s[i];t&&(s[i]=r.concat(t))}}removeHandler(t){delete this.handlers[t]}removeHandlers(t){for(let e of t)this.removeHandler(e)}removeEffect(t){delete this.effects[t];const e=this.priorities;for(let r=e.length-1;r>=0;r--)if(t===e[r][0])return void e.splice(r,1)}removeEffects(t){for(let e of t)this.removeEffect(e)}context(){return this.currCtx}dispatch(...t){this.eventQueue.push(...t)}dispatchNow(...t){(this.currQueue||this.eventQueue).push(...t)}dispatchLater(t,e=17){setTimeout(()=>this.dispatch(t),e)}processQueue(t){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=t||{};for(let e of this.currQueue)this.processEvent(t,e);return this.currQueue=this.currCtx=void 0,this.processEffects(t),!0}return!1}processEvent(t,e){const r=this.handlers[e[0]];r?this.processForward(t,r,e)&&this.processReverse(t,r,e):ja.warn(`missing handler for event type: ${e[0].toString()}`)}processForward(t,e,r){let s=!1;for(let i=0,$=e.length;i<$&&!t[fb];i++){const $=e[i];$.pre&&this.mergeEffects(t,$.pre(t[N],r,this,t)),s=s||!!$.post}return s}processReverse(t,e,r){for(let s=e.length;--s>=0&&!t[fb];){const i=e[s];i.post&&this.mergeEffects(t,i.post(t[N],r,this,t))}}processEffects(t){const e=this.effects;for(let r of this.priorities){const s=r[0],i=t[s];void 0!==i&&this.processEffect(t,e,s,i)}}processEffect(t,e,r,s){const i=e[r];if(r!==N)for(let $ of s)i($,this,t);else i(s,this,t)}mergeEffects(t,e){if(e)for(let r in e){const s=e[r];if(null!=s)if(r===N||r===fb)t[r]=s;else if(r===g){if(X(s[0]))for(let t of s)t&&this.dispatchNow(t);else this.dispatchNow(s);}else if(t[r]||(t[r]=[]),X(s[0]))for(let e of s)void 0!==e&&t[r].push(e);else t[r].push(s)}}interceptorsFromSpec(t){return X(t)?t.map(_b):_a(t)?[{pre:t}]:[t]}}class Nf extends Mf{constructor(t,e,r){super(e,r),this.state=t||new Kb({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[E]:(t,[e,[r,s]])=>({[N]:cb(t,r,s)}),[da]:(t,[e,[r,s,...i]])=>({[N]:Ea(t,r,s,...i)}),[Hf]:(t,[e,r])=>({[N]:Ea(t,r,t=>!t)}),[Lf]:ac("undo"),[Kf]:ac("redo")}),this.addEffects({[N]:[t=>this.state.reset(t),-1e3]})}processQueue(t){if(this.eventQueue.length>0){const e=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=Object.assign(Object.assign({},t),{[N]:e});for(let r of this.currQueue)this.processEvent(t,r);return this.currQueue=this.currCtx=void 0,this.processEffects(t),this.state.deref()!==e}return!1}}const _b=t=>_a(t)?{pre:t}:t,ac=t=>(e,[r,s],i,$)=>{const o=s?s[0]:"history";if(ia($[o],t)){const e=$[o][t]();return{[N]:i.state.deref(),[g]:s?void 0!==e?s[1]:s[2]:void 0}}ja.warn("no history in context")};const Of=(e,$)=>console.log("event:",$);const Pf=(e,$)=>{const t=He(e);return(e,[r,o])=>({[N]:t(e,$?$(o):o)})};const U=(e,$)=>{const t=Ke(e,$);return(e,[$,...r])=>({[N]:t(e,...r)})};const va="route-changed";let Qf=(()=>{let t=class{constructor(t){if(t.authenticator=t.authenticator||((t,i,r)=>({id:t.id,title:t.title,params:r})),t.prefix=void 0===t.prefix?"/":t.prefix,t.separator=t.separator||"/",this.config=t,Za(void 0!==this.routeForID(this.config.defaultRouteID),`missing config for default route: '${this.config.defaultRouteID}'`),t.initialRouteID){const i=this.routeForID(t.initialRouteID);Za(void 0!==i,`missing config for initial route: ${this.config.initialRouteID}`),Za(!Rf(i),"initial route MUST not be parametric")}}addListener(t,i,r){}removeListener(t,i,r){}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:va,value:this.current})}}route(t){"#"===t.charAt(0)&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);const i=this.config.routes,r=t.split(this.config.separator);let e;for(let o=0,a=i.length;o<a;o++){const t=i[o],a=this.matchRoute(r,t);if(a){e=a;break}}if(!e){if(!this.handleRouteFailure())return;const t=this.routeForID(this.config.defaultRouteID);e={id:t.id,title:t.title,params:{}}}return V(e,this.current)||(this.current=e,this.notify({id:va,value:e})),e}format(...t){let i,[r,e,o]=t;switch(t.length){case 3:i={id:r,params:e};break;case 2:sa(r)?i={id:r,params:e}:(o=e,i=r);break;case 1:i=sa(r)?{id:r}:r;break;default:ra(t.length);}const a=this.routeForID(i.id);if(a){const t=i.params||{};return(o?"#":"")+this.config.prefix+a.match.map(i=>"?"===i.charAt(0)?null!=(i=t[i.substr(1)])?i:"NULL":i).join(this.config.separator)}Ca(`invalid route ID: ${i.id}`)}routeForID(t){return this.config.routes.find(i=>i.id===t)}matchRoute(t,i){const r=i.match,e=r.length;if(t.length===e){const o={};for(let i=0;i<e;i++){const e=r[i];if("?"===e.charAt(0))o[e.substr(1)]=t[i];else if(t[i]!==e)return}if(i.validate&&!this.validateRouteParams(o,i.validate))return;return i.auth?this.config.authenticator(i,t,o):{id:i.id,title:i.title,params:o}}}validateRouteParams(t,i){for(let r in i)if(void 0!==t[r]){const e=i[r];if(e.coerce&&(t[r]=e.coerce(t[r])),e.check&&!e.check(t[r]))return!1}return!0}handleRouteFailure(){return!0}};return t=Bb([we],t)})();const Rf=t=>t.match.some(t=>"?"===t.charAt(0));class Sf extends Qf{constructor(t){super(t),this.useFragment=!1!==t.useFragment,this.ignoreHashChange=!1}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(t,e=!0){const i=this.current,r=super.route(t);return r&&!V(r,i)&&(this.currentPath=this.format(r),e&&history.pushState(this.currentPath,r.title||window.document.title||"",this.currentPath)),r}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let e;switch(t.length){case 2:e={id:t[0],params:t[1]};break;case 1:e=sa(t[0])?{id:t[0]}:t[0];break;default:ra(t.length);}return super.format(e,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const e=t.newURL.substr(t.newURL.indexOf("#"));e!==this.currentPath&&this.route(e,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}function Tf(e,r,o){const n=e.ui.debug;return["div#debug",n.container,[w,[nc],n.debugToggle,r?"close\u25BC":"open\u25B2"],["pre",r?n.open:n.close,["div",{class:"flex-1 flex overflow-hidden"},["div",{class:"flex-1 overflow-y-scroll"},o]]]]}const bc="done";const D="error";const m="set-status";const Y="route-to";const ka="route-to-entry";const cc="route-to-new-entry";const dc="route-to-edit-entry";const ec="route-to-search-entry";const fc="toggle-nav";const gc="toggle-account";const gb="close-account";const hc="toggle-notification";const hb="close-notification";const ic="toggle-delete-opinion";const Ka="close-delete-opinion";const jc="toggle-report";const La="close-report";const wa="set-report";const kc="set-opinion-report";const lc="create-report";const mc="create-report-success";const nc="toggle-debug";const oc="set-input";const pc="get-entry";const qc="receive-entry";const ib="get-user";const rc="receive-user";const sc="get-token";const tc="receive-token";const uc="sign-out";const vc="sign-out-success";const Ma="set-opinion-template";const jb="set-opinion";const wc="create-opinion";const xc="create-opinion-success";const Na="append-opinion";const kb="remove-opinion";const yc="delete-opinion";const zc="delete-opinion-success";const lb="set-temp-opinion";const Ac="edit-opinion";const Bc="cancel-edit-opinion";const Cc="update-opinion";const Dc="update-opinion-success";const Ec="set-new-entry";const Fc="set-new-entry-template";const Gc="get-wiki-new";const Hc="receive-wiki-new";const Ic="get-wiki-temp";const Jc="receive-wiki-temp";const Kc="create-entry";const Lc="create-entry-success";const Mc="update-entry";const Nc="update-entry-success";const Oc="set-temp-entry";const Pc="set-temp-entry-template";const mb="search-entry";const Qc="search-entry-success";const xa="route-to-search-entry-page";const Rc="get-vote";const Sc="receive-vote";const Tc="create-vote";const Uc="create-vote-success";const Vc="delete-vote";const Wc="delete-vote-success";const Xc="append-vote";const Yc="remove-vote";const nb="get-entry-w-activity";const Zc="get-notification";const $c="receive-notification";const _c="update-notification";const ad="update-notification-success";const ob="create-notification";const bd="create-notification-success";const cd="delete-notification";const dd="delete-notification-success";const ed="append-notification";const fd="remove-notification";const gd="get-new-notifications";const hd="receive-new-notifications";const id="mark-new-notifications";const jd="view-new-notifications";const ya="toggle-vote-lock";function w(t,e,n,$){return["button",Object.assign(Object.assign({},n),{onclick:n=>{n.preventDefault(),t.bus.dispatch(e)}}),$]}function Uf(e){const i=e.views.isNavOpen.deref(),r=e.views.user.deref(),$=e.ui.nav;return["nav",{class:"sm:flex sm:justify-between sm:items-center px-6 py-3"},["div",{class:"flex items-center justify-between px-4 py-3 sm:p-0"},Vf,["div",{class:"flex items-center justify-end space-x-2"},[w,[fc],{class:"block sm:hidden"},["div",{class:"h-8 w-8 md:h-10 md:w-10"},i?cg:dg]],void 0!==r.name?["div",{class:"flex flex-row"},["div",{class:"block sm:hidden z-10 self-center"},nd],["div",{class:"block sm:hidden z-10"},md]]:[]]],Wf,["div",i?$.inner.open:$.inner.close,[Qa,Oa.id,null,$.link,["div",{class:"flex flex-row items-center space-x-2"},["div",{class:"h-4 w-4"},Xf],["div","New"]]],[Qa,la.id,null,$.link,["div",{class:"flex flex-row items-center space-x-2"},["div",{class:"h-4 w-4"},fg],["div","About"]]],[Qa,pb.id,null,$.link,["div",{class:"flex flex-row items-center space-x-2"},["div",{class:"h-4 w-4"},Yf],["div","Contact"]]],void 0===r.name?[Qa,Pa.id,null,$.link,["div",{class:"flex flex-row items-center justify-center self-center"},["div",{class:"h-4 w-4 mr-2"},jg],["div","Sign_in"]]]:["div",{class:"flex flex-row space-x"},["div",{class:"hidden sm:block self-center"},nd],["div",{class:"hidden sm:block self-center"},md]]]]}const la={id:"about",match:["about"]};const pb={id:"contact",match:["contact"]};const qb={id:"search",match:["search","?id","?page"],validate:{page:{check:t=>Be(t)}}};const rb={id:"entry-detail",match:["entry","?id"],validate:{id:{coerce:t=>t.toLowerCase(),check:t=>t.toLowerCase()===t}}};const Oa={id:"new-entry",match:["new_entry","?id"],validate:{id:{coerce:t=>t.toLowerCase(),check:t=>t.toLowerCase()===t}}};const sb={id:"edit-entry",match:["edit_entry","?id"],validate:{id:{coerce:t=>t.toLowerCase(),check:t=>t.toLowerCase()===t}}};const Pa={id:"sign-in",match:["sign_in"]};const kd={id:"github-oauth-cb",match:["github_oauth_cb"]};function Vf(L){const C=L.ui.logo;return["div",C.container,["svg",Object.assign(Object.assign({},C.m),{viewBox:"0 0 60 60",fill:"#653C8A",xmlns:"http://www.w3.org/2000/svg"}),["path",{d:"M53.4082031,49.7421875 L44.3017578,49.7421875 L42.2021484,34.2880859 C42.0556633,33.1975857 41.9213873,31.9850327 41.7993164,30.6503906 C41.6772455,29.3157485 41.5673833,27.8590574 41.4697266,26.2802734 C41.2418608,27.7939529 40.7942742,29.6819548 40.1269531,31.9443359 C39.980468,32.4163435 39.8746748,32.7662749 39.8095703,32.9941406 L34.9511719,49.7421875 L28.4570312,49.7421875 L23.5986328,32.9941406 C23.5335283,32.7662749 23.435873,32.4163435 23.3056641,31.9443359 C22.6220669,29.6819548 22.1744802,27.8020908 21.9628906,26.3046875 C21.8652339,27.6556057 21.7513027,28.9942968 21.6210938,30.3208008 C21.4908848,31.6473048 21.3362639,32.96972 21.1572266,34.2880859 L19.0576172,49.7421875 L10,49.7421875 L15.5175781,14 L25.1611328,14 L30.5566406,32.4326172 C30.5891929,32.5628262 30.6542964,32.7744126 30.7519531,33.0673828 C31.2565129,34.7112712 31.5738926,36.1191348 31.7041016,37.2910156 C31.7692061,36.6562468 31.8912751,35.9523151 32.0703125,35.1791992 C32.2493499,34.4060834 32.493488,33.4742893 32.8027344,32.3837891 L38.2470703,14 L47.9150391,14 L53.4082031,49.7421875 Z",id:"M"}]],["svg",Object.assign(Object.assign({},C.mxs),{viewBox:"0 0 300 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),["g",{stroke:"none","stroke-width":"1",fill:"#000000","fill-rule":"evenodd"},["path",{d:"M3.28,49.4 L3.28,20.88 L8.16,20.88 L8.16,49.4 L3.28,49.4 Z M4.52,14.32 L8.16,11.84 C10.16,14.12 12.88,17.24 14.12,19.32 L10.16,22.12 C9.08,20 6.52,16.68 4.52,14.32 Z M36.88,13.44 L36.88,44.04 C36.88,46.68 36.28,47.88 34.6,48.64 C32.96,49.4 30.4,49.48 26.68,49.44 C26.48,48.16 25.8,46.16 25.12,44.96 C27.44,45.08 30.2,45.08 30.96,45.04 C31.76,45.04 32.04,44.8 32.04,44 L32.04,18 L14.6,18 L14.6,13.44 L36.88,13.44 Z M48.44,12.24 L52.8,13.56 C51.96,16.04 50.96,18.64 49.84,21.12 L49.84,49.44 L45.32,49.44 L45.32,29.44 C44.52,30.64 43.68,31.8 42.8,32.8 C42.4,31.68 41.28,28.92 40.52,27.68 C43.72,23.92 46.68,18.08 48.44,12.24 Z M56.2,23.28 L56.2,28.84 C59.04,28.12 61.6,27.16 63.84,25.88 C62.72,24.88 61.72,23.84 60.88,22.8 C60.16,23.68 59.36,24.48 58.56,25.2 C58.04,24.68 57.08,23.92 56.2,23.28 Z M70.24,19.96 L63.2,19.96 C64.2,21.24 65.48,22.52 67.04,23.64 C68.32,22.56 69.36,21.36 70.24,19.96 Z M78.2,19.96 L75.2,19.96 C74.04,22.24 72.52,24.16 70.76,25.84 C73.24,27.04 76.16,28 79.48,28.52 C78.64,29.4 77.48,31.2 76.92,32.32 C73.24,31.52 70.04,30.16 67.4,28.52 C64.72,30.28 61.64,31.64 58.28,32.64 C57.92,31.92 57,30.68 56.2,29.76 L56.2,42.8 L52.08,42.8 L52.08,17.2 L56.2,17.2 L56.2,21.44 C58.8,19 60.96,15.6 62.2,12.12 L66.52,13.12 C66.12,14.12 65.68,15.16 65.2,16.12 L78.2,16.12 L78.2,19.96 Z M71.52,34.12 L74.92,35.52 C71.76,38.96 66.44,41.36 61,42.76 C60.48,41.88 59.52,40.56 58.68,39.8 C63.68,38.76 68.88,36.76 71.52,34.12 Z M67.6,30.48 L71.08,31.92 C68.6,34.44 64.64,36.32 60.92,37.52 C60.36,36.64 59.32,35.52 58.4,34.8 C61.8,33.92 65.64,32.28 67.6,30.48 Z M74.4,38.64 L78.48,40.28 C74.32,45.16 67.24,47.84 59.08,49.32 C58.56,48.16 57.6,46.6 56.68,45.56 C64.04,44.56 70.96,42.4 74.4,38.64 Z M89.12,33.12 L89.12,35.84 L94.48,35.84 L94.48,33.12 L89.12,33.12 Z M94.48,21 L89.12,21 L89.12,23.36 L94.48,23.36 L94.48,21 Z M89.12,27 L89.12,29.48 L94.48,29.48 L94.48,27 L89.12,27 Z M101.36,35.84 L101.36,40 L81.32,40 L81.32,35.84 L84.84,35.84 L84.84,21 L81.8,21 L81.8,16.84 L84.84,16.84 L84.84,12.56 L89.12,12.56 L89.12,16.84 L94.48,16.84 L94.48,12.56 L98.84,12.56 L98.84,16.84 L101.2,16.84 L101.2,21 L98.84,21 L98.84,35.84 L101.36,35.84 Z M86.32,40.28 L90.76,41.56 C89.44,44.44 87.12,47.44 85.08,49.32 C84.24,48.52 82.4,47.16 81.32,46.52 C83.28,45 85.24,42.56 86.32,40.28 Z M118.72,25.24 L118.72,29.64 L115.28,29.64 L115.28,49.44 L110.76,49.44 L110.76,29.64 L107.08,29.64 L107.08,30.96 C107.08,38.32 106.24,44.92 101.24,50.36 C100.48,49.32 99,48.04 97.92,47.28 C98.4,46.72 98.84,46.16 99.24,45.6 L95.4,47.48 C94.76,46.04 93.24,43.72 92.04,42.08 L95.84,40.32 C97.04,41.88 98.6,43.96 99.36,45.4 C102.28,41.04 102.72,36.04 102.72,30.96 L102.72,16.44 C107.12,15.32 111.96,13.64 114.84,11.92 L118.64,15.32 C115.32,16.96 111.12,18.36 107.08,19.36 L107.08,25.24 L118.72,25.24 Z M134.88,30.8 C134.88,28 137.2,25.68 140,25.68 C142.8,25.68 145.12,28 145.12,30.8 C145.12,33.6 142.8,35.92 140,35.92 C137.2,35.92 134.88,33.6 134.88,30.8 Z M161.4,46 L161.4,16.28 L166.72,16.28 L169.08,26.04 L169.92,30.68 L170.08,30.68 L170.96,26.04 L173.28,16.28 L178.6,16.28 L178.6,46 L174.04,46 L174.04,34.32 C174.04,31.32 174.8,25.04 175.08,22.08 L174.92,22.08 L173.16,29.72 L171.2,37.4 L168.68,37.4 L166.72,29.72 L164.92,22.08 L164.76,22.08 C165.04,25.04 165.88,31.32 165.88,34.32 L165.88,46 L161.4,46 Z M191.24,46.48 C185.8,46.48 181.48,42.2 181.48,34.76 C181.48,27.48 185.84,23.04 190.52,23.04 C195.76,23.04 198.44,27.48 198.44,33.72 C198.44,34.8 198.32,35.92 198.24,36.48 L187.24,36.48 C187.6,40.12 189.4,42 192,42 C193.36,42 194.44,41.6 195.64,40.88 L197.64,44.44 C195.84,45.76 193.56,46.48 191.24,46.48 Z M187.12,32.44 L193.48,32.44 C193.48,29.4 192.56,27.52 190.64,27.52 C188.92,27.52 187.4,29.2 187.12,32.44 Z M201.88,46 L201.88,23.52 L206.64,23.52 L207.04,26.24 L207.2,26.24 C208.56,24.48 210.44,23.04 213.04,23.04 C216.8,23.04 218.4,25.84 218.4,30.8 L218.4,46 L212.44,46 L212.44,31.32 C212.44,28.92 211.96,28 210.52,28 C209.48,28 208.6,28.84 207.8,30.36 L207.8,46 L201.88,46 Z M231.84,46.56 C226.24,46.56 221.84,42.2 221.84,34.76 C221.84,27.28 226.76,23 232.28,23 C234.84,23 236.64,23.92 238.12,25.36 L235.32,29.12 C234.44,28.16 233.68,27.72 232.64,27.72 C229.76,27.72 227.88,30.56 227.88,34.76 C227.88,39 229.88,41.76 232.48,41.76 C233.88,41.76 235.16,41.12 236.16,40.08 L238.48,43.92 C236.6,45.8 234.12,46.56 231.84,46.56 Z M248.8,46 L248.8,28.16 L242.32,28.16 L242.32,23.52 L254.76,23.52 L254.76,46 L248.8,46 Z M251.44,19.88 C249.36,19.88 247.88,18.56 247.88,16.64 C247.88,14.76 249.36,13.36 251.44,13.36 C253.48,13.36 254.96,14.76 254.96,16.64 C254.96,18.56 253.48,19.88 251.44,19.88 Z M266.76,46.48 C263,46.48 261.44,43.68 261.44,38.72 L261.44,23.52 L267.36,23.52 L267.36,38 C267.36,40.4 267.72,41.52 269.24,41.52 C270.28,41.52 271.08,40.68 271.84,39.16 L271.84,23.52 L277.8,23.52 L277.8,46 L273.04,46 L272.64,43.28 L272.48,43.28 C271.08,45.04 269.36,46.48 266.76,46.48 Z M289.6,46.56 C286.44,46.56 283.64,45.28 281.32,43.4 L284,39.72 C286.12,41.24 287.48,42.2 289.68,42.2 C291.76,42.2 292.68,41.16 292.68,39.8 C292.68,38.08 290.64,37.44 288.28,36.4 C285.64,35.28 282.44,33.6 282.44,29.8 C282.44,25.8 285.56,23 290.52,23 C293.88,23 295.88,24.28 297.8,25.72 L295.16,29.28 C293.48,28.12 292.44,27.36 290.64,27.36 C288.84,27.36 287.92,28.28 287.92,29.56 C287.92,31.2 289.84,31.68 292.24,32.68 C294.92,33.76 298.2,35.32 298.2,39.48 C298.2,43.4 295.16,46.56 289.6,46.56 Z",id:"\u95E8\u4FEE\u65AF\u30FBMencius"}]]]]}function Qa(e,t,r,$,n){return["a",Object.assign(Object.assign({},$),{onclick:$=>{$.preventDefault(),e.bus.dispatch([Y,[t,r]])}}),n]}function Wf(e){const r=e.bus,n=e.views.input.deref();e.views.entries.deref();return["div",{class:"w-full xl:px-24 px-4 pt-2 pb-6"},["div",{class:"relative"},["input",{id:"entry_search",class:"transition bg-white shadow-md focus:outline-0 border border-transparent placeholder-gray-700 rounded-lg py-2 pr-4 pl-10 block w-full appearance-none leading-normal",placeholder:"\u641C\u5BFB\u6761\u76EE / Search Entries",type:"text",oninput:e=>{r.dispatch([oc,e.target.value])},onkeyup:e=>{"Enter"===e.key&&r.dispatch([xa,{id:n,page:1}])}}],["div",{class:"pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center"},["div",{class:"fill-current pointer-events-none text-gray-600 w-4 h-4"},hg]]]]}const Xf=["svg",{viewBox:"0 0 16 16"},["path",{d:"M8 14.5c3.6 0 6.5-2.9 6.5-6.5S11.6 1.5 8 1.5 1.5 4.4 1.5 8s2.9 6.5 6.5 6.5zM8 16c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z"}],["path",{d:"M7 7V4h2v3h3v2H9v3H7V9H4V7h3z"}]];const Yf=["svg",{viewBox:"0 0 16 16"},["path",{d:"M3 8V7h6v1zM3 5V4h10v1z"}],["path",{d:"M11.7 12l-3.9 4-.7-.7 4.1-4.3H14c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H2c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h5.5v1H2c-1.1 0-2-.9-2-2V2C0 .9.9 0 2 0h12c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2h-2.3z"}]];const Zf=["svg",{viewBox:"0 0 7 12"},["path",{d:"M1.45 6.002L7 11.27l-.685.726L0 6.003 6.315 0 7 .726z","fill-rule":"nonzero"}]];const $f=["svg",{viewBox:"0 0 7 12"},["path",{d:"M5.569 5.994L0 .726.687 0l6.336 5.994-6.335 6.002L0 11.27z","fill-rule":"nonzero"}]];const _f=["svg",{viewBox:"0 0 16 10"},["g",{"fill-rule":"nonzero"},["path",{d:"M1.363 5.098l2.928 3.16-.733.68L0 5.098l3.558-3.84.733.68zM14.637 5.098l-2.928-3.16.733-.68L16 5.098l-3.558 3.84-.733-.68zM6.466 10l-.927-.388L9.56 0l.927.388z"}]]];const ag=["svg",{viewBox:"0 0 12 16"},["path",{d:"M11 4v11c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1V4H0V3h12v1h-1zM2 4v11h8V4H2z"}],["path",{d:"M4 6h1v7H4zM7 6h1v7H7zM3 1V0h6v1z"}]];const ld=["svg",{viewBox:"0 0 16 16"},["g",{"fill-rule":"nonzero"},["path",{d:"M7.926 3.38L1.002 9.72V12h2.304l6.926-6.316L7.926 3.38zm.738-.675l2.308 2.304 1.451-1.324-2.308-2.309-1.451 1.329zM.002 9.28L9.439.639a1 1 0 0 1 1.383.03l2.309 2.309a1 1 0 0 1-.034 1.446L3.694 13H.002V9.28zM0 16.013v-1h16v1z"}]]];const bg=["svg",{viewBox:"0 0 16 15"},["path",{d:"M11.7 12l-3 3-.7-.7 3.3-3.3h3.2c.3 0 .5-.2.5-.5v-6c0-.3-.2-.5-.5-.5h-10c-.3 0-.5.2-.5.5v6c0 .3.2.5.5.5H8v1H4.5c-.8 0-1.5-.7-1.5-1.5v-6C3 3.7 3.7 3 4.5 3h10c.8 0 1.5.7 1.5 1.5v6c0 .8-.7 1.5-1.5 1.5h-2.8z"}],["path",{d:"M1 8H0V1.5C0 .7.7 0 1.5 0H8v1H1.5c-.3 0-.5.2-.5.5V8z"}]];const cg=["svg",{viewBox:"0 0 20 20"},["path",{"fill-rule":"nonzero",d:"M10 9.293l4.146-4.147.708.708L10.707 10l4.147 4.146-.708.708L10 10.707l-4.146 4.147-.708-.708L9.293 10 5.146 5.854l.708-.708L10 9.293z"}]];const dg=["svg",{viewBox:"0 0 20 20"},["g",{"fill-rule":"evenodd"},["path",{d:"M3 4h14v1H3zM3 10h14v1H3zM3 16h14v1H3z"}]]];const eg=["svg",{viewBox:"0 0 20 20"},["path",{"fill-rule":"nonzero",d:"M7.17 17H2.5a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .146-.354L4 12.293V9a6 6 0 0 1 5.5-5.98V1h1v2.02A6 6 0 0 1 16 9v3.293l1.854 1.853A.5.5 0 0 1 18 14.5v2a.5.5 0 0 1-.5.5h-4.67a3.001 3.001 0 0 1-5.66 0zm1.098 0a2 2 0 0 0 3.464 0H8.268zM13 16h4v-1.293l-1.854-1.853A.5.5 0 0 1 15 12.5V9A5 5 0 0 0 5 9v3.5a.5.5 0 0 1-.146.354L3 14.707V16h10z"}]];const fg=["svg",{viewBox:"0 0 16 16"},["g",{"fill-rule":"evenodd"},["path",{"fill-rule":"nonzero",d:"M8 14.5a6.5 6.5 0 1 0 0-13 6.5 6.5 0 0 0 0 13zM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"}],["path",{d:"M9 13H7V7h2z","fill-rule":"nonzero"}],["circle",{r:1,cy:4,cx:8}]]];const gg=["svg",{"fill-rule":"evenodd",viewBox:"0 0 24 21"},["path",{d:"M18 0H6L0 10.5 6 21h12l6-10.5L18 0zm4.5 10h-9.7l4.8-8.5 4.9 8.5zM6.3 19.4L1.4 11H11l-4.7 8.4zm5.6-7.8l4.8 8.4H7.2l4.7-8.4zm0-2.1L7 1h9.7l-4.8 8.5zM6.2 1.6L11 10H1.5l4.7-8.4zm11.5 18L12.8 11h9.8l-4.9 8.6z"}]];const hg=["svg",{viewBox:"0 0 16 16"},["path",{"fill-rule":"nonzero",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zm4.936-1.27l4.563 4.557-.707.708-4.563-4.558a6.5 6.5 0 1 1 .707-.707z"}]];const ig=["svg",{"fill-rule":"evenodd",viewBox:"0 0 23 23"},["path",{d:"M20.5 9c-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5S21.9 9 20.5 9zm0 4c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5c0 .9-.7 1.5-1.5 1.5zM5 11.5C5 10.1 3.9 9 2.5 9S0 10.1 0 11.5 1.1 14 2.5 14 5 12.9 5 11.5zM2.5 13c-.8 0-1.5-.6-1.5-1.5 0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5c0 .9-.7 1.5-1.5 1.5zM12 18v-4c1.1-.2 2-1.2 2-2.5 0-1.2-.9-2.2-2-2.5V5c1.1-.2 2-1.2 2-2.5C14 1.1 12.9 0 11.5 0S9 1.1 9 2.5c0 1.2.9 2.2 2 2.5v4c-1.1.2-2 1.2-2 2.5 0 1.2.9 2.2 2 2.5v4c-1.1.2-2 1.2-2 2.5 0 1.4 1.1 2.5 2.5 2.5s2.5-1.1 2.5-2.5c0-1.2-.8-2.2-2-2.5zM10 2.5c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5S12.3 4 11.5 4 10 3.3 10 2.5zm0 9c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5zM11.5 22c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5z"}],["path",{d:"M9 6.5C9 5.1 7.9 4 6.5 4S4 5.1 4 6.5c0 1.2.9 2.2 2 2.5v5.1c-1.1.2-2 1.2-2 2.5S5.1 19 6.5 19 9 17.9 9 16.5c0-1.2-.9-2.2-2-2.5V8.9c1.1-.2 2-1.2 2-2.4zm-4 0C5 5.7 5.7 5 6.5 5S8 5.7 8 6.5 7.3 8 6.5 8 5 7.3 5 6.5zm3 10c0 .9-.7 1.5-1.5 1.5S5 17.4 5 16.5 5.7 15 6.5 15s1.5.7 1.5 1.5zM17 14.1V8.9c1.1-.2 2-1.2 2-2.5S17.9 4 16.5 4 14 5.1 14 6.5c0 1.2.9 2.2 2 2.5v5.1c-1.1.2-2 1.2-2 2.5 0 1.4 1.1 2.5 2.5 2.5S19 18 19 16.6c0-1.3-.8-2.3-2-2.5zm-2-7.6c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5S17.3 8 16.5 8 15 7.3 15 6.5zM16.5 18c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5z"}]];const jg=["svg",{viewBox:"0 0 16 16"},["path",{d:"M4 13.7c1.1.8 2.5 1.3 4 1.3s2.9-.5 4-1.3v-1.2c0-.8-.7-1.5-1.5-1.5h-5c-.8 0-1.5.7-1.5 1.5v1.2zm-1-.8v-.4C3 11.1 4.1 10 5.5 10h5c1.4 0 2.5 1.1 2.5 2.5v.4c1.2-1.3 2-3 2-4.9 0-3.9-3.1-7-7-7S1 4.1 1 8c0 1.9.8 3.6 2 4.9zM8 16c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z"}],["path",{d:"M8 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 1C6.3 9 5 7.7 5 6s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z"}]];const kg=["svg",{viewBox:"0 0 16 16"},["path",{"fill-rule":"nonzero",d:"M11.846 3.45L15.293.007 16 .714l-3.284 3.281c1.261.902 2.377 2.212 3.347 3.93C14.02 11.642 11.333 13.5 8 13.5c-1.392 0-2.667-.324-3.822-.973L.703 16l-.706-.708 3.323-3.32C2.071 11.042.976 9.694.035 7.924 2.012 4.308 4.667 2.5 8 2.5c1.395 0 2.677.317 3.846.95zm-6.928 8.338c.944.477 1.97.712 3.082.712 2.795 0 5.076-1.483 6.907-4.568-.866-1.417-1.833-2.486-2.91-3.219l-1.55 1.55a3 3 0 0 1-4.185 4.182l-1.344 1.343zm-.882-.533l1.518-1.517A3 3 0 0 1 9.74 5.556l1.364-1.363C10.148 3.73 9.115 3.5 8 3.5c-2.798 0-5.047 1.439-6.819 4.432.842 1.465 1.792 2.568 2.855 3.323zm2.948-1.532a2 2 0 0 0 2.74-2.738l-2.74 2.738zm-.707-.707l2.74-2.738a2 2 0 0 0-2.74 2.738z"}]];const lg=["svg",{viewBox:"0 0 16 11"},["path",{d:"M8 7.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 1c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z"}],["path",{d:"M8 10c2.8 0 5.1-1.5 6.9-4.6C13.1 2.5 10.8 1 8 1 5.2 1 3 2.4 1.2 5.4 2.9 8.6 5.2 10 8 10zM8 0c3.3 0 6 1.8 8.1 5.4C14 9.2 11.3 11 8 11S2 9.2 0 5.5C2 1.9 4.6 0 8 0z"}]];const mg=["svg",{"fill-rule":"evenodd",viewBox:"0 0 24 21"},["path",{d:"M12 0L0 21h24L12 0zm0 3l9 16H3l9-16z"}],["path",{d:"M11.2 8.4V10l.4 4h.8l.4-4V8.4z"}],["circle",{r:.8,cy:16,cx:12}]];const ma=(t,e)=>[t[0],Object.assign(Object.assign({},t[1]),{width:e,height:e}),...t.slice(2)];function md(e){const t=e.bus,r=e.views.user.deref(),o=e.views.accountOpen.deref();return["div",{class:"relative",onkeydown:e=>{"Escape"!==e.key&&"Esc"!==e.key||t.dispatch([gb,null])}},["div",{class:"flex flex-row items-center relative w-8 mx-2"},[w,[gc],{class:"relative z-10 block rounded-full overflow-hidden focus:outline-none"},["img",{src:r.avatar_url,alt:r.name}]],o?[w,[gb],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default"}]:[]],o?["div",{class:"absolute right-0 mt-2 py-2 w-48 bg-white rounded-lg shadow-xl"},["div",{class:"block px-4 text-gray-600"},`Signed in as ${r.login.toLowerCase()}`],["div",{class:"block my-2 border-b bg-grey-400"}],[w,[uc],{class:"block px-4 py-2 text-black hover:bg-gray-200 w-full text-left"},"Sign out"]]:[]]}function nd(t){const e=t.bus,n=t.views.notificationOpen.deref();return()=>{let i=t.views.newNotifications.deref();return null!==i&&(i=i.filter(t=>t.status===od.NEW)),["div",{class:"relative",onkeydown:t=>{"Escape"!==t.key&&"Esc"!==t.key||e.dispatch([hb,null])}},["div",{class:"flex flex-row items-center relative w-8 mx-2"},[w,[hc],{class:"relative z-10 block rounded-full w-6 h-6 focus:outline-none"},["div",{class:"relative"},["div",{class:i&&i.length?"absolute top-0 right-0 text-xs text-center rounded-full p-1 transition eas-in-out duration-300 bg-red-500 border-2 border-gray-200":"absolute top-0 right-0 text-xs text-center rounded-full p-1 transition eas-in-out duration-300 bg-transparent"}],["div",eg]]],n?[w,[hb],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default"}]:[]],n?["div",{class:"absolute z-10 right-0 mt-2 py-2 w-64 bg-white rounded-lg shadow-xl"},["div",{class:"block px-4 text-gray-600"},"Notifications"],["div",{class:"block my-2 border-b bg-grey-400"}],i&&i.length?i.map(t=>[w,[jd,{id:t.entry_id,data:Object.assign(Object.assign({},t),{status:"viewed"})}],{class:"block px-4 py-2 text-black hover:bg-gray-200 w-full text-left focus:outline-none"},t.entry_id]):["div",{class:"block px-4 py-2 text-gray-500 w-full text-center focus:outline-none my-6 items-center"},"no notification"]]:[]]}}var ng,og,pg,qg,ea,od,pd,k;(function(e){e.UPVOTE="upvote",e.DOWNVOTE="downvote",e.NOTIFICATION="notification"})(ea||(ng=ea={},ng)),function(e){e.NEW="new",e.VIEWED="viewed"}(od||(og=od={},og)),(pd||(pg=pd={},pg)).OPINION="OPINION",function(e){e[e.DONE=0]="DONE",e[e.INFO=1]="INFO",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR"}(k||(qg=k={},qg));function rg(e,l){return["div",{class:"mt-4"},["div",{class:"max-w-5xl mx-auto lg:-mt-16"},["div",{class:"flex flex-col min-h-screen lg:flex-row lg:items-center lg:p-8"},["div",{class:"flex flex-col flex-grow bg-white lg:shadow-2xl lg:rounded-lg lg:overflow-hidden"},l]]]]}const qd="route-to";const rd="get-user";const sd="get-token";const td="sign-out";const ud="create-opinion";const vd="delete-opinion";const wd="update-opinion";const tb="get-wiki";const xd="get-entry";const yd="create-entry";const zd="update-entry";const Ad="search-entry";const Bd="create-report";const Cd="get-vote";const Dd="create-vote";const Ed="delete-vote";const Fd="get-notification";const Gd="create-notification";const Hd="update-notification";const Id="delete-notification";const Jd="get-new-notifications";const Ra=void 0;class sg{constructor(t){this.config=t,this.state=new Kb(t.initialState||{}),this.ctx={bus:new Nf(this.state,t.events,t.effects),views:{},ui:t.ui},this.addViews(this.config.views),this.router=new Sf(t.router),this.router.addListener(va,t=>this.ctx.bus.dispatch([va,t.value])),this.ctx.bus.addHandlers({[va]:Pf("route"),[Y]:(t,[e,r])=>({[qd]:r})}),this.ctx.bus.addEffect(qd,([t,e])=>this.router.routeTo(this.router.format(t,e))),Ra&&"debug"===Ra&&this.ctx.bus.instrumentWith([Of]),this.addViews({route:"route",routeComponent:["route.id",t=>(this.config.components[t]||(()=>["div",`missing component for route: ${t}`]))(this.ctx)]})}addViews(t){const e=this.ctx.views;for(const r in t){const i=t[r];e[r]=X(i)?Qb(this.state,i[0],i[1]):Qb(this.state,i)}}start(){this.router.start(),this.ctx.bus.dispatch([ib]),Gf(()=>{if(this.ctx.bus.processQueue())return this.rootComponent()},{root:this.config.domRoot,ctx:this.ctx})}rootComponent(){const t=this.ctx.views.debug.deref();return["div",this.ctx.ui.root,["div",{class:"flex"},["div",{class:"w-full"},Uf,[rg,this.ctx.views.routeComponent]],Ra&&"debug"===Ra?[Tf,t,this.ctx.views.json]:[]]]}}function tg(r){return["div",["div",{class:"flex flex-col flex-grow justify-center p-12"},["div",{class:"flex items-center"}],["div",{class:"text-sm text-gray-600 leading-relaxed"},["\u300C\u95E8\u4FEE\u65AF\u300D\u662F\u5B89\u4E1C\u5C3C\xB7\u5409\u767B\u65AF\uFF08Anthony Giddens\uFF09\u793E\u4F1A\u5B66\u4EE3\u8868\u4F5C\u4E4B\u2F00\u300A\u2EA0\u65CF-\u56FD\u5BB6\u4E0E\u66B4\u2F12\u300B\uFF08The Nation-State and Violence, 1985\uFF09\u67D0\u4E2D\u8BD1\u672C\u2FA5\u5BF9\u201C\u5B5F\u2F26\u201D\u82F1\u8BD1\u201CMencius\u201D\u7684\u56DE\u8BD1\uFF0C\u56E0\u9519\u5F97\u6781\u5BCC\u620F\u5267\u6027\u2F7D\u2F34\u4E3A\u2F08\u77E5\uFF0C\u540E\u6765\u4FBF\u6210\u4E3A\u4E86\u2F00\u4E2A\u5178\u6545\u5F0F\u8BCD\u6C47\uFF0C\u4E13\u2F64\u6765\u6307\u4EE3\u2F08\u540D\u5730\u540D\u4F5C\u54C1\u540D\u7B49\u4E13\u6709\u540D\u8BCD\u7684\u9519\u8BD1\u3002","\u7B11\u7B11\u5BB9\u6613\uFF0C\u907F\u514D\u9519\u8BD1\u5374\u5E76\u6CA1\u6709\u60F3\u8C61\u4E2D\u7684\u7B80\u5355\u3002\u8981\u505A\u5230\u6B63\u786E\u2F46\u8BEF\u7684\u7FFB\u8BD1\uFF0C\u8BD1\u8005\u9664\u4E86\u9700\u8981\u62E5\u6709\u826F\u597D\u7684\u5916\u8BED\u53CA\u2E9F\u8BED\u2F54\u5E73\u4E4B\u5916\uFF0C\u4E5F\u5FC5\u987B\u5BF9\u6240\u8BD1\u4F5C\u54C1\u6D89\u53CA\u7684\u9886\u57DF\u6709\u7740\u76F8\u5F53\u7A0B\u5EA6\u7684\u719F\u6089\uFF0C\u4F46\u5728\u8D44\u8BAF\u7684\u8BDE\u2F63\u4E0D\u65AD\u52A0\u901F\u5316\u3001\u8D44\u8BAF\u7684\u6574\u5408\u6108\u53D1\u8DE8\u2F42\u5316\u8DE8\u9886\u57DF\u7684\u4ECA\u5929\uFF0C\u60F3\u8FBE\u5230\u8FD9\u2F00\u70B9\u7684\u2ED4\u69DB\u662F\u8D8A\u6765\u8D8A\u2FBC\u3002\u4EC5\u51ED\u5B98\u2F45\u53D1\u5E03\u7684\u4E13\u6709\u540D\u8BCD\u7FFB\u8BD1\u89C4\u8303\u2F3F\u518C\uFF0C\u65E9\u5DF2\u2F46\u6CD5\u5E94\u5BF9\u6BCF\u79D2\u90FD\u5728\u4E0D\u65AD\u8BDE\u2F63\u7740\u7684\u5C42\u51FA\u4E0D\u7A77\u7684\u5404\u8BED\u79CD\u4E13\u6709\u8BCD\u6C47\uFF0C\u2F7D\u2F79\u7EDC\u4E0A\u7684\u5404\u79CD\u767E\u79D1\uFF0C\u4E5F\u2F24\u591A\u4EC5\u4EC5\u5C06\u91CD\u70B9\u653E\u5728\u8BCD\u6761\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u76F8\u5173\u8D44\u8BAF\u4E0A\uFF0C\u5E76\u6CA1\u6709\u4E3A\u8BCD\u6761\u672C\u8EAB\u7684\u8BD1\u6CD5\u7559\u4E0B\u663E\u2F7D\u6613\u2EC5\u7684\u8BA8\u8BBA\u548C\u4FEE\u6B63\u7684\u7A7A\u95F4\u3002\u5728\u8FD9\u6837\u7684\u2F00\u4E2A\u60C5\u51B5\u4E0B\uFF0C\u4E13\u6709\u540D\u8BCD\u7684\u7FFB\u8BD1\u5BF9\u4E8E\u8BD1\u8005\u3001\u4F5C\u8005\u7684\u2F2F\u4F5C\u4EE5\u53CA\u8BFB\u8005\u7684\u7406\u89E3\u548C\u4EA4\u6D41\u6765\u8BF4\u90FD\u9020\u6210\u4E86\u4E0D\u2F29\u7684\u95EE\u9898\uFF0C\u4E5F\u5BFC\u81F4\u4E86\u4E0D\u5C11\u9519\u8BD1\u548C\u8BEF\u8BFB\u2ED3\u671F\u96BE\u4EE5\u5F97\u5230\u4FEE\u6B63\u3002","\u4E3A\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u6211\u4EEC\u53D1\u8D77\u4E86\u5F00\u6E90\u9879\u2F6C\u300C\u2ED4\u4FEE\u65AF\u2F79\u300D\u3002\u5728\u8FD9\u4E2A\u5E73\u53F0\u4E0A\uFF0C\u2F24\u5BB6\u4E0D\u4F46\u53EF\u4EE5\u4F9D\u636E\u5404\u2F83\u638C\u63E1\u7684\u5BA2\u89C2\u8BBA\u636E\uFF0C\u4E3A\u5404\u4E13\u6709\u540D\u8BCD\u63D0\u51FA\u2F83\u2F30\u7684\u8BD1\u6CD5\uFF0C\u4E5F\u53EF\u4EE5\u5BF9\u4ED6\u2F08\u63D0\u51FA\u7684\u8BD1\u6CD5\u7ED9\u51FA\u610F\u2EC5\u548C\u5EFA\u8BAE\u3002\u2F7D\u2F24\u5BB6\u5BF9\u67D0\u8BCD\u6761\u63D0\u51FA\u7684\u5404\u79CD\u4E0D\u540C\u8BD1\u6CD5\uFF0C\u4F1A\u901A\u8FC7\u2F64\u6237\u6295\u7968\u7684\u2F45\u5F0F\u6392\u5217\u6B21\u5E8F\u5E76\u51B3\u5B9A\u51FA\u52A8\u6001\u7684\u6700\u4F18\u89E3\u3002\u2F7D\u540E\u968F\u7740\u2F83\u5B9A\u4E49\u5217\u8868\u751A\u2F84\u662F\u7EC6\u5316\u5230\u67D0\u4F5C\u54C1\u67D0\u7AE0\u8282\u8BCD\u6C47\u6C47\u603B\u7B49\u529F\u80FD\u7684\u6700\u7EC8\u5B8C\u5584\uFF0C\u76F8\u4FE1\u672C\u5E73\u53F0\u4E0D\u4F46\u4F1A\u5BF9\u4E13\u4E1A\u8BD1\u8005\u7684\u2F2F\u4F5C\u6709\u6240\u5E2E\u52A9\uFF0C\u5BF9\u4E8E\u7F16\u8F91\u3001\u4F5C\u8005\u7B49\u2F42\u5B57\u7C7B\u2F2F\u4F5C\u8005\u6216\u8BFB\u8005\uFF0C\u751A\u2F84\u662F\u5916\u8BED\u5B66\u4E60\u8005\u2F7D\u2F94\uFF0C\u4E5F\u4F1A\u662F\u2F00\u4E2A\u2FAE\u5E38\u6709\u53C2\u8003\u4EF7\u503C\u7684\u8F85\u52A9\u2F2F\u5177\u3002","\u2F6C\u524D\uFF0C\u56E0\u2F08\u2F12\u53CA\u2F79\u7AD9\u5B9A\u4F4D\u6240\u9650\uFF0C\u672C\u5E73\u53F0\u6DB5\u76D6\u7684\u8BCD\u6761\u4EC5\u6D89\u53CA\u2F08\u540D\u548C\u4E66\u5F71\u2FB3\u6E38\u620F\u7ED8\u753B\u88C5\u7F6E\u6982\u5FF5\u7B49\u5404\u7C7B\u4F5C\u54C1\u540D\uFF0C\u672A\u6765\u662F\u5426\u4F1A\u5BF9\u6DB5\u76D6\u8303\u56F4\u8FDB\u2F8F\u6269\u5145\uFF0C\u8FD8\u5C06\u89C6\u5177\u4F53\u60C5\u51B5\u2F7D\u5B9A\u3002","\u540C\u65F6\uFF0C\u672C\u2F79\u7AD9\u4E3A\u2FAE\u76C8\u5229\u6027\u5F00\u6E90\u2F79\u7AD9\uFF0C\u6211\u4EEC\u76F8\u4FE1\u4F17\u2F08\u7684\u667A\u6167\u80FD\u591F\u5B55\u80B2\u51FA\u6700\u4EE4\u2F08\u610F\u60F3\u4E0D\u5230\u7684\u7F8E\u597D\u6210\u679C\uFF0C\u6240\u4EE5\u5728\u7B2C\u2F00\u9636\u6BB5\u4EC5\u4EC5\u5B8C\u6210\u4E86\u2F79\u7AD9\u6700\u57FA\u672C\u5C42\u2FAF\u529F\u80FD\u7684\u67B6\u6784\uFF0C\u66F4\u8FDB\u2F00\u6B65\u7684\u4F18\u5316\u4EE5\u53CA\u66F4\u591A\u529F\u80FD\u7684\u589E\u6DFB\u548C\u5B8C\u5584\uFF0C\u8FD8\u671F\u5F85\u7740\u672A\u6765\u2F24\u5BB6\u80FD\u591F\u5171\u540C\u63A2\u8BA8\u643A\u2F3F\u5B8C\u6210\u3002","\u5728\u8FD9\u6837\u2F00\u4E2A\u5168\u7403\u6027\u53CD\u667A\u7684\u2F24\u2F53\u5019\u4E0B\uFF0C\u5C31\u8BA9\u6211\u4EEC\u2F00\u8D77\u6765\u505A\u2F00\u4E9B\u5F00\u653E\u6027\u7684\u3001\u5177\u6709\u2ED3\u8FDC\u610F\u4E49\u7684\u5B9E\u4E8B\uFF0C\u4E5F\u7B97\u662F\u62B5\u6297\u2F00\u4E0B\u8352\u8C2C\u65F6\u4EE3\u7684\u6EDA\u6EDA\u2ECB\u8F6E\uFF0C\u6216\u662F\u4E2A\u2F08\u5FAE\u4E0D\u2F9C\u9053\u7684\u7126\u8651\u548C\u6291\u90C1\u5427\u3002"].map(r=>["p",{class:"mb-4"},r])],ug],["div",{class:"bg-gray-100 border-t-2"},["div",{class:"flex flex-wrap"},[["sm:border-r sm:border-b","\u5F00\u653E\u7684\u6570\u636E","\u6240\u6709\u7684\u8BCD\u6761\u4EE5\u53CA\u76F8\u5173\u7FFB\u8BD1\u90FD\u4EE5\u5F00\u6E90\u7684\u5F62\u5F0F\u4FDD\u5B58\u4E8E Github",_f],["border-t-2 sm:border-t-0 sm:border-l sm:border-b","\u4FBF\u5229\u7684\u5DE5\u5177","\u5E94\u5BF9\u6BCF\u65F6\u6BCF\u523B\u4E0D\u65AD\u8BDE\u2F63\u7740\u7684\u5C42\u51FA\u4E0D\u7A77\u7684\u5404\u8BED\u79CD\u4E13\u6709\u8BCD\u6C47",ig],["border-t-2 sm:border-r sm:border-t","\u4E92\u52A9\u7684\u793E\u7FA4","\u901A\u8FC7\u2F64\u6237\u6295\u7968\u7684\u2F45\u5F0F\u6392\u5217\u6B21\u5E8F\u5E76\u51B3\u5B9A\u51FA\u52A8\u6001\u7684\u6700\u4F18\u7FFB\u8BD1",bg],["border-t-2 sm:border-l sm:border-t","\u5927\u5BB6\u7684\u63A2\u7D22","\u76F8\u4FE1\u4F17\u2F08\u7684\u667A\u6167\u80FD\u591F\u5B55\u80B2\u51FA\u6700\u4EE4\u2F08\u610F\u60F3\u4E0D\u5230\u7684\u7F8E\u597D\u6210\u679C",gg]].map(r=>[vg,...r])]]]}function ug(t){const e=t.ui.newsletterForm;return["div",e.root,["h1",e.title,"\u52A0\u5165 Newsletter \u83B7\u53D6\u9879\u76EE\u6700\u65B0\u8FDB\u5C55"],["form",Object.assign(Object.assign({},e.form),{action:"https://tinyletter.com/nopro-studio",method:"post",target:"popupwindow"}),["div",e.container,["input",Object.assign(Object.assign({},e.input),{type:"email",placeholder:"email address",name:"email",id:"tlemail"})],["input",Object.assign(Object.assign({},e.button),{type:"submit",value:"SUBSCRIBE"})]]]]}function vg(r,c,a,t,e){const o=r.ui.characterCard;return["div",{class:o.container.class+" "+c},["div",{class:"flex flex-grow"},["div",o.icon,e],["div",o.body,["h2",o.content.keyword,a],["p",o.content.description,t]]]]}function wg(t){return["div",{class:"flex flex-col p-12"},["p",t.ui.newsletterForm.title,"Get in touch!"],["p",[["mailto:townb.production@gmail.com","Email"],["https://github.com/noprostudio","GitHub"]].map(o=>[Kd,t.ui.contact.link,...o])]]}function Kd(e,t,n,r){return["a",Object.assign(Object.assign({},t),{href:n,target:"_blank"}),r]}function Ld(e,t){const s=e.views,a=decodeURI(s.route.deref().params.id),r=+s.route.deref().params.page,l=s.search.deref();return["div",Object.assign({},t),["div",[w,[xa,{id:a,page:r-1}],r>1?{class:"block m-1"}:{class:"block m-1 disabled:opacity-50",disabled:!0},["div",{class:"flex flex-row items-center text-justify"},["div",{class:"w-2 object-fill object-center items-baseline m-2 fill-current"},Zf],"Prev"]]],["div",{class:"pl-2"},[w,[xa,{id:a,page:r+1}],r<Math.ceil(l.total_count/30)?{class:"block m-1"}:{class:"block m-1 disabled:opacity-50",disabled:!0},["div",{class:"flex flex-row items-center text-justify"},"Next",["div",{class:"w-2 object-fill object-center items-baseline m-2 fill-current"},$f]]]]]}function xg(e){const t=e.views,s=e.bus,a=decodeURI(e.views.route.deref().params.id),r=decodeURI(e.views.route.deref().params.page);return s.dispatch([mb,{id:a,page:r}]),()=>{const s=decodeURI(e.views.route.deref().params.id),a=+e.views.route.deref().params.page,r=t.search.deref();return["div",na,["div",{class:"p-6"},["h2",e.ui.newsletterForm.title,"Search results for ",["span",{class:"font-bold"},s]],["hr"],r.entries?["div",{class:"flex flex-col text-gray-600 font-light"},["div",{class:"flex flex-row justify-between my-2 align-middle items-center"},["span","Showing ",r.total_count>30?["span",["span",{class:"text-black font-normal"},`${30*(a-1)+1}-${Math.min(30*a,r.total_count)} `],"of "]:["span","all "],["span",{class:"text-black font-normal"},r.total_count+" "],"entries"],r.total_count>30?Ld(e,{class:"flex flex-row"}):[]],["div",{class:"flex flex-wrap"},r.entries.map(e=>["div",[w,[ka,e],{class:"block m-1"},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},e]]])],r.total_count>30?Ld(e,{class:"flex flex-row px-4 justify-center my-4"}):[]]:["div",{class:"md:text-4xl text-xl m-auto p-6"},"no available results"]]]}}function na(t){const[s,$]=t.views.status.deref();return["p",t.ui.status[s],$]}function*yg($,r){const e=Sa($)(zg()),t=e[1],s=e[2];for(let i of r){const $=s([],i);if(Ta($))return void(yield*Ua(t($.deref())));$.length&&(yield*$)}yield*Ua(t([]))}function*Md($,r){const e=Sa($)([qa,qa,($,r)=>r])[2];for(let t of r){let $=e(ba,t);if(Ta($))return void(($=Ua($.deref()))!==ba&&(yield $));$!==ba&&(yield $)}}const Sa=r=>ia(r,"xform")?r.xform():r;class Nd{constructor(e){this.value=e}deref(){return this.value}}const Ta=e=>e instanceof Nd;const Ua=e=>e instanceof Nd?e.deref():e;function zg($){return $?[...$]:Od(()=>[],($,r)=>($.push(r),$))}const Ag=e=>2===e.length?[void 0,e[1]]:3===e.length?[e[1],e[2]]:ra(e.length);function ub(...e){const r=e[0],$=r[0],u=r[1],t=r[2],c=null==(e=Ag(e))[0]?$():e[0],o=e[1];return Ua(u(ia(o,"$reduce")?o.$reduce(t,c):Ce(o)?Bg(t,c,o):Cg(t,c,o)))}const Bg=(e,r,$)=>{for(let u=0,t=$.length;u<t;u++)if(r=e(r,$[u]),Ta(r)){r=r.deref();break}return r},Cg=(e,r,$)=>{for(let u of $)if(r=e(r,u),Ta(r)){r=r.deref();break}return r},Od=(e,r)=>[e,e=>e,r];const Dg=(e,r)=>{const $=r.length-1;return Hb(r[$])?r.length>1?ub(e.apply(null,r.slice(0,$)),r[$]):ub(e(),r[0]):void 0};function Pd(...e){let r,$;switch(e.length){case 4:$=e[3],r=e[2];break;case 3:$=e[2];break;case 2:return vb(r=>Pd(e[0],e[1],r));default:ra(e.length);}return ub(Sa(e[0])(e[1]),r,$)}function vb(t,r){return r?Md(vb(t),r):r=>{const $=r[2];return Qd(r,(r,e)=>$(r,t(e)))}}const Qd=($,o)=>[$[0],$[1],o];function Rd(...$){return Eg(Rd,($,r)=>$+r,0,$)}const Eg=($,r,e,t)=>{const o=Dg($,t);if(void 0!==o)return o;const p=t[0]||e;return Od(()=>p,r)};function wb(...e){let[r,$,t,o,u,c,p,n,s,a]=e;switch(e.length){case 0:ra(0);case 1:return r;case 2:return(...e)=>r($(...e));case 3:return(...e)=>r($(t(...e)));case 4:return(...e)=>r($(t(o(...e))));case 5:return(...e)=>r($(t(o(u(...e)))));case 6:return(...e)=>r($(t(o(u(c(...e))))));case 7:return(...e)=>r($(t(o(u(c(p(...e)))))));case 8:return(...e)=>r($(t(o(u(c(p(n(...e))))))));case 9:return(...e)=>r($(t(o(u(c(p(n(s(...e)))))))));case 10:default:const G=(...e)=>r($(t(o(u(c(p(n(s(a(...e))))))))));return 10===e.length?G:wb(G,...e.slice(10));}}function Sd(r,$){return $?Md(Sd(r),$):$=>{const e=$[2];return Qd($,($,t)=>r(t)?e($,t):$)}}const Td=e=>e[e.length-1];function Fg(...e){return e=e.map(Sa),wb.apply(null,e)}var Gg;var Hg,y;(function($){$[$.PARTIAL=0]="PARTIAL",$[$.FULL=1]="FULL",$[$.FULL_NC=2]="FULL_NC",$[$.FAIL=-1]="FAIL"})(y||(Hg=y={},Hg));const ha=Object.freeze({type:y.PARTIAL});const c=Object.freeze({type:y.FAIL});const I=($,r=y.FULL)=>({type:r,body:$});const Z=($,t,r,e)=>()=>{const p=$.map($=>$()),F=[];let l=p.length;return($,o)=>{for(let t,e,b=p.length;--b>=0;)if(t=p[b]){if((e=t($,o)).type>=y.FULL)return r?I(r($,e.body,F),e.type):e;e.type===y.FAIL&&(p[b]=null,l--)}return(t||e)&&F.push(o),l?ha:t?I(t($,F)):I(e&&e($,F),y.FAIL)}};const Ig=($,t,p)=>()=>(r,e)=>$[e]?I(t&&t(r,e)):I(p&&p(r,e),y.FAIL);function Ud(r,$,e="start",t,i){return i?Jg(Ud(r,$,e,t),i):([i,o,L])=>{let u=e,s=r[e]?r[e]():Ca(`invalid initial state: ${e}`);return[i,o,(e,i)=>{for(t&&t($,i);;){const{type:t,body:o}=s($,i),n=o&&o[1];if(t>=y.FULL){const $=o&&r[o[0]];if($?(u=o[0],s=$()):Gb(`unknown tx: ${u} -> ${o&&o[0]}`),n&&(e=Wd(L,e,n),Wa(n)&&(e=Vd(e))),t===y.FULL_NC&&!Wa(e))continue}else if(t===y.FAIL)return n&&(e=Wd(L,e,n)),Vd(e);break}return e}]}}function*Jg($,r){const e=Kg($)(Lg()),i=e[1],t=e[2];for(let o of r){const $=t([],o);if(Wa($))return void(yield*xb(i($.deref())));$.length&&(yield*$)}yield*xb(i([]))}const Kg=r=>ia(r,"xform")?r.xform():r;class Va{constructor(e){this.value=e}deref(){return this.value}}const Wa=e=>e instanceof Va;const Vd=e=>e instanceof Va?e:new Va(e);const xb=e=>e instanceof Va?e.deref():e;function Lg($){return $?[...$]:Mg(()=>[],($,r)=>($.push(r),$))}const Mg=(e,r)=>[e,e=>e,r];const Wd=(r,$,e)=>{for(let t of xb(e))if($=r($,t),Wa($))break;return $};const Ng=($,t,r)=>()=>{let u=$();const e=[];return($,o)=>{e.push(o);const{type:p}=u($,o);return p===y.FAIL?I(t&&t($,e)):p!==y.PARTIAL?I(r&&r($,e),y.FAIL):ha}};function*W(r,e){let o="string"==typeof r?r.charCodeAt(0):r;const t="string"==typeof e?e.charCodeAt(0):e;if(o<=t)for(;o<=t;o++)yield String.fromCharCode(o);else for(;o>=t;o--)yield String.fromCharCode(o)}const za=(...$)=>{const t={};for(let r of $)for(let $ of r)t[$]=!0;return Object.freeze(t)},Og=Object.freeze({"\t":!0,"\n":!0,"\x0B":!0,"\f":!0,"\r":!0," ":!0});const Pg=za(W("0","9"));const d=za(W("0","9"),W("A","F"),W("a","f"));const Qg=za(W("a","z"));const Rg=za(W("A","Z"));const Sg=Object.freeze(Object.assign(Object.assign({},Rg),Qg));const e=Object.freeze(Object.assign(Object.assign(Object.assign({},Sg),Pg),{_:!0}));const f=za(W("!","/"),W(":","@"),W("[","`"),W("{","~"));const Tg=($,a)=>Ig(Og,$,a);const Xd=($,t,o,r,e)=>()=>{let p=$(),P=0;const T=[];return(a,i)=>{T.push(i);const s=p(a,i);return s.type===y.FULL?++P===o?I(r&&r(a,T)):(p=$(),ha):s.type===y.FAIL?P>=t?(T.pop(),I(r&&r(a,T),y.FULL_NC)):I(e&&e(a,T),y.FAIL):s}};const yb=($,r,t)=>()=>{let n=0,e=$[n]();const A=$.length-1,o=[];return(p,i)=>{if(n>A)return I(t&&t(p,o),y.FAIL);for(r&&o.push(i);n<=A;){const{type:j}=e(p,i);if(j>=y.FULL){if(n===A)return I(r&&r(p,o));if(e=$[++n](),j===y.FULL_NC)continue}return j===y.FAIL?I(t&&t(p,o),y.FAIL):ha}return I(t&&t(p,o),y.FAIL)}};const q=($,r,M,t=!1)=>t?()=>{let t="";return(e,h)=>(t+=h)===$?I(r&&r(e,t)):0===$.indexOf(t)?ha:I(M&&M(e,t),y.FAIL)}:()=>{let t=0,e=0;return(h,p)=>($.charAt(e++)===p&&t++,t===$.length?I(r&&r(h,$)):t===e?ha:I(M&&M(h,""),y.FAIL))};const fa=(r,$)=>()=>{let t="";return(l,e)=>(t+=e).endsWith(r)?I($&&$(l,t.substr(0,t.length-r.length))):ha};function*Ug($,r){const e=Yd($)([qa,qa,($,r)=>r])[2];for(let t of r){let $=e(ba,t);if(Vg($))return void(($=Wg($.deref()))!==ba&&(yield $));$!==ba&&(yield $)}}const Yd=r=>ia(r,"xform")?r.xform():r;class Zd{constructor(e){this.value=e}deref(){return this.value}}const Vg=e=>e instanceof Zd;const Wg=e=>e instanceof Zd?e.deref():e;const Xg=($,o)=>[$[0],$[1],o];function $d(r,$){return Hb($)?Ug($d(r),$):$=>{const e=$[2];return Xg($,($,t)=>r(t)?e($,t):$)}}function Yg(...r){return r=r.map(Yd),wb.apply(null,r)}(function($){$[$.BLOCKQUOTE=0]="BLOCKQUOTE",$[$.CODE=1]="CODE",$[$.CODEBLOCK=2]="CODEBLOCK",$[$.EMPHASIS=3]="EMPHASIS",$[$.END_BLOCKQUOTE=4]="END_BLOCKQUOTE",$[$.END_LI=5]="END_LI",$[$.END_PARA=6]="END_PARA",$[$.END_HEADING=7]="END_HEADING",$[$.END_TABLE=8]="END_TABLE",$[$.HEADING=9]="HEADING",$[$.IMG=10]="IMG",$[$.LINK=11]="LINK",$[$.LI=12]="LI",$[$.PARA=13]="PARA",$[$.START=14]="START",$[$.START_CODEBLOCK=15]="START_CODEBLOCK",$[$.STRIKE=16]="STRIKE",$[$.STRONG=17]="STRONG",$[$.TABLE=18]="TABLE"})(Gg||(Gg={}));const Zg={blockquote:$=>["blockquote",...$],code:$=>["code",$],codeblock:($,r)=>["pre",{lang:$},r],em:$=>["em",$],heading:($,r)=>[$<7?`h${$}`:"p",...r],hr:()=>["hr"],img:($,r)=>["img",{src:$,alt:r}],li:$=>["li",...$],link:($,r)=>["a",{href:$},r],list:($,r)=>[$,...r],paragraph:$=>["p",...$],strong:$=>["strong",$],strike:$=>["del",$],table:$=>["table",["tbody",...$]],td:($,r)=>["td",...r],tr:($,r)=>["tr",...r]},aa=($,r)=>($.children=[],$.body="",[r]),oa=($,r)=>v=>(v.stack.push({id:$,children:v.children.concat(v.body)}),aa(v,r)),_d=$=>(r,v)=>{const{id:t,children:a}=r.stack.pop();return a.push($(r,v)),r.children=a,r.body="",[t]},zb=$=>($.children.push($.body),$.children),pa=$=>(r,v)=>(r.body+=v.join(""),[$]),$g=$=>r=>[14,[$(r.hd,zb(r))]],ae=$=>r=>[14,[$(zb(r))]],_g=$=>($.children.push($.body,["br"]),$.body="",[0]),ah=$=>(r,v)=>[14,[$(r.lang,v)]],be=($,r)=>$.container.push(r(zb($))),bh=($,r,v)=>t=>(be(t,v),[14,[r($,t.container)]]),ch=$=>r=>(r.children.push(r.body),r.container.push($(Td(r.stack).container.length,r.children)),aa(r,18)),dh=$=>r=>{const v=Td(r.stack).container;return v.push($(v.length,r.container)),r.container=[],aa(r,8)},eh=$=>r=>{const v=r.stack.pop().container;return v.splice(1,1),[14,[$(v)]]},Xa=$=>_d((r,v)=>$(r.body+v.trim())),fh=($,r)=>($.hd=r.length,aa($,9)),Aa=$=>[q("![",oa($,10)),q("[",oa($,11)),q("~~",oa($,16)),q("**",oa($,17)),q("_",oa($,3)),q("`",oa($,1))],ce=$=>yb([fa("]",($,r)=>void($.title=r)),q("("),fa(")",($,r)=>void($.href=r))],_d(r=>$(r.href,r.title))),Ya=($,r)=>Z([...Aa($),q("\n",$=>($.body+=" ",[r]))],pa($)),gh=($,r)=>($.body=r.join(""),$.children=[],[13]),Ba=$=>r=>(r.stack.push({id:13,children:[]}),aa(r,$)),hh=($,r)=>($.body=r[1],$.stack.push({id:13,children:[]}),[1]),ih=$=>($.container=[],aa($,12)),jh=$=>($.stack.push({id:18,container:[]}),$.container=[],aa($,18)),kh=$=>{const r=Object.assign(Object.assign({},Zg),$);return Yg($d($=>"\r"!==$),Ud({14:Z([Tg(()=>[14]),Xd(q("#"),1,1/0,fh),q(">",$=>aa($,0)),q("- ",ih),Z([yb([q("`"),Ng(q("`"))],hh),q("```",()=>[15])],void 0,($,r)=>r),yb([Xd(q("-"),3,1/0),q("\n")],()=>[14,[r.hr()]]),q("![",Ba(10)),q("[",Ba(11)),q("**",Ba(17)),q("~~",Ba(16)),q("_",Ba(3)),q("|",jh)],gh),13:Ya(13,6),6:Z([...Aa(13),q("\n",ae(r.paragraph))],pa(13)),0:Ya(0,4),4:Z([...Aa(0),q(">",_g),q("\n",ae(r.blockquote))],pa(0)),9:Ya(9,7),7:Z([...Aa(9),q("\n",$g(r.heading))],pa(9)),15:fa("\n",($,r)=>($.lang=r,[2])),2:fa("\n```\n",ah(r.codeblock)),12:Ya(12,5),5:Z([q("\n",bh("ul",r.list,r.li)),q("- ",$=>(be($,r.li),aa($,12)))],pa(12)),11:ce(r.link),10:ce(r.img),17:fa("**",Xa(r.strong)),16:fa("~~",Xa(r.strike)),3:fa("_",Xa(r.em)),1:fa("`",Xa(r.code)),18:Z([...Aa(18),q("|",ch(r.td)),q("\n",dh(r.tr))],pa(18)),8:Z([q("\n",eh(r.table)),q("|",()=>[18])])},{stack:[]},14))};const lh={li:e=>["li.list-disc.ml-4",...e],blockquote:e=>["blockquote.text-purple-600.ml-6.pl-4.border-l-4.border-purple-900",...e],code:e=>["code.bg-gray-200",e],codeblock:(e,r)=>["pre.text-xs.bg-purple-100.p-2.overflow-x-scroll",{lang:e||"code"},["code",r]],link:(e,r)=>["a.font-bold.text-purple-900.hover:bg-purple-900.hover:text-white.transition.duration-300.ease-in-out",{href:e,target:"_blank"},r],strike:e=>["del.line-through.bg-red-200",e],table:e=>["table.table-auto",["tbody",...e]],tr:(e,r)=>[e%2==0?"tr":"tr.bg-gray-100",...r],td:(e,r)=>[e<1?"th.px-4.py-2":"td.border.px-4.py-2",...r]};function de(e){return[...yg(kh(lh),e+"\n\n")]}const ee=(e,t,r)=>e.filter(e=>e.opinion_github_handle===t.github_handle&&e.type===r).length,fe=(e,t)=>ee(e,t,ea.UPVOTE),ge=(e,t)=>ee(e,t,ea.DOWNVOTE),he=(e,t,r,o)=>t.filter(t=>t.opinion_github_handle===r.github_handle&&t.type===o&&t.github_handle==e.login),ie=(e,t,r)=>he(e,t,r,ea.UPVOTE),je=(e,t,r)=>he(e,t,r,ea.DOWNVOTE);function ke(e,t,r,o,v,$,n){const s=e.views.voteLock.deref();return[w,[Tc,{id:t,data:{entry_id:t,opinion_github_handle:o.github_handle,github_handle:r.login,type:v}}],{class:"block transition ease-in-out duration-700 focus:outline-none disabled:opacity-50",disabled:s},["div",Object.assign({},$),n]]}function le(e,t,r,o,v){const $=e.views.voteLock.deref();return[w,[Vc,{id:t.entry_id,data:t,voteID:t.id}],{class:"block transition ease-in-out duration-700 focus:outline-none disabled:opacity-50",disabled:$},["div",Object.assign({},o),v]]}function mh(e,t){const r=e.views,o=decodeURI(e.views.route.deref().params.id),v=r.user.deref(),$=e.views.votes.deref()[o];return["div",null!=$?["div",{class:"flex flex-row items-center mt-4 space-x-2"},ie(v,$,t).length>0?[le,ie(v,$,t)[0],t,{class:"hover:bg-transparent bg-purple-300 hover:text-purple-700 text-white font-semibold py-2 px-4 border hover:border-purple-500 border-transparent rounded"},"\uD83D\uDC4D "+fe($,t)]:[ke,o,v,t,ea.UPVOTE,{class:"bg-transparent hover:bg-purple-300 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded"},"\uD83D\uDC4D "+fe($,t)],je(v,$,t).length>0?[le,je(v,$,t)[0],t,{class:"hover:bg-transparent bg-purple-300 hover:text-purple-700 text-white font-semibold py-2 px-4 border hover:border-purple-500 border-transparent rounded"},"\uD83D\uDC4E "+ge($,t)]:[ke,o,v,t,ea.DOWNVOTE,{class:"bg-transparent hover:bg-purple-300 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded focus:outline-none"},"\uD83D\uDC4E "+ge($,t)]]:[]]}const nh=([o,p,$],t)=>["option",{value:o,disabled:!!$,selected:o===t},p];const me=(o,p,$,t)=>["select",p,...$.map(o=>nh(o,t))];const oh=[["","Select reason..."],["Unwanted commercial content or spam","Unwanted commercial content or spam"],["Pornography or sexually explicit material","Pornography or sexually explicit material"],["Child abuse","Child abuse"],["Hate speech or graphic violence","Hate speech or graphic violence"],["Harassment or bullying","Harassment or bullying"]];function ph(e,t){const i=e.views,r=e.bus,l=decodeURI(e.views.route.deref().params.id),o=i.user.deref(),s=e.views.deleteOpinionOpen.deref(),a=e.views.reportOpen.deref(),n=e.views.report.deref();return["div",{class:"flex flex-col px-12 py-10 w-full border-t-2 border-gray-200"},["div",{class:"flex flex-col ml-4 md:ml-6"},["div",{class:"my-3 flex flex-row justify-between items-center"},["div",{class:"flex flex-row justify-start items-center"},["img",{class:"h-8 w-8 md:h-10 md:w-10 rounded-full",src:t.user_avatar_url?t.user_avatar_url:"https://subjpop.com/images/sidebar-logo.png"}],["div",{class:"ml-3 flex flex-col"},["div",{class:"font-semibold"},t.user_name],["div",{class:"text-gray-700 text-sm"},`@${t.github_handle.toLowerCase()}`]]],o.login==t.github_handle?["div",{class:"flex flex-row items-top text-gray-500"},[w,[Ac,{id:l,data:t}],{class:"ml-2 focus:outline-none hover:text-gray-700 p-2"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2"},ma(ld,"20")],["div","edit"]]],[w,[ic],{class:"focus:outline-none hover:text-gray-700 fill-current p-2"},["div",{class:"flex flex-row"},["div",{class:"pr-2"},ma(ag,"20")],["div","delete"]]],s?["div",{class:"fixed inset-0 flex items-center justify-center z-30"},["div",{class:"fixed flex flex-col items-center justify-between mt-2 pt-2 lg:w-1/3 md:w-1/2 w-3/4 bg-white rounded-lg shadow-xl z-40"},["div",{class:"block font-medium text-gray-800 text-lg p-4 border-b border-b-2 w-full"},["div",{class:"mb-2"},"Delete opinion"],["div",{class:"text-sm text-gray-500"},"Are you sure you want to delete your opinion? This action cannot be undone."]],["div",{class:"flex flex-row self-end m-2"},[w,[Ka],{class:"block px-4 py-2 text-black text-left font-medium"},"CANCEL"],[w,[yc,{id:l,data:t,userName:o.login}],{class:"block px-4 py-2 text-white text-left bg-red-600 rounded-lg font-medium hover:bg-red-500 transition ease-in-out duration-150"},"DELETE"]]],[w,[Ka],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default bg-black bg-opacity-50 z-20"}]]:[]]:["div",{class:"flex flex-row items-top text-gray-500"},[w,[kc,t,window.location.origin+window.location.pathname+`#/entry/${decodeURI(e.views.route.deref().params.id)}`],{class:"ml-2 focus:outline-none hover:text-gray-700 p-2"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2"},ma(mg,"20")],["div","report"]]],a?["div",{class:"fixed inset-0 flex items-center justify-center z-30"},["div",{class:"fixed flex flex-col items-center justify-between mt-2 pt-2 md:w-1/3 w-2/4 bg-white rounded-lg shadow-xl z-40"},["div",{class:"block font-medium text-gray-800 text-lg p-4 border-b border-b-2 w-full"},["div",{class:"mb-2"},"Report opinion"],[me,{class:"shadow-inner appearance-none border rounded w-full py-2 px-3 bg-gray-200 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:bg-white",onchange:e=>r.dispatch([wa,{key:"reason",value:e.target.value}])},oh,n.reason]],["div",{class:"flex flex-row self-end m-2"},[w,[La],{class:"block px-4 py-2 text-black text-left font-medium"},"CANCEL"],[w,[lc,{data:n}],{class:"block px-4 py-2 text-black text-left font-medium disabled:opacity-50 transition ease-in-out duration-300",disabled:!n.reason},"REPORT"]]],[w,[La],{tabindex:"-1",class:"fixed inset-0 h-full w-full cursor-default bg-black bg-opacity-50"}]]:[]]],["div",{class:"leading-relaxed flex flex-col"},["h2",{class:"font-bold text-gray-800 text-xl md:text-2xl"},t.translation],["p",{class:"text-gray-700 mt-1 text-sm md:text-base"},de(t.details)]],[mh,t]]]}function ne(e,t,n,o){return["div",{class:"block font-medium text-gray-800 text-lg mb-2"},t,[o,Object.assign(Object.assign({},n),{class:"shadow-inner appearance-none border rounded w-full py-2 px-3 bg-gray-200 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:bg-white"})]]}function oe(e,t,n){return ne(e,t,n,"input")}function qh(e,t,n){return ne(e,t,n,"textarea")}function rh(e,t,n,o,s){const r=e.bus;return oe(e,t,Object.assign(Object.assign({},s),{oninput:e=>r.dispatch([jb,{id:o,key:n,value:e.target.value}])}))}function sh(e,t,n,o,s){const r=e.bus;return qh(e,t,Object.assign(Object.assign({},s),{oninput:e=>r.dispatch([jb,{id:o,key:n,value:e.target.value}])}))}function ga(e,t,n,o,s){const r=e.bus;return oe(e,t,Object.assign(Object.assign({},s),{oninput:e=>{r.dispatch([o,{key:n,value:e.target.value}]),"name"===n&&r.dispatch([o,{key:"id",value:e.target.value.toLowerCase()}])}}))}const Ab=e=>0===Object.keys(e).length;function th(e){const i=e.bus,s=e.views,t=s.user.deref(),a=decodeURI(s.route.deref().params.id),o=s.opinions.deref(),r=s.tempOpinion.deref();if(!o[a]){const e={github_handle:t.login,user_avatar_url:t.avatar_url,user_bio:t.bio,user_name:t.name,translation:"",details:""};i.dispatch([Ma,{id:a,data:e}])}return()=>{const i=s.opinions.deref()[a];return i?["div",{class:"flex flex-col px-12 py-10 w-full border-t-2 border-gray-200"},["div",{class:"flex flex-col ml-4 md:ml-6"},["div",{class:"my-3 flex flex-row justify-start items-center"},["img",{class:"h-8 w-8 md:h-10 md:w-10 rounded-full",src:t.avatar_url}],["div",{class:"ml-3 flex flex-col"},["div",{class:"font-semibold"},t.name],["div",{class:"text-gray-700 text-sm"},`@${t.login.toLowerCase()}`]]],["div",{class:"leading-relaxed flex flex-col"},rh(e,"\u7FFB\u8BD1:","translation",a,{value:i.translation,placeholder:a}),sh(e,"\u8BBA\u636E:","details",a,{value:i.details,placeholder:a,rows:"5"}),["div",{class:"leading-relaxed"},["div","preview:"],["div",{class:"leading-relaxed text-gray-700 mt-1 text-sm md:text-base"},de(s.opinions.deref()[a].details)]],[w,Ab(r)?[wc,{id:a,data:i}]:[Cc,{id:a,data:i}],i.translation?{class:"block mt-4 transition ease-in-out duration-700"}:{class:"block mt-4 transition ease-in-out duration-700 disabled:opacity-50",disabled:!0},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},Ab(r)?"CREATE":"UPDATE"]],Ab(r)?[]:[w,[Bc,{id:a,data:r}],{class:"block mt-4"},["div",{class:"shadow bg-gray-500 hover:bg-gray-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"CANCEL"]]]]]:[]}}function uh(e,t){return["div",{class:"cursor-pointer"},[xh,[xa,{id:t,page:1}],{},["span",{class:" py-2, bg-purple-200 text-sm sm:text-base text-gray-700 subpixel-antialiased px-1 rounded mr-2"},`# ${t}`]]]}function vh(e,t){return["div",{class:"flex flex-col justify-center px-12 pb-10"},["div",{class:"ml-4 md:ml-6"},["h3",{class:"sm:font-light text-xl sm:text-2xl md:text-3xl text-gray-900 mt-2"},["span",t.name]],["div",{class:"flex flex-wrap"},[t.alias,t.author,t.category,t.date,t.group,t.language,t.romanization,t.album].map(e=>e?[uh,e]:[])],t.wikipedia.pageid?wh(t):[]]]}function wh(e){return["div",{class:" sm:text-xl text-gray-600 mt-3 leading-relaxed"},["p",{class:"font-light text-base"},e.wikipedia.extract],["div",{class:"pt-2 mt-auto text-lg font-medium inline-flex items-center text-purple-600 hover:text-purple-800"},["a",{href:`https://${e.language}.wikipedia.org/?curid=${e.wikipedia.pageid}`,target:"_blank"},"Surf the Wikipedia \uD83C\uDF0A"]]]}function xh(e,t,n,a){return["a",Object.assign(Object.assign({},n),{onclick:n=>{n.preventDefault(),e.bus.dispatch(t)}}),a]}function yh(e,r){const t=decodeURI(e.views.route.deref().params.id),d=e.views.user.deref(),l=e.views.notifications.deref()[t];return["div",{class:"ml-4 md:ml-6 px-12"},["div",{class:"flex flex-col md:flex-row md:justify-between space-y-2"},["div",{class:"item-center content-center md:self-center align-center space-x-1 font-semibold text-lg"},["span","entry"],["span","/"],["span",r.id]],["div",{class:"flex flex-row space-x-2"},l&&l[0]&&l[0].entry_id?["div",{class:"flex flex-row"},[w,[cd,{id:t,data:l[0]}],{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded focus:outline-none"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2 self-center"},ma(kg,"20")],["div","unwatch"]]]]:["div",{class:"flex flex-row"},[w,[ob,{id:t,data:{github_handle:d.login}}],{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded focus:outline-none"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2 self-center"},ma(lg,"20")],["div","watch"]]]],[w,[dc,t],{class:"p-2 mb-2 hover:text-gray-700 border border-purple-300 hover:border-purple-900 font-semibold rounded focus:outline-none"},["div",{class:"flex flex-row"},["div",{class:"inline-block w-full fill-current pr-2"},ma(ld,"20")],["div","edit"]]]]]]}const pe=(e,a)=>Pd(Fg(Sd(a=>a.opinion_github_handle===e),vb(e=>e.type===ea.UPVOTE?1:-1)),Rd(0),a);function zh(e){const a=e.views,r=e.bus,t=decodeURI(e.views.route.deref().params.id);return r.dispatch(a.entries.deref()[t]?[m,[k.SUCCESS,"loaded from cache",!0]]:[nb,t]),()=>{const e=decodeURI(a.route.deref().params.id),r=a.entries.deref()[e],t=a.votes.deref()[e],$=a.user.deref();return["div",na,r&&r.id&&t?["div",{class:"flex flex-col"},[yh,r],[vh,r],r.opinions.sort((e,a)=>pe(a.github_handle,t)-pe(e.github_handle,t)).map(e=>[ph,e]),$.login&&r.opinions.map(e=>e.github_handle.toLowerCase()).indexOf($.login.toLowerCase())<0?th:[]]:["div",["div",{class:"text-4xl m-auto p-6"},"no available data..."],["div",{class:"flex flex-row items-top text-gray-500"},[w,[cc,e],{class:"block m-4 w-full"},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"CREATE"]]]]]}}function Ah(e){const r=e.views,t=e.bus,s=decodeURI(r.route.deref().params.id),$=r.newEntry.deref(),n="null"===s||""===s?$:Object.assign(Object.assign({},$),{id:s,name:s});return t.dispatch([Fc,{data:n}]),()=>{const t=r.user.deref();return["div",na,t.name?[qe,"newEntry",Ec,Gc,Kc]:["div",{class:"flex flex-col p-12"},["p",e.ui.newsletterForm.title,"Please sign in before adding new entry..."]]]}}const Bh=[["en","\u82F1\u8BED"],["jp","\u65E5\u8BED"],["ko","\u97E9\u8BED"],["fr","\u6CD5\u8BED"],["de","\u5FB7\u8BED"]];function qe(e,t,o,n,a){const r=e.views,i=e.bus;return()=>{const d=r[t].deref();return["div",{class:"flex flex-col p-12"},["h2",e.ui.newsletterForm.title,"newEntry"===t?"Add new entry":"Edit entry"],ga(e,"\u539F\u6587","name",o,{value:d.name,placeholder:"Mencius"}),["div",{class:"block font-medium text-gray-800 text-lg mb-2"},"\u8BED\u8A00",[me,{class:"shadow-inner appearance-none border rounded w-full py-2 px-3 bg-gray-200 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:bg-white",onchange:e=>i.dispatch([o,{key:"language",value:e.target.value}])},Bh,d.language]],ga(e,"\u4EA6\u540D","alias",o,{value:d.alias,placeholder:"Mengzi"}),ga(e,"\u7F57\u9A6C\u5316\u8F6C\u5199","romanization",o,{value:d.romanization,placeholder:"Mengzi"}),ga(e,"\u5C5E\u6027","category",o,{value:d.category,placeholder:"\u54F2\u5B66\u5BB6"}),ga(e,"\u4F5C\u54C1\u5E74\u4EFD","date",o,{value:d.date,placeholder:"372-289 BC"}),ga(e,"\u56E2\u4F53","group",o,{value:d.group}),ga(e,"\u4F5C\u8005","author",o,{value:d.author}),ga(e,"\u4E13\u8F91","album",o,{value:d.album}),d.wikipedia?["div",["div",{class:"block"},"\u7EF4\u57FA"],["div",{class:"block font-light text-base text-gray-600"},d.wikipedia.extract]]:[],[w,[n,{titles:d.name,language:d.language}],d.name&&d.language?{class:"block mt-4 transition ease-in-out duration-700"}:{class:"block mt-4 transition ease-in-out duration-700 disabled:opacity-50",disabled:!0},["div",{class:"shadow bg-gray-500 hover:bg-gray-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"RETRIEVE FROM WIKIPEDIA"]],[w,[a,{id:d.id,data:d}],d.name?{class:"block mt-4 transition ease-in-out duration-700"}:{class:"block mt-4 transition ease-in-out duration-700 disabled:opacity-50",disabled:!0},["div",{class:"shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"},"SUBMIT"]]]}}function Ch(e){const r=e.views,t=e.bus,$=decodeURI(e.views.route.deref().params.id),i=r.entries.deref()[$];return i?(t.dispatch([Pc,{data:i}]),()=>{const t=r.user.deref();return["div",na,t.name?[qe,"tempEntry",Oc,Ic,Mc]:["div",{class:"flex flex-col p-12"},["p",e.ui.newsletterForm.title,"Please sign in before editing entry..."]]]}):t.dispatch([ka,$])}const Dh="2ed1b3b100d6c005d42b",Eh="https://nopro.studio/mencius/#/github_oauth_cb";function Fh(t){return["div",na,["div",{class:"flex flex-col p-12"},["p",t.ui.newsletterForm.title,"Mencius"],["p",[[`https://github.com/login/oauth/authorize?client_id=${Dh}&scope=user%20public_repo&redirect_uri=${Eh}`,"Sign in with GitHub"]].map($=>[Kd,t.ui.contact.link,...$])]]]}function Gh(t){const $=new URLSearchParams(window.location.search).get("code");return t.bus.dispatch([sc,$]),["div",na,["div",{class:"text-4xl m-auto p-6"},"Signing-in with Github..."]]}const H="https://mencius.azurewebsites.net",Hh={router:{useFragment:!0,defaultRouteID:la.id,routes:[la,pb,qb,rb,Oa,sb,Pa,kd]},events:{[bc]:()=>({[g]:[m,[k.DONE,"done"]]}),[D]:($,[o,t])=>({[g]:"Unauthorized"===t.message||"Bad Request"===t.message?[[m,[k.ERROR,t.message]],[Y,[Pa.id,{}]]]:[m,[k.ERROR,t.message]]}),[m]:($,[o,t])=>({[g]:[E,["status",t]],[B]:t[0]!==k.DONE&&t[2]?[$b,[1e3],bc,D]:void 0}),[fc]:U("isNavOpen",$=>!$),[gc]:U("accountOpen",$=>!$),[gb]:U("accountOpen",$=>!1),[hc]:U("notificationOpen",$=>!$),[hb]:U("notificationOpen",$=>!1),[ic]:U("deleteOpinionOpen",$=>!$),[Ka]:U("deleteOpinionOpen",$=>!1),[jc]:U("reportOpen",$=>!$),[La]:U("reportOpen",$=>!1),[ya]:U("voteLock",$=>!$),[wa]:($,[o,t])=>({[g]:[E,[["report",t.key],t.value]]}),[kc]:($,[o,t,e])=>({[g]:[[jc],[wa,{key:"type",value:pd.OPINION}],[wa,{key:"context",value:t}],[wa,{key:"url",value:e}]]}),[lc]:($,[o,t])=>({[g]:[[m,[k.INFO,"reporting..."]]],[B]:[Bd,t,mc,D]}),[mc]:()=>({[g]:[[m,[k.SUCCESS,"reported successfully",!0]],[La]]}),[nc]:U("debug",$=>!$),[oc]:($,[o,t])=>({[g]:[E,["input",t.toLowerCase()]]}),[pc]:($,[o,t])=>({[g]:[[m,[k.INFO,"getting entry data..."]]],[B]:[xd,t,qc,D]}),[qc]:($,[o,t])=>({[g]:[[E,[["entries",decodeURI(t.id)],t.data]],[m,[k.SUCCESS,"entry data successfully loaded",!0]]]}),[ka]:($,[o,t])=>({[g]:[[Y,[rb.id,{id:t}]]]}),[cc]:($,[o,t])=>({[g]:[[Y,[Oa.id,{id:t}]]]}),[dc]:($,[o,t])=>({[g]:[[Y,[sb.id,{id:t}]]]}),[ec]:($,[o,t,e])=>({[g]:[[Y,[qb.id,{id:t,page:e}]]]}),[ib]:()=>({[g]:[[m,[k.INFO,"getting user data..."]]],[B]:[rd,null,rc,D]}),[rc]:($,[o,t])=>({[g]:[[E,["user",t.data]],[m,[k.SUCCESS,"user data successfully loaded",!0]],[gd]]}),[sc]:($,[o,t])=>({[g]:[[m,[k.INFO,"getting token..."]]],[B]:[sd,t,tc,D]}),[tc]:($,[o,t])=>({[g]:[[m,[k.SUCCESS,"token successfully loaded",!0]],[Y,[la.id,{}]],[ib]]}),[uc]:()=>({[g]:[[m,[k.INFO,"signing out..."]]],[B]:[td,null,vc,D]}),[vc]:()=>({[g]:[[m,[k.SUCCESS,"signed out successfully",!0]],[Y,[la.id,{}]],[E,["user",{}]]]}),[Ma]:($,[o,t])=>({[g]:[E,[["opinions",t.id],t.data]]}),[jb]:($,[o,t])=>({[g]:[E,[["opinions",t.id,t.key],t.value]]}),[wc]:($,[o,t])=>({[g]:[[m,[k.INFO,"submitting opinion..."]],[Na,t]],[B]:[ud,t,xc,D]}),[xc]:($,[o,t])=>({[g]:[[m,[k.SUCCESS,"opinion submitted successfully",!0]],[ob,t]]}),[Na]:($,[o,t])=>({[g]:[[da,[["entries",t.id,"opinions"],$=>[...$,t.data]]]]}),[kb]:($,[o,t])=>({[g]:[[da,[["entries",t.id,"opinions"],$=>$.filter($=>$!==t.data)]]]}),[yc]:($,[o,t])=>({[g]:[[m,[k.INFO,"deleting opinion..."]],[kb,t]],[B]:[vd,t,zc,D]}),[zc]:()=>({[g]:[[m,[k.SUCCESS,"opinion deleted successfully",!0]],[Ka]]}),[lb]:($,[o,t])=>({[g]:[[E,["tempOpinion",t.data]]]}),[Ac]:($,[o,t])=>({[g]:[[lb,t],[Ma,t],[kb,t]]}),[Bc]:($,[o,t])=>({[g]:[[Na,t],[Ma,Object.assign(Object.assign({},t),{data:{}})],[lb,{data:{}}]]}),[Cc]:($,[o,t])=>({[g]:[[m,[k.INFO,"updating opinion..."]],[Na,t]],[B]:[wd,t,Dc,D]}),[Dc]:()=>({[g]:[[m,[k.SUCCESS,"opinion updated successfully",!0]]]}),[Ec]:($,[o,t])=>({[g]:[E,[["newEntry",t.key],t.value]]}),[Fc]:($,[o,t])=>({[g]:[E,["newEntry",t.data]]}),[Gc]:($,[o,t])=>({[g]:[[m,[k.INFO,"getting wikipedia data..."]]],[B]:[tb,t,Hc,D]}),[Hc]:($,[o,t])=>({[g]:[[E,["newEntry.wikipedia",t.data]],[m,[k.SUCCESS,"wikipedia data successfully loaded",!0]]]}),[Ic]:($,[o,t])=>({[g]:[[m,[k.INFO,"getting wikipedia data..."]]],[B]:[tb,t,Jc,D]}),[Jc]:($,[o,t])=>({[g]:[[E,["tempEntry.wikipedia",t.data]],[m,[k.SUCCESS,"wikipedia data successfully loaded",!0]]]}),[Kc]:($,[o,t])=>({[g]:[[m,[k.INFO,"submitting entry..."]]],[B]:[yd,t,Lc,D]}),[Lc]:($,[o,t])=>({[g]:[[ka,t.id],[m,[k.SUCCESS,"entry submitted successfully",!0]]]}),[Mc]:($,[o,t])=>({[g]:[[m,[k.INFO,"updating entry..."]]],[B]:[zd,t,Nc,D]}),[Nc]:($,[o,t])=>({[g]:[[E,[["entries",t.id],""]],[ka,t.id],[m,[k.SUCCESS,"entry updated successfully",!0]]]}),[Oc]:($,[o,t])=>({[g]:[E,[["tempEntry",t.key],t.value]]}),[Pc]:($,[o,t])=>({[g]:[E,["tempEntry",t.data]]}),[mb]:($,[o,t])=>({[g]:[[m,[k.INFO,"searching entries..."]]],[B]:[Ad,t,Qc,D]}),[Qc]:($,[o,t])=>({[g]:[[E,["search",t.data]],[m,[k.SUCCESS,"searched successfully",!0]]]}),[xa]:($,[o,t])=>({[g]:[[mb,t],[ec,t.id,t.page]]}),[Rc]:($,[o,t])=>({[B]:[Cd,t,Sc,D]}),[Sc]:($,[o,t])=>({[g]:[[E,[["votes",decodeURI(t.id)],t.data?t.data:[]]],[m,[k.SUCCESS,"vote data successfully loaded",!0]]]}),[Tc]:($,[o,t])=>({[g]:[[m,[k.INFO,"voting..."]],[ya]],[B]:[Dd,t,Uc,D]}),[Uc]:($,[o,t])=>({[g]:[[m,[k.SUCCESS,"voted successfully",!0]],[Xc,t],[ya]]}),[Vc]:($,[o,t])=>({[g]:[[m,[k.INFO,"deleting vote..."]],[Yc,t],[ya]],[B]:[Ed,t,Wc,D]}),[Wc]:()=>({[g]:[[m,[k.SUCCESS,"vote deleted successfully",!0]],[ya]]}),[Xc]:($,[o,t])=>({[g]:[[da,[["votes",t.id],$=>[...$,...t.data]]]]}),[Yc]:($,[o,t])=>({[g]:[[da,[["votes",t.id],$=>$.filter($=>$!==t.data)]]]}),[nb]:($,[o,t])=>({[g]:[[Zc,t],[Rc,t],[pc,t]]}),[Zc]:($,[o,t])=>({[B]:[Fd,t,$c,D]}),[$c]:($,[o,t])=>({[g]:[[E,[["notifications",decodeURI(t.id)],t.data[0].entry_id?t.data:[]]],[m,[k.SUCCESS,"notification successfully loaded",!0]]]}),[ob]:($,[o,t])=>({[g]:[[m,[k.INFO,"watching the entry..."]]],[B]:[Gd,t,bd,D]}),[bd]:($,[o,t])=>({[g]:[[m,[k.SUCCESS,"watched successfully",!0]],[ed,t]]}),[_c]:($,[o,t])=>({[g]:[[m,[k.INFO,"updating the notification..."]]],[B]:[Hd,t,ad,D]}),[ad]:($,[o,t])=>({[g]:[[m,[k.SUCCESS,"notification updated successfully",!0]]]}),[cd]:($,[o,t])=>({[g]:[[m,[k.INFO,"deleting notification..."]],[fd,t]],[B]:[Id,t,dd,D]}),[dd]:()=>({[g]:[[m,[k.SUCCESS,"notification deleted successfully",!0]]]}),[ed]:($,[o,t])=>({[g]:[[da,[["notifications",t.id],$=>[...$,...t.data]]]]}),[fd]:($,[o,t])=>({[g]:[[da,[["notifications",t.id],$=>$.filter($=>$!==t.data)]]]}),[gd]:()=>({[B]:[Jd,null,hd,D]}),[hd]:($,[o,t])=>({[g]:[[E,["newNotifications",t.data]],[m,[k.SUCCESS,"new notifications successfully loaded",!0]]]}),[id]:($,[o,t])=>({[g]:[da,[["newNotifications"],$=>[...$.filter($=>$.entry_id!=t.id),t.data]]]}),[jd]:($,[o,t])=>({[g]:[[_c,t],[ka,t.id],[nb,t.id],[id,t]]})},effects:{[rd]:()=>fetch(H+"/api/v1/user",{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[sd]:$=>fetch(H+"/token?code="+$,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[td]:()=>fetch(H+"/token",{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[ud]:$=>fetch(H+"/api/v1/entries/"+$.id,{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[vd]:$=>fetch(H+`/api/v1/entries/${$.id}/${$.userName}`,{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[wd]:$=>fetch(H+`/api/v1/entries/${$.id}/${$.userName}`,{method:"PUT",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[tb]:$=>fetch(H+`/api/v1/wiki?language=${$.language}&titles=${$.titles}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[xd]:$=>fetch(H+"/api/v1/entries/"+$,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[yd]:$=>fetch(H+"/api/v1/entries",{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[zd]:$=>fetch(H+`/api/v1/entries/${$.id}`,{method:"PUT",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Ad]:$=>fetch(H+`/api/v1/search/entry?id=${$.id}&page=${$.page}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Bd]:$=>fetch(H+"/api/v1/report",{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Cd]:$=>fetch(H+`/api/v1/entries/${$}/placeholder/vote/placeholder`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Dd]:$=>fetch(H+`/api/v1/entries/${$.id}/${$.data.opinion_github_handle}/vote`,{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Ed]:$=>fetch(H+`/api/v1/entries/${$.id}/${$.data.opinion_github_handle}/vote/${$.voteID}`,{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Fd]:$=>fetch(H+`/api/v1/notification/${$}`,{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Gd]:$=>fetch(H+`/api/v1/notification/${$.id}`,{method:"POST",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Hd]:$=>fetch(H+`/api/v1/notification/${$.id}`,{method:"PUT",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Id]:$=>fetch(H+`/api/v1/notification/${$.id}`,{method:"DELETE",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include",body:JSON.stringify($.data)}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),[Jd]:()=>fetch(H+"/api/v1/notifications",{method:"GET",headers:[["Content-Type","application/json"],["Content-Type","text/plain"]],credentials:"include"}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()})},components:{[la.id]:tg,[pb.id]:wg,[qb.id]:xg,[rb.id]:zh,[Oa.id]:Ah,[sb.id]:Ch,[Pa.id]:Fh,[kd.id]:Gh},domRoot:"app",initialState:{status:[k.INFO,"running"],user:{},newNotifications:[],route:{},debug:!1,isNavOpen:!1,accountOpen:!1,notificationOpen:!1,deleteOpinionOpen:!1,reportOpen:!1,report:{},input:"",entries:{},votes:{},voteLock:!1,notifications:{},opinions:{},tempOpinion:{},newEntry:{album:"",alias:"",author:"",category:"",consensus_translation:"",date:"",group:"",id:"",name:"",language:"en",romanization:"",wikipedia:null,opinions:[]},tempEntry:{},search:{}},views:{json:["",$=>JSON.stringify($,null,2)],user:["user",$=>$||{}],newNotifications:"newNotifications",status:"status",debug:"debug",isNavOpen:"isNavOpen",accountOpen:"accountOpen",notificationOpen:"notificationOpen",deleteOpinionOpen:"deleteOpinionOpen",reportOpen:"reportOpen",report:"report",input:"input",entries:"entries",votes:"votes",voteLock:"voteLock",notifications:"notifications",opinions:"opinions",tempOpinion:"tempOpinion",newEntry:"newEntry",tempEntry:"tempEntry",search:"search"},ui:{status:{[k.DONE]:{class:"text-center p-2 bg-yellow-200 text-yellow-700 fadeout"},[k.INFO]:{class:"text-center p-2 bg-yellow-200 text-yellow-700"},[k.SUCCESS]:{class:"text-center p-2 bg-green-200 text-green-700"},[k.ERROR]:{class:"text-center p-2 bg-red-200 text-red-700"}},newsletterForm:{title:{class:"sm:font-light text-2xl sm:text-3xl md:text-4xl text-gray-900 mt-6"},form:{class:"w-full"},container:{class:"flex items-center border-b border-b-2 border-purple-500 py-2"},input:{class:"appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none md:text-xl"},button:{class:"flex-shrink-0 bg-purple-500 hover:bg-purple-700 border-purple-500 hover:border-purple-700 text-sm border-4 text-white py-1 px-2 rounded"}},characterCard:{container:{class:"flex flex-col px-12 py-10 w-full sm:w-1/2 border-gray-200"},icon:{class:"h-8 w-8 md:h-10 md:w-10 md:-my-1"},body:{class:"flex flex-col leading-relaxed ml-4 md:ml-6"},content:{keyword:{class:"font-medium text-gray-800 text-lg"},description:{class:"text-gray-600 mt-1 text-sm md:text-base"}}},root:{class:"about_bg"},debug:{container:{class:"max-w-xs mt-1 flex"},debugToggle:{class:"font-bold rotate-270 flex mt-5 focus:outline-none h-10"},open:{class:"bg-gray-200 text-xs p-2 text-gray-800 rounded-lg"},close:{class:"hidden"}},logo:{container:{class:"sm:px-4 sm:pt-2 sm:pb-6 flex items-center"},m:{class:"h-10"},mxs:{class:"h-10 ml-4 hidden md:block"}},nav:{outer:{},search:{},inner:{open:{class:"items-center justify-between px-4 pt-2 pb-6 block sm:block sm:flex"},close:{class:"items-center justify-between px-4 pt-2 pb-6 hidden sm:block sm:flex"}},title:{class:"black f1 lh-title tc db mb2 mb2-ns"},link:{class:"mt-1 block px-2 py-1 font-bold rounded hover:bg-gray-100 text-lg sm:mt-0 sm:ml-2"}},contact:{link:{class:"flex flex-col sm:text-xl text-gray-600 mt-2 leading-relaxed font-bold hover:bg-gray-200 hover:text-gray-900"}}}};new sg(Hh).start();return{"B6dB":{}};});